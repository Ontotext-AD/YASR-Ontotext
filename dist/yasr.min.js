!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.YASR=e()}}(function(){var e;return function t(e,r,n){function i(o,s){if(!r[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[o]={exports:{}};e[o][0].call(c.exports,function(t){var r=e[o][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t){t.exports=e("./main.js")},{"./main.js":34}],2:[function(e){var t,r=function(){try{return e("jquery")}catch(t){return window.jQuery}}(),n=r(document),i=r("head"),a=null,o=[],s=0,l="id",u="px",c="JColResizer",d=parseInt,f=Math,p=navigator.userAgent.indexOf("Trident/4.0")>0;try{t=sessionStorage}catch(h){}i.append("<style type='text/css'>  .JColResizer{table-layout:fixed;} .JColResizer td, .JColResizer th{overflow:hidden;padding-left:0!important; padding-right:0!important;}  .JCLRgrips{ height:0px; position:relative;} .JCLRgrip{margin-left:-5px; position:absolute; z-index:5; } .JCLRgrip .JColResizer{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;top:0px} .JCLRLastGrip{position:absolute; width:1px; } .JCLRgripDrag{ border-left:1px dotted black;	}</style>");var v=function(e,t){var n=r(e);if(t.disable)return g(n);var i=n.id=n.attr(l)||c+s++;n.p=t.postbackSafe;if(n.is("table")&&!o[i]){n.addClass(c).attr(l,i).before('<div class="JCLRgrips"/>');n.opt=t;n.g=[];n.c=[];n.w=n.width();n.gc=n.prev();t.marginLeft&&n.gc.css("marginLeft",t.marginLeft);t.marginRight&&n.gc.css("marginRight",t.marginRight);n.cs=d(p?e.cellSpacing||e.currentStyle.borderSpacing:n.css("border-spacing"))||2;n.b=d(p?e.border||e.currentStyle.borderLeftWidth:n.css("border-left-width"))||1;o[i]=n;y(n)}},g=function(e){var t=e.attr(l),e=o[t];if(e&&e.is("table")){e.removeClass(c).gc.remove();delete o[t]}},y=function(e){var n=e.find(">thead>tr>th,>thead>tr>td");n.length||(n=e.find(">tbody>tr:first>th,>tr:first>th,>tbody>tr:first>td, >tr:first>td"));e.cg=e.find("col");e.ln=n.length;e.p&&t&&t[e.id]&&m(e,n);n.each(function(t){var n=r(this),i=r(e.gc.append('<div class="JCLRgrip"></div>')[0].lastChild);i.t=e;i.i=t;i.c=n;n.w=n.width();e.g.push(i);e.c.push(n);n.width(n.w).removeAttr("width");t<e.ln-1?i.bind("touchstart mousedown",k).append(e.opt.gripInnerHtml).append('<div class="'+c+'" style="cursor:'+e.opt.hoverCursor+'"></div>'):i.addClass("JCLRLastGrip").removeClass("JCLRgrip");i.data(c,{i:t,t:e.attr(l)})});e.cg.removeAttr("width");w(e);e.find("td, th").not(n).not("table th, table td").each(function(){r(this).removeAttr("width")})},m=function(e,r){var n,i=0,a=0,o=[];if(r){e.cg.removeAttr("width");if(e.opt.flush){t[e.id]="";return}n=t[e.id].split(";");for(;a<e.ln;a++){o.push(100*n[a]/n[e.ln]+"%");r.eq(a).css("width",o[a])}for(a=0;a<e.ln;a++)e.cg.eq(a).css("width",o[a])}else{t[e.id]="";for(;a<e.c.length;a++){n=e.c[a].width();t[e.id]+=n+";";i+=n}t[e.id]+=i}},w=function(e){e.gc.width(e.w);for(var t=0;t<e.ln;t++){var r=e.c[t];e.g[t].css({left:r.offset().left-e.offset().left+r.outerWidth(!1)+e.cs/2+u,height:e.opt.headerOnly?e.c[0].outerHeight(!1):e.outerHeight(!1)})}},x=function(e,t,r){var n=a.x-a.l,i=e.c[t],o=e.c[t+1],s=i.w+n,l=o.w-n;i.width(s+u);o.width(l+u);e.cg.eq(t).width(s+u);e.cg.eq(t+1).width(l+u);if(r){i.w=s;o.w=l}},b=function(e){if(a){var t=a.t;if(e.originalEvent.touches)var r=e.originalEvent.touches[0].pageX-a.ox+a.l;else var r=e.pageX-a.ox+a.l;var n=t.opt.minWidth,i=a.i,o=1.5*t.cs+n+t.b,s=i==t.ln-1?t.w-o:t.g[i+1].position().left-t.cs-n,l=i?t.g[i-1].position().left+t.cs+n:o;r=f.max(l,f.min(s,r));a.x=r;a.css("left",r+u);if(t.opt.liveDrag){x(t,i);w(t);var c=t.opt.onDrag;if(c){e.currentTarget=t[0];c(e)}}return!1}},_=function(e){n.unbind("touchend."+c+" mouseup."+c).unbind("touchmove."+c+" mousemove."+c);r("head :last-child").remove();if(a){a.removeClass(a.t.opt.draggingClass);var i=a.t,o=i.opt.onResize;if(a.x){x(i,a.i,!0);w(i);if(o){e.currentTarget=i[0];o(e)}}i.p&&t&&m(i);a=null}},k=function(e){var t=r(this).data(c),s=o[t.t],l=s.g[t.i];l.ox=e.originalEvent.touches?e.originalEvent.touches[0].pageX:e.pageX;l.l=l.position().left;n.bind("touchmove."+c+" mousemove."+c,b).bind("touchend."+c+" mouseup."+c,_);i.append("<style type='text/css'>*{cursor:"+s.opt.dragCursor+"!important}</style>");l.addClass(s.opt.draggingClass);a=l;if(s.c[t.i].l)for(var u,d=0;d<s.ln;d++){u=s.c[d];u.l=!1;u.w=u.width()}return!1},C=function(){for(t in o){var e,t=o[t],r=0;t.removeClass(c);if(t.w!=t.width()){t.w=t.width();for(e=0;e<t.ln;e++)r+=t.c[e].w;for(e=0;e<t.ln;e++)t.c[e].css("width",f.round(1e3*t.c[e].w/r)/10+"%").l=!0}w(t.addClass(c))}};r(window).bind("resize."+c,C);r.fn.extend({colResizable:function(e){var t={draggingClass:"JCLRgripDrag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"e-resize",dragCursor:"e-resize",postbackSafe:!1,flush:!1,marginLeft:null,marginRight:null,disable:!1,onDrag:null,onResize:null},e=r.extend(t,e);return this.each(function(){v(this,e)})}})},{jquery:void 0}],3:[function(e){RegExp.escape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")};var t=function(){try{return e("jquery")}catch(t){return window.jQuery}}();t.csv={defaults:{separator:",",delimiter:'"',headers:!0},hooks:{castToScalar:function(e){var t=/\./;if(isNaN(e))return e;if(t.test(e))return parseFloat(e);var r=parseInt(e);return isNaN(r)?null:r}},parsers:{parse:function(e,t){function r(){l=0;u="";if(t.start&&t.state.rowNum<t.start){s=[];t.state.rowNum++;t.state.colNum=1}else{if(void 0===t.onParseEntry)o.push(s);else{var e=t.onParseEntry(s,t.state);e!==!1&&o.push(e)}s=[];t.end&&t.state.rowNum>=t.end&&(c=!0);t.state.rowNum++;t.state.colNum=1}}function n(){if(void 0===t.onParseValue)s.push(u);else{var e=t.onParseValue(u,t.state);e!==!1&&s.push(e)}u="";l=0;t.state.colNum++}var i=t.separator,a=t.delimiter;t.state.rowNum||(t.state.rowNum=1);t.state.colNum||(t.state.colNum=1);var o=[],s=[],l=0,u="",c=!1,d=RegExp.escape(i),f=RegExp.escape(a),p=/(D|S|\n|\r|[^DS\r\n]+)/,h=p.source;h=h.replace(/S/g,d);h=h.replace(/D/g,f);p=RegExp(h,"gm");e.replace(p,function(e){if(!c)switch(l){case 0:if(e===i){u+="";n();break}if(e===a){l=1;break}if("\n"===e){n();r();break}if(/^\r$/.test(e))break;u+=e;l=3;break;case 1:if(e===a){l=2;break}u+=e;l=1;break;case 2:if(e===a){u+=e;l=1;break}if(e===i){n();break}if("\n"===e){n();r();break}if(/^\r$/.test(e))break;throw new Error("CSVDataError: Illegal State [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]");case 3:if(e===i){n();break}if("\n"===e){n();r();break}if(/^\r$/.test(e))break;if(e===a)throw new Error("CSVDataError: Illegal Quote [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]")}});if(0!==s.length){n();r()}return o},splitLines:function(e,t){function r(){o=0;if(t.start&&t.state.rowNum<t.start){s="";t.state.rowNum++}else{if(void 0===t.onParseEntry)a.push(s);else{var e=t.onParseEntry(s,t.state);e!==!1&&a.push(e)}s="";t.end&&t.state.rowNum>=t.end&&(l=!0);t.state.rowNum++}}var n=t.separator,i=t.delimiter;t.state.rowNum||(t.state.rowNum=1);var a=[],o=0,s="",l=!1,u=RegExp.escape(n),c=RegExp.escape(i),d=/(D|S|\n|\r|[^DS\r\n]+)/,f=d.source;f=f.replace(/S/g,u);f=f.replace(/D/g,c);d=RegExp(f,"gm");e.replace(d,function(e){if(!l)switch(o){case 0:if(e===n){s+=e;o=0;break}if(e===i){s+=e;o=1;break}if("\n"===e){r();break}if(/^\r$/.test(e))break;s+=e;o=3;break;case 1:if(e===i){s+=e;o=2;break}s+=e;o=1;break;case 2:var a=s.substr(s.length-1);if(e===i&&a===i){s+=e;o=1;break}if(e===n){s+=e;o=0;break}if("\n"===e){r();break}if("\r"===e)break;throw new Error("CSVDataError: Illegal state [Row:"+t.state.rowNum+"]");case 3:if(e===n){s+=e;o=0;break}if("\n"===e){r();break}if("\r"===e)break;if(e===i)throw new Error("CSVDataError: Illegal quote [Row:"+t.state.rowNum+"]");throw new Error("CSVDataError: Illegal state [Row:"+t.state.rowNum+"]");default:throw new Error("CSVDataError: Unknown state [Row:"+t.state.rowNum+"]")}});""!==s&&r();return a},parseEntry:function(e,t){function r(){if(void 0===t.onParseValue)a.push(s);else{var e=t.onParseValue(s,t.state);e!==!1&&a.push(e)}s="";o=0;t.state.colNum++}var n=t.separator,i=t.delimiter;t.state.rowNum||(t.state.rowNum=1);t.state.colNum||(t.state.colNum=1);var a=[],o=0,s="";if(!t.match){var l=RegExp.escape(n),u=RegExp.escape(i),c=/(D|S|\n|\r|[^DS\r\n]+)/,d=c.source;d=d.replace(/S/g,l);d=d.replace(/D/g,u);t.match=RegExp(d,"gm")}e.replace(t.match,function(e){switch(o){case 0:if(e===n){s+="";r();break}if(e===i){o=1;break}if("\n"===e||"\r"===e)break;s+=e;o=3;break;case 1:if(e===i){o=2;break}s+=e;o=1;break;case 2:if(e===i){s+=e;o=1;break}if(e===n){r();break}if("\n"===e||"\r"===e)break;throw new Error("CSVDataError: Illegal State [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]");case 3:if(e===n){r();break}if("\n"===e||"\r"===e)break;if(e===i)throw new Error("CSVDataError: Illegal Quote [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]")}});r();return a}},toArray:function(e,r,n){var r=void 0!==r?r:{},i={};i.callback=void 0!==n&&"function"==typeof n?n:!1;i.separator="separator"in r?r.separator:t.csv.defaults.separator;i.delimiter="delimiter"in r?r.delimiter:t.csv.defaults.delimiter;var a=void 0!==r.state?r.state:{},r={delimiter:i.delimiter,separator:i.separator,onParseEntry:r.onParseEntry,onParseValue:r.onParseValue,state:a},o=t.csv.parsers.parseEntry(e,r);if(!i.callback)return o;i.callback("",o);return void 0},toArrays:function(e,r,n){var r=void 0!==r?r:{},i={};i.callback=void 0!==n&&"function"==typeof n?n:!1;i.separator="separator"in r?r.separator:t.csv.defaults.separator;i.delimiter="delimiter"in r?r.delimiter:t.csv.defaults.delimiter;var a=[],r={delimiter:i.delimiter,separator:i.separator,onParseEntry:r.onParseEntry,onParseValue:r.onParseValue,start:r.start,end:r.end,state:{rowNum:1,colNum:1}};a=t.csv.parsers.parse(e,r);if(!i.callback)return a;i.callback("",a);return void 0},toObjects:function(e,r,n){var r=void 0!==r?r:{},i={};i.callback=void 0!==n&&"function"==typeof n?n:!1;i.separator="separator"in r?r.separator:t.csv.defaults.separator;i.delimiter="delimiter"in r?r.delimiter:t.csv.defaults.delimiter;i.headers="headers"in r?r.headers:t.csv.defaults.headers;r.start="start"in r?r.start:1;i.headers&&r.start++;r.end&&i.headers&&r.end++;var a=[],o=[],r={delimiter:i.delimiter,separator:i.separator,onParseEntry:r.onParseEntry,onParseValue:r.onParseValue,start:r.start,end:r.end,state:{rowNum:1,colNum:1},match:!1},s={delimiter:i.delimiter,separator:i.separator,start:1,end:1,state:{rowNum:1,colNum:1}},l=t.csv.parsers.splitLines(e,s),u=t.csv.toArray(l[0],r),a=t.csv.parsers.splitLines(e,r);r.state.colNum=1;r.state.rowNum=u?2:1;for(var c=0,d=a.length;d>c;c++){var f=t.csv.toArray(a[c],r),p={};for(var h in u)p[u[h]]=f[h];o.push(p);r.state.rowNum++}if(!i.callback)return o;i.callback("",o);return void 0},fromArrays:function(e,r,n){var r=void 0!==r?r:{},a={};a.callback=void 0!==n&&"function"==typeof n?n:!1;a.separator="separator"in r?r.separator:t.csv.defaults.separator;a.delimiter="delimiter"in r?r.delimiter:t.csv.defaults.delimiter;a.escaper="escaper"in r?r.escaper:t.csv.defaults.escaper;a.experimental="experimental"in r?r.experimental:!1;if(!a.experimental)throw new Error("not implemented");var o=[];for(i in e)o.push(e[i]);if(!a.callback)return o;a.callback("",o);return void 0},fromObjects2CSV:function(e,r,n){var r=void 0!==r?r:{},a={};a.callback=void 0!==n&&"function"==typeof n?n:!1;a.separator="separator"in r?r.separator:t.csv.defaults.separator;a.delimiter="delimiter"in r?r.delimiter:t.csv.defaults.delimiter;a.experimental="experimental"in r?r.experimental:!1;if(!a.experimental)throw new Error("not implemented");var o=[];for(i in e)o.push(arrays[i]);if(!a.callback)return o;a.callback("",o);return void 0}};t.csvEntry2Array=t.csv.toArray;t.csv2Array=t.csv.toArrays;t.csv2Dictionary=t.csv.toObjects},{jquery:void 0}],4:[function(e,t){function r(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=r;r.EventEmitter=r;r.prototype._events=void 0;r.prototype._maxListeners=void 0;r.defaultMaxListeners=10;r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this};r.prototype.emit=function(e){var t,r,i,s,l,u;this._events||(this._events={});if("error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){t=arguments[1];if(t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}r=this._events[e];if(o(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=arguments.length;s=new Array(i-1);for(l=1;i>l;l++)s[l-1]=arguments[l];r.apply(this,s)}else if(a(r)){i=arguments.length;s=new Array(i-1);for(l=1;i>l;l++)s[l-1]=arguments[l];u=r.slice();i=u.length;for(l=0;i>l;l++)u[l].apply(this,s)}return!0};r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t);this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t;if(a(this._events[e])&&!this._events[e].warned){var i;i=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners;if(i&&i>0&&this._events[e].length>i){this._events[e].warned=!0;console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length);"function"==typeof console.trace&&console.trace()}}return this};r.prototype.on=r.prototype.addListener;r.prototype.once=function(e,t){function r(){this.removeListener(e,r);if(!i){i=!0;t.apply(this,arguments)}}if(!n(t))throw TypeError("listener must be a function");var i=!1;r.listener=t;this.on(e,r);return this};r.prototype.removeListener=function(e,t){var r,i,o,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;r=this._events[e];o=r.length;i=-1;if(r===t||n(r.listener)&&r.listener===t){delete this._events[e];this._events.removeListener&&this.emit("removeListener",e,t)}else if(a(r)){for(s=o;s-->0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(0>i)return this;if(1===r.length){r.length=0;delete this._events[e]}else r.splice(i,1);this._events.removeListener&&this.emit("removeListener",e,t)}return this};r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener){0===arguments.length?this._events={}:this._events[e]&&delete this._events[e];return this}if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);this.removeAllListeners("removeListener");this._events={};return this}r=this._events[e];if(n(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);delete this._events[e];return this};r.prototype.listeners=function(e){var t;t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[];return t};r.listenerCount=function(e,t){var r;r=e._events&&e._events[t]?n(e._events[t])?1:e._events[t].length:0;return r}},{}],5:[function(t,r,n){(function(i){"object"==typeof n&&"object"==typeof r?i(function(){try{return t("codemirror")}catch(e){return window.CodeMirror}}()):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)})(function(e){function t(e,t,n,i){var a=e.getLineHandle(t.line),l=t.ch-1,u=l>=0&&s[a.text.charAt(l)]||s[a.text.charAt(++l)];if(!u)return null;var c=">"==u.charAt(1)?1:-1;if(n&&c>0!=(l==t.ch))return null;var d=e.getTokenTypeAt(o(t.line,l+1)),f=r(e,o(t.line,l+(c>0?1:0)),c,d||null,i);return null==f?null:{from:o(t.line,l),to:f&&f.pos,match:f&&f.ch==u.charAt(0),forward:c>0}}function r(e,t,r,n,i){for(var a=i&&i.maxScanLineLength||1e4,l=i&&i.maxScanLines||1e3,u=[],c=i&&i.bracketRegex?i.bracketRegex:/[(){}[\]]/,d=r>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),f=t.line;f!=d;f+=r){var p=e.getLine(f);if(p){var h=r>0?0:p.length-1,v=r>0?p.length:-1;if(!(p.length>a)){f==t.line&&(h=t.ch-(0>r?1:0));for(;h!=v;h+=r){var g=p.charAt(h);if(c.test(g)&&(void 0===n||e.getTokenTypeAt(o(f,h+1))==n)){var y=s[g];if(">"==y.charAt(1)==r>0)u.push(g);else{if(!u.length)return{pos:o(f,h),ch:g};u.pop()}}}}}}return f-r==(r>0?e.lastLine():e.firstLine())?!1:null}function n(e,r,n){for(var i=e.state.matchBrackets.maxHighlightLineLength||1e3,s=[],l=e.listSelections(),u=0;u<l.length;u++){var c=l[u].empty()&&t(e,l[u].head,!1,n);if(c&&e.getLine(c.from.line).length<=i){var d=c.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(e.markText(c.from,o(c.from.line,c.from.ch+1),{className:d}));c.to&&e.getLine(c.to.line).length<=i&&s.push(e.markText(c.to,o(c.to.line,c.to.ch+1),{className:d}))}}if(s.length){a&&e.state.focused&&e.display.input.focus();var f=function(){e.operation(function(){for(var e=0;e<s.length;e++)s[e].clear()})};if(!r)return f;setTimeout(f,800)}}function i(e){e.operation(function(){if(l){l();l=null}l=n(e,!1,e.state.matchBrackets)})}var a=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),o=e.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;e.defineOption("matchBrackets",!1,function(t,r,n){n&&n!=e.Init&&t.off("cursorActivity",i);if(r){t.state.matchBrackets="object"==typeof r?r:{};t.on("cursorActivity",i)}});e.defineExtension("matchBrackets",function(){n(this,!0)});e.defineExtension("findMatchingBracket",function(e,r,n){return t(this,e,r,n)});e.defineExtension("scanForBracket",function(e,t,n,i){return r(this,e,t,n,i)})})},{codemirror:void 0}],6:[function(t,r,n){(function(i){"object"==typeof n&&"object"==typeof r?i(function(){try{return t("codemirror")}catch(e){return window.CodeMirror}}()):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)})(function(e){"use strict";e.registerHelper("fold","brace",function(t,r){function n(n){for(var i=r.ch,l=0;;){var u=0>=i?-1:s.lastIndexOf(n,i-1);if(-1!=u){if(1==l&&u<r.ch)break;a=t.getTokenTypeAt(e.Pos(o,u+1));if(!/^(comment|string)/.test(a))return u+1;i=u-1}else{if(1==l)break;l=1;i=s.length}}}var i,a,o=r.line,s=t.getLine(o),l="{",u="}",i=n("{");if(null==i){l="[",u="]";i=n("[")}if(null!=i){var c,d,f=1,p=t.lastLine();e:for(var h=o;p>=h;++h)for(var v=t.getLine(h),g=h==o?i:0;;){var y=v.indexOf(l,g),m=v.indexOf(u,g);0>y&&(y=v.length);0>m&&(m=v.length);g=Math.min(y,m);if(g==v.length)break;if(t.getTokenTypeAt(e.Pos(h,g+1))==a)if(g==y)++f;else if(!--f){c=h;d=g;break e}++g}if(null!=c&&(o!=c||d!=i))return{from:e.Pos(o,i),to:e.Pos(c,d)}}});e.registerHelper("fold","import",function(t,r){function n(r){if(r<t.firstLine()||r>t.lastLine())return null;var n=t.getTokenAt(e.Pos(r,1));/\S/.test(n.string)||(n=t.getTokenAt(e.Pos(r,n.end+1)));if("keyword"!=n.type||"import"!=n.string)return null;for(var i=r,a=Math.min(t.lastLine(),r+10);a>=i;++i){var o=t.getLine(i),s=o.indexOf(";");if(-1!=s)return{startCh:n.end,end:e.Pos(i,s)}}}var i,r=r.line,a=n(r);if(!a||n(r-1)||(i=n(r-2))&&i.end.line==r-1)return null;for(var o=a.end;;){var s=n(o.line+1);if(null==s)break;o=s.end}return{from:t.clipPos(e.Pos(r,a.startCh+1)),to:o}});e.registerHelper("fold","include",function(t,r){function n(r){if(r<t.firstLine()||r>t.lastLine())return null;var n=t.getTokenAt(e.Pos(r,1));/\S/.test(n.string)||(n=t.getTokenAt(e.Pos(r,n.end+1)));return"meta"==n.type&&"#include"==n.string.slice(0,8)?n.start+8:void 0}var r=r.line,i=n(r);if(null==i||null!=n(r-1))return null;for(var a=r;;){var o=n(a+1);if(null==o)break;++a}return{from:e.Pos(r,i+1),to:t.clipPos(e.Pos(a))}})})},{codemirror:void 0}],7:[function(t,r,n){(function(i){"object"==typeof n&&"object"==typeof r?i(function(){try{return t("codemirror")}catch(e){return window.CodeMirror}}()):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)})(function(e){"use strict";function t(t,i,a,o){function s(e){var r=l(t,i);if(!r||r.to.line-r.from.line<u)return null;for(var n=t.findMarksAt(r.from),a=0;a<n.length;++a)if(n[a].__isFold&&"fold"!==o){if(!e)return null;r.cleared=!0;n[a].clear()}return r}if(a&&a.call){var l=a;a=null}else var l=n(t,a,"rangeFinder");"number"==typeof i&&(i=e.Pos(i,0));var u=n(t,a,"minFoldSize"),c=s(!0);if(n(t,a,"scanUp"))for(;!c&&i.line>t.firstLine();){i=e.Pos(i.line-1,0);c=s(!1)}if(c&&!c.cleared&&"unfold"!==o){var d=r(t,a);e.on(d,"mousedown",function(t){f.clear();e.e_preventDefault(t)});var f=t.markText(c.from,c.to,{replacedWith:d,clearOnEnter:!0,__isFold:!0});f.on("clear",function(r,n){e.signal(t,"unfold",t,r,n)});e.signal(t,"fold",t,c.from,c.to)}}function r(e,t){var r=n(e,t,"widget");if("string"==typeof r){var i=document.createTextNode(r);r=document.createElement("span");r.appendChild(i);r.className="CodeMirror-foldmarker"}return r}function n(e,t,r){if(t&&void 0!==t[r])return t[r];var n=e.options.foldOptions;return n&&void 0!==n[r]?n[r]:i[r]}e.newFoldFunction=function(e,r){return function(n,i){t(n,i,{rangeFinder:e,widget:r})}};e.defineExtension("foldCode",function(e,r,n){t(this,e,r,n)});e.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),r=0;r<t.length;++r)if(t[r].__isFold)return!0});e.commands.toggleFold=function(e){e.foldCode(e.getCursor())};e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")};e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")};e.commands.foldAll=function(t){t.operation(function(){for(var r=t.firstLine(),n=t.lastLine();n>=r;r++)t.foldCode(e.Pos(r,0),null,"fold")})};e.commands.unfoldAll=function(t){t.operation(function(){for(var r=t.firstLine(),n=t.lastLine();n>=r;r++)t.foldCode(e.Pos(r,0),null,"unfold")})};e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,r){for(var n=0;n<e.length;++n){var i=e[n](t,r);if(i)return i}}});e.registerHelper("fold","auto",function(e,t){for(var r=e.getHelpers(t,"fold"),n=0;n<r.length;n++){var i=r[n](e,t);if(i)return i}});var i={rangeFinder:e.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1};e.defineOption("foldOptions",null);e.defineExtension("foldOption",function(e,t){return n(this,e,t)})})},{codemirror:void 0}],8:[function(t,r,n){(function(i){"object"==typeof n&&"object"==typeof r?i(function(){try{return t("codemirror")}catch(e){return window.CodeMirror}}(),t("./foldcode")):"function"==typeof e&&e.amd?e(["../../lib/codemirror","./foldcode"],i):i(CodeMirror)})(function(e){"use strict";function t(e){this.options=e;this.from=this.to=0}function r(e){e===!0&&(e={});null==e.gutter&&(e.gutter="CodeMirror-foldgutter");null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open");null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded");return e}function n(e,t){for(var r=e.findMarksAt(d(t)),n=0;n<r.length;++n)if(r[n].__isFold&&r[n].find().from.line==t)return!0}function i(e){if("string"==typeof e){var t=document.createElement("div");t.className=e+" CodeMirror-guttermarker-subtle";return t}return e.cloneNode(!0)}function a(e,t,r){var a=e.state.foldGutter.options,o=t,s=e.foldOption(a,"minFoldSize"),l=e.foldOption(a,"rangeFinder");e.eachLine(t,r,function(t){var r=null;if(n(e,o))r=i(a.indicatorFolded);else{var u=d(o,0),c=l&&l(e,u);c&&c.to.line-c.from.line>=s&&(r=i(a.indicatorOpen))}e.setGutterMarker(t,a.gutter,r);++o})}function o(e){var t=e.getViewport(),r=e.state.foldGutter;if(r){e.operation(function(){a(e,t.from,t.to)});r.from=t.from;r.to=t.to}}function s(e,t,r){var n=e.state.foldGutter.options;r==n.gutter&&e.foldCode(d(t,0),n.rangeFinder)}function l(e){var t=e.state.foldGutter,r=e.state.foldGutter.options;t.from=t.to=0;clearTimeout(t.changeUpdate);t.changeUpdate=setTimeout(function(){o(e)},r.foldOnChangeTimeSpan||600)}function u(e){var t=e.state.foldGutter,r=e.state.foldGutter.options;clearTimeout(t.changeUpdate);t.changeUpdate=setTimeout(function(){var r=e.getViewport();t.from==t.to||r.from-t.to>20||t.from-r.to>20?o(e):e.operation(function(){if(r.from<t.from){a(e,r.from,t.from);t.from=r.from}if(r.to>t.to){a(e,t.to,r.to);t.to=r.to}})},r.updateViewportTimeSpan||400)}function c(e,t){var r=e.state.foldGutter,n=t.line;n>=r.from&&n<r.to&&a(e,n,n+1)}e.defineOption("foldGutter",!1,function(n,i,a){if(a&&a!=e.Init){n.clearGutter(n.state.foldGutter.options.gutter);n.state.foldGutter=null;n.off("gutterClick",s);n.off("change",l);n.off("viewportChange",u);n.off("fold",c);n.off("unfold",c);n.off("swapDoc",o)}if(i){n.state.foldGutter=new t(r(i));o(n);n.on("gutterClick",s);n.on("change",l);n.on("viewportChange",u);n.on("fold",c);n.on("unfold",c);n.on("swapDoc",o)}});var d=e.Pos})},{"./foldcode":7,codemirror:void 0}],9:[function(t,r,n){(function(i){"object"==typeof n&&"object"==typeof r?i(function(){try{return t("codemirror")}catch(e){return window.CodeMirror}}()):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)})(function(e){"use strict";function t(e,t){return e.line-t.line||e.ch-t.ch}function r(e,t,r,n){this.line=t;this.ch=r;this.cm=e;this.text=e.getLine(t);this.min=n?n.from:e.firstLine();this.max=n?n.to-1:e.lastLine()}function n(e,t){var r=e.cm.getTokenTypeAt(f(e.line,t));return r&&/\btag\b/.test(r)}function i(e){if(!(e.line>=e.max)){e.ch=0;e.text=e.cm.getLine(++e.line);return!0}}function a(e){if(!(e.line<=e.min)){e.text=e.cm.getLine(--e.line);e.ch=e.text.length;return!0}}function o(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(i(e))continue;return}if(n(e,t+1)){var r=e.text.lastIndexOf("/",t),a=r>-1&&!/\S/.test(e.text.slice(r+1,t));e.ch=t+1;return a?"selfClose":"regular"}e.ch=t+1}}function s(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(a(e))continue;return}if(n(e,t+1)){v.lastIndex=t;e.ch=t;var r=v.exec(e.text);if(r&&r.index==t)return r}else e.ch=t}}function l(e){for(;;){v.lastIndex=e.ch;var t=v.exec(e.text);if(!t){if(i(e))continue;return}if(n(e,t.index+1)){e.ch=t.index+t[0].length;return t}e.ch=t.index+1}}function u(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(a(e))continue;return}if(n(e,t+1)){var r=e.text.lastIndexOf("/",t),i=r>-1&&!/\S/.test(e.text.slice(r+1,t));e.ch=t+1;return i?"selfClose":"regular"}e.ch=t}}function c(e,t){for(var r=[];;){var n,i=l(e),a=e.line,s=e.ch-(i?i[0].length:0);if(!i||!(n=o(e)))return;if("selfClose"!=n)if(i[1]){for(var u=r.length-1;u>=0;--u)if(r[u]==i[2]){r.length=u;break}if(0>u&&(!t||t==i[2]))return{tag:i[2],from:f(a,s),to:f(e.line,e.ch)}}else r.push(i[2])}}function d(e,t){for(var r=[];;){var n=u(e);if(!n)return;if("selfClose"!=n){var i=e.line,a=e.ch,o=s(e);if(!o)return;if(o[1])r.push(o[2]);else{for(var l=r.length-1;l>=0;--l)if(r[l]==o[2]){r.length=l;break}if(0>l&&(!t||t==o[2]))return{tag:o[2],from:f(e.line,e.ch),to:f(i,a)}}}else s(e)}}var f=e.Pos,p="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",h=p+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",v=new RegExp("<(/?)(["+p+"]["+h+"]*)","g");e.registerHelper("fold","xml",function(e,t){for(var n=new r(e,t.line,0);;){var i,a=l(n);if(!a||n.line!=t.line||!(i=o(n)))return;if(!a[1]&&"selfClose"!=i){var t=f(n.line,n.ch),s=c(n,a[2]);return s&&{from:t,to:s.from}}}});e.findMatchingTag=function(e,n,i){var a=new r(e,n.line,n.ch,i);if(-1!=a.text.indexOf(">")||-1!=a.text.indexOf("<")){var l=o(a),u=l&&f(a.line,a.ch),p=l&&s(a);if(l&&p&&!(t(a,n)>0)){var h={from:f(a.line,a.ch),to:u,tag:p[2]};if("selfClose"==l)return{open:h,close:null,at:"open"};if(p[1])return{open:d(a,p[2]),close:h,at:"close"};a=new r(e,u.line,u.ch,i);return{open:h,close:c(a,p[2]),at:"open"}}}};e.findEnclosingTag=function(e,t,n){for(var i=new r(e,t.line,t.ch,n);;){var a=d(i);if(!a)break;var o=new r(e,t.line,t.ch,n),s=c(o,a.tag);if(s)return{open:a,close:s}}};e.scanForClosingTag=function(e,t,n,i){var a=new r(e,t.line,t.ch,i?{from:0,to:i}:null);return c(a,n)}})},{codemirror:void 0}],10:[function(t,r,n){(function(i){"object"==typeof n&&"object"==typeof r?i(function(){try{return t("codemirror")}catch(e){return window.CodeMirror}}()):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)})(function(e){"use strict";e.defineMode("javascript",function(t,r){function n(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}function i(e,t,r){vt=e;gt=r;return t}function a(e,t){var r=e.next();if('"'==r||"'"==r){t.tokenize=o(r);return t.tokenize(e,t)}if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return i("number","number");if("."==r&&e.match(".."))return i("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return i(r);if("="==r&&e.eat(">"))return i("=>","operator");if("0"==r&&e.eat(/x/i)){e.eatWhile(/[\da-f]/i);return i("number","number")}if(/\d/.test(r)){e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);return i("number","number")}if("/"==r){if(e.eat("*")){t.tokenize=s;return s(e,t)}if(e.eat("/")){e.skipToEnd();return i("comment","comment")}if("operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)){n(e);e.eatWhile(/[gimy]/);return i("regexp","string-2")}e.eatWhile(Ct);return i("operator","operator",e.current())}if("`"==r){t.tokenize=l;return l(e,t)}if("#"==r){e.skipToEnd();return i("error","error")}if(Ct.test(r)){e.eatWhile(Ct);return i("operator","operator",e.current())}if(_t.test(r)){e.eatWhile(_t);var a=e.current(),u=kt.propertyIsEnumerable(a)&&kt[a];return u&&"."!=t.lastType?i(u.type,u.style,a):i("variable","variable",a)}}function o(e){return function(t,r){var n,o=!1;if(wt&&"@"==t.peek()&&t.match(Et)){r.tokenize=a;return i("jsonld-keyword","meta")}for(;null!=(n=t.next())&&(n!=e||o);)o=!o&&"\\"==n;o||(r.tokenize=a);return i("string","string")}}function s(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=a;break}n="*"==r}return i("comment","comment")}function l(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=a;break}n=!n&&"\\"==r}return i("quasi","string-2",e.current())}function u(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(0>r)){for(var n=0,i=!1,a=r-1;a>=0;--a){var o=e.string.charAt(a),s=St.indexOf(o);if(s>=0&&3>s){if(!n){++a;break}if(0==--n)break}else if(s>=3&&6>s)++n;else if(_t.test(o))i=!0;else{if(/["'\/]/.test(o))return;if(i&&!n){++a;break}}}i&&!n&&(t.fatArrowAt=a)}}function c(e,t,r,n,i,a){this.indented=e;this.column=t;this.type=r;this.prev=i;this.info=a;null!=n&&(this.align=n)}function d(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(var r=n.vars;r;r=r.next)if(r.name==t)return!0}function f(e,t,r,n,i){var a=e.cc;Dt.state=e;Dt.stream=i;Dt.marked=null,Dt.cc=a;Dt.style=t;e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);for(;;){var o=a.length?a.pop():xt?_:b;if(o(r,n)){for(;a.length&&a[a.length-1].lex;)a.pop()();return Dt.marked?Dt.marked:"variable"==r&&d(e,n)?"variable-2":t}}}function p(){for(var e=arguments.length-1;e>=0;e--)Dt.cc.push(arguments[e])}function h(){p.apply(null,arguments);return!0}function v(e){function t(t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}var n=Dt.state;if(n.context){Dt.marked="def";if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}
}else{if(t(n.globalVars))return;r.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function g(){Dt.state.context={prev:Dt.state.context,vars:Dt.state.localVars};Dt.state.localVars=Pt}function y(){Dt.state.localVars=Dt.state.context.vars;Dt.state.context=Dt.state.context.prev}function m(e,t){var r=function(){var r=Dt.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var i=r.lexical;i&&")"==i.type&&i.align;i=i.prev)n=i.indented;r.lexical=new c(n,Dt.stream.column(),e,null,r.lexical,t)};r.lex=!0;return r}function w(){var e=Dt.state;if(e.lexical.prev){")"==e.lexical.type&&(e.indented=e.lexical.indented);e.lexical=e.lexical.prev}}function x(e){function t(r){return r==e?h():";"==e?p():h(t)}return t}function b(e,t){if("var"==e)return h(m("vardef",t.length),F,x(";"),w);if("keyword a"==e)return h(m("form"),_,b,w);if("keyword b"==e)return h(m("form"),b,w);if("{"==e)return h(m("}"),V,w);if(";"==e)return h();if("if"==e){"else"==Dt.state.lexical.info&&Dt.state.cc[Dt.state.cc.length-1]==w&&Dt.state.cc.pop()();return h(m("form"),_,b,w,$)}return"function"==e?h(et):"for"==e?h(m("form"),G,b,w):"variable"==e?h(m("stat"),L):"switch"==e?h(m("form"),_,m("}","switch"),x("{"),V,w,w):"case"==e?h(_,x(":")):"default"==e?h(x(":")):"catch"==e?h(m("form"),g,x("("),tt,x(")"),b,w,y):"module"==e?h(m("form"),g,ot,y,w):"class"==e?h(m("form"),rt,w):"export"==e?h(m("form"),st,w):"import"==e?h(m("form"),lt,w):p(m("stat"),_,x(";"),w)}function _(e){return C(e,!1)}function k(e){return C(e,!0)}function C(e,t){if(Dt.state.fatArrowAt==Dt.stream.start){var r=t?j:M;if("("==e)return h(g,m(")"),z(Y,")"),w,x("=>"),r,y);if("variable"==e)return p(g,Y,x("=>"),r,y)}var n=t?D:T;return Tt.hasOwnProperty(e)?h(n):"function"==e?h(et,n):"keyword c"==e?h(t?S:E):"("==e?h(m(")"),E,pt,x(")"),w,n):"operator"==e||"spread"==e?h(t?k:_):"["==e?h(m("]"),dt,w,n):"{"==e?B(R,"}",null,n):"quasi"==e?p(P,n):h()}function E(e){return e.match(/[;\}\)\],]/)?p():p(_)}function S(e){return e.match(/[;\}\)\],]/)?p():p(k)}function T(e,t){return","==e?h(_):D(e,t,!1)}function D(e,t,r){var n=0==r?T:D,i=0==r?_:k;return"=>"==e?h(g,r?j:M,y):"operator"==e?/\+\+|--/.test(t)?h(n):"?"==t?h(_,x(":"),i):h(i):"quasi"==e?p(P,n):";"!=e?"("==e?B(k,")","call",n):"."==e?h(I,n):"["==e?h(m("]"),E,x("]"),w,n):void 0:void 0}function P(e,t){return"quasi"!=e?p():"${"!=t.slice(t.length-2)?h(P):h(_,N)}function N(e){if("}"==e){Dt.marked="string-2";Dt.state.tokenize=l;return h(P)}}function M(e){u(Dt.stream,Dt.state);return p("{"==e?b:_)}function j(e){u(Dt.stream,Dt.state);return p("{"==e?b:k)}function L(e){return":"==e?h(w,b):p(T,x(";"),w)}function I(e){if("variable"==e){Dt.marked="property";return h()}}function R(e,t){if("variable"==e||"keyword"==Dt.style){Dt.marked="property";return h("get"==t||"set"==t?A:O)}if("number"==e||"string"==e){Dt.marked=wt?"property":Dt.style+" property";return h(O)}return"jsonld-keyword"==e?h(O):"["==e?h(_,x("]"),O):void 0}function A(e){if("variable"!=e)return p(O);Dt.marked="property";return h(et)}function O(e){return":"==e?h(k):"("==e?p(et):void 0}function z(e,t){function r(n){if(","==n){var i=Dt.state.lexical;"call"==i.info&&(i.pos=(i.pos||0)+1);return h(e,r)}return n==t?h():h(x(t))}return function(n){return n==t?h():p(e,r)}}function B(e,t,r){for(var n=3;n<arguments.length;n++)Dt.cc.push(arguments[n]);return h(m(t,r),z(e,t),w)}function V(e){return"}"==e?h():p(b,V)}function q(e){return bt&&":"==e?h(X):void 0}function X(e){if("variable"==e){Dt.marked="variable-3";return h()}}function F(){return p(Y,q,U,H)}function Y(e,t){if("variable"==e){v(t);return h()}return"["==e?B(Y,"]"):"{"==e?B(W,"}"):void 0}function W(e,t){if("variable"==e&&!Dt.stream.match(/^\s*:/,!1)){v(t);return h(U)}"variable"==e&&(Dt.marked="property");return h(x(":"),Y,U)}function U(e,t){return"="==t?h(k):void 0}function H(e){return","==e?h(F):void 0}function $(e,t){return"keyword b"==e&&"else"==t?h(m("form","else"),b,w):void 0}function G(e){return"("==e?h(m(")"),Z,x(")"),w):void 0}function Z(e){return"var"==e?h(F,x(";"),J):";"==e?h(J):"variable"==e?h(Q):p(_,x(";"),J)}function Q(e,t){if("in"==t||"of"==t){Dt.marked="keyword";return h(_)}return h(T,J)}function J(e,t){if(";"==e)return h(K);if("in"==t||"of"==t){Dt.marked="keyword";return h(_)}return p(_,x(";"),K)}function K(e){")"!=e&&h(_)}function et(e,t){if("*"==t){Dt.marked="keyword";return h(et)}if("variable"==e){v(t);return h(et)}return"("==e?h(g,m(")"),z(tt,")"),w,b,y):void 0}function tt(e){return"spread"==e?h(tt):p(Y,q)}function rt(e,t){if("variable"==e){v(t);return h(nt)}}function nt(e,t){return"extends"==t?h(_,nt):"{"==e?h(m("}"),it,w):void 0}function it(e,t){if("variable"==e||"keyword"==Dt.style){Dt.marked="property";return"get"==t||"set"==t?h(at,et,it):h(et,it)}if("*"==t){Dt.marked="keyword";return h(it)}return";"==e?h(it):"}"==e?h():void 0}function at(e){if("variable"!=e)return p();Dt.marked="property";return h()}function ot(e,t){if("string"==e)return h(b);if("variable"==e){v(t);return h(ct)}}function st(e,t){if("*"==t){Dt.marked="keyword";return h(ct,x(";"))}if("default"==t){Dt.marked="keyword";return h(_,x(";"))}return p(b)}function lt(e){return"string"==e?h():p(ut,ct)}function ut(e,t){if("{"==e)return B(ut,"}");"variable"==e&&v(t);return h()}function ct(e,t){if("from"==t){Dt.marked="keyword";return h(_)}}function dt(e){return"]"==e?h():p(k,ft)}function ft(e){return"for"==e?p(pt,x("]")):","==e?h(z(S,"]")):p(z(k,"]"))}function pt(e){return"for"==e?h(G,pt):"if"==e?h(_,pt):void 0}function ht(e,t){return"operator"==e.lastType||","==e.lastType||Ct.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}var vt,gt,yt=t.indentUnit,mt=r.statementIndent,wt=r.jsonld,xt=r.json||wt,bt=r.typescript,_t=r.wordCharacters||/[\w$\xa1-\uffff]/,kt=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),i=e("operator"),a={type:"atom",style:"atom"},o={"if":e("if"),"while":t,"with":t,"else":r,"do":r,"try":r,"finally":r,"return":n,"break":n,"continue":n,"new":n,"delete":n,"throw":n,"debugger":n,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":a,"false":a,"null":a,undefined:a,NaN:a,Infinity:a,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),"yield":n,"export":e("export"),"import":e("import"),"extends":n};if(bt){var s={type:"variable",style:"variable-3"},l={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:s,number:s,bool:s,any:s};for(var u in l)o[u]=l[u]}return o}(),Ct=/[+\-*&%=<>!?|~^]/,Et=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,St="([{}])",Tt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Dt={state:null,column:null,marked:null,cc:null},Pt={name:"this",next:{name:"arguments"}};w.lex=!0;return{startState:function(e){var t={tokenize:a,lastType:"sof",cc:[],lexical:new c((e||0)-yt,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:0};r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars);return t},token:function(e,t){if(e.sol()){t.lexical.hasOwnProperty("align")||(t.lexical.align=!1);t.indented=e.indentation();u(e,t)}if(t.tokenize!=s&&e.eatSpace())return null;var r=t.tokenize(e,t);if("comment"==vt)return r;t.lastType="operator"!=vt||"++"!=gt&&"--"!=gt?vt:"incdec";return f(t,r,vt,gt,e)},indent:function(t,n){if(t.tokenize==s)return e.Pass;if(t.tokenize!=a)return 0;var i=n&&n.charAt(0),o=t.lexical;if(!/^\s*else\b/.test(n))for(var l=t.cc.length-1;l>=0;--l){var u=t.cc[l];if(u==w)o=o.prev;else if(u!=$)break}"stat"==o.type&&"}"==i&&(o=o.prev);mt&&")"==o.type&&"stat"==o.prev.type&&(o=o.prev);var c=o.type,d=i==c;return"vardef"==c?o.indented+("operator"==t.lastType||","==t.lastType?o.info+1:0):"form"==c&&"{"==i?o.indented:"form"==c?o.indented+yt:"stat"==c?o.indented+(ht(t,n)?mt||yt:0):"switch"!=o.info||d||0==r.doubleIndentSwitch?o.align?o.column+(d?0:1):o.indented+(d?0:yt):o.indented+(/^(?:case|default)\b/.test(n)?yt:2*yt)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:xt?null:"/*",blockCommentEnd:xt?null:"*/",lineComment:xt?null:"//",fold:"brace",helperType:xt?"json":"javascript",jsonldMode:wt,jsonMode:xt}});e.registerHelper("wordChars","javascript",/[\w$]/);e.defineMIME("text/javascript","javascript");e.defineMIME("text/ecmascript","javascript");e.defineMIME("application/javascript","javascript");e.defineMIME("application/x-javascript","javascript");e.defineMIME("application/ecmascript","javascript");e.defineMIME("application/json",{name:"javascript",json:!0});e.defineMIME("application/x-json",{name:"javascript",json:!0});e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});e.defineMIME("text/typescript",{name:"javascript",typescript:!0});e.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},{codemirror:void 0}],11:[function(t,r,n){(function(i){"object"==typeof n&&"object"==typeof r?i(function(){try{return t("codemirror")}catch(e){return window.CodeMirror}}()):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)})(function(e){"use strict";e.defineMode("xml",function(t,r){function n(e,t){function r(r){t.tokenize=r;return r(e,t)}var n=e.next();if("<"==n){if(e.eat("!")){if(e.eat("["))return e.match("CDATA[")?r(o("atom","]]>")):null;if(e.match("--"))return r(o("comment","-->"));if(e.match("DOCTYPE",!0,!0)){e.eatWhile(/[\w\._\-]/);return r(s(1))}return null}if(e.eat("?")){e.eatWhile(/[\w\._\-]/);t.tokenize=o("meta","?>");return"meta"}k=e.eat("/")?"closeTag":"openTag";t.tokenize=i;return"tag bracket"}if("&"==n){var a;a=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";");return a?"atom":"error"}e.eatWhile(/[^&<]/);return null}function i(e,t){var r=e.next();if(">"==r||"/"==r&&e.eat(">")){t.tokenize=n;k=">"==r?"endTag":"selfcloseTag";return"tag bracket"}if("="==r){k="equals";return null}if("<"==r){t.tokenize=n;t.state=d;t.tagName=t.tagStart=null;var i=t.tokenize(e,t);return i?i+" tag error":"tag error"}if(/[\'\"]/.test(r)){t.tokenize=a(r);t.stringStartCol=e.column();return t.tokenize(e,t)}e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}function a(e){var t=function(t,r){for(;!t.eol();)if(t.next()==e){r.tokenize=i;break}return"string"};t.isInAttribute=!0;return t}function o(e,t){return function(r,i){for(;!r.eol();){if(r.match(t)){i.tokenize=n;break}r.next()}return e}}function s(e){return function(t,r){for(var i;null!=(i=t.next());){if("<"==i){r.tokenize=s(e+1);return r.tokenize(t,r)}if(">"==i){if(1==e){r.tokenize=n;break}r.tokenize=s(e-1);return r.tokenize(t,r)}}return"meta"}}function l(e,t,r){this.prev=e.context;this.tagName=t;this.indent=e.indented;this.startOfLine=r;(E.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function u(e){e.context&&(e.context=e.context.prev)}function c(e,t){for(var r;;){if(!e.context)return;r=e.context.tagName;if(!E.contextGrabbers.hasOwnProperty(r)||!E.contextGrabbers[r].hasOwnProperty(t))return;u(e)}}function d(e,t,r){if("openTag"==e){r.tagStart=t.column();return f}return"closeTag"==e?p:d}function f(e,t,r){if("word"==e){r.tagName=t.current();C="tag";return g}C="error";return f}function p(e,t,r){if("word"==e){var n=t.current();r.context&&r.context.tagName!=n&&E.implicitlyClosed.hasOwnProperty(r.context.tagName)&&u(r);if(r.context&&r.context.tagName==n){C="tag";return h}C="tag error";return v}C="error";return v}function h(e,t,r){if("endTag"!=e){C="error";return h}u(r);return d}function v(e,t,r){C="error";return h(e,t,r)}function g(e,t,r){if("word"==e){C="attribute";return y}if("endTag"==e||"selfcloseTag"==e){var n=r.tagName,i=r.tagStart;r.tagName=r.tagStart=null;if("selfcloseTag"==e||E.autoSelfClosers.hasOwnProperty(n))c(r,n);else{c(r,n);r.context=new l(r,n,i==r.indented)}return d}C="error";return g}function y(e,t,r){if("equals"==e)return m;E.allowMissing||(C="error");return g(e,t,r)}function m(e,t,r){if("string"==e)return w;if("word"==e&&E.allowUnquoted){C="string";return g}C="error";return g(e,t,r)}function w(e,t,r){return"string"==e?w:g(e,t,r)}var x=t.indentUnit,b=r.multilineTagIndentFactor||1,_=r.multilineTagIndentPastTag;null==_&&(_=!0);var k,C,E=r.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},S=r.alignCDATA;return{startState:function(){return{tokenize:n,state:d,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){!t.tagName&&e.sol()&&(t.indented=e.indentation());if(e.eatSpace())return null;k=null;var r=t.tokenize(e,t);if((r||k)&&"comment"!=r){C=null;t.state=t.state(k||r,e,t);C&&(r="error"==C?r+" error":C)}return r},indent:function(t,r,a){var o=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+x;if(o&&o.noIndent)return e.Pass;if(t.tokenize!=i&&t.tokenize!=n)return a?a.match(/^(\s*)/)[0].length:0;if(t.tagName)return _?t.tagStart+t.tagName.length+2:t.tagStart+x*b;if(S&&/<!\[CDATA\[/.test(r))return 0;var s=r&&/^<(\/)?([\w_:\.-]*)/.exec(r);if(s&&s[1])for(;o;){if(o.tagName==s[2]){o=o.prev;break}if(!E.implicitlyClosed.hasOwnProperty(o.tagName))break;o=o.prev}else if(s)for(;o;){var l=E.contextGrabbers[o.tagName];if(!l||!l.hasOwnProperty(s[2]))break;o=o.prev}for(;o&&!o.startOfLine;)o=o.prev;return o?o.indent+x:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:r.htmlMode?"html":"xml",helperType:r.htmlMode?"html":"xml"}});e.defineMIME("text/xml","xml");e.defineMIME("application/xml","xml");e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})})},{codemirror:void 0}],12:[function(t,r){var n;(function(t){"use strict";var i=n=function(){return n.init.apply(n,arguments)};i.version="2.3.11";i.init=function(e){void 0===e&&(e={});return i.is.plainObject(e)?new i.Core(e):i.is.string(e)?i.extension.apply(i.extension,arguments):void 0};i.fn={};"undefined"!=typeof r&&r.exports&&(r.exports=n);"undefined"!=typeof e&&e.amd&&e("cytoscape",function(){return n});t&&(t.cytoscape=n)})("undefined"==typeof window?null:window);(function(e,t){"use strict";e.is={defined:function(e){return null!=e},string:function(e){return null!=e&&"string"==typeof e},fn:function(e){return null!=e&&"function"==typeof e},array:function(e){return Array.isArray?Array.isArray(e):null!=e&&e instanceof Array},plainObject:function(t){return null!=t&&typeof t==typeof{}&&!e.is.array(t)&&t.constructor===Object},number:function(e){return null!=e&&"number"==typeof e&&!isNaN(e)},integer:function(t){return e.is.number(t)&&Math.floor(t)===t},color:function(e){return null!=e&&"string"==typeof e&&""!==$.Color(e).toString()},bool:function(e){return null!=e&&typeof e==typeof!0},elementOrCollection:function(t){return e.is.element(t)||e.is.collection(t)},element:function(t){return t instanceof e.Element&&t._private.single},collection:function(t){return t instanceof e.Collection&&!t._private.single},core:function(t){return t instanceof e.Core},style:function(t){return t instanceof e.Style},stylesheet:function(t){return t instanceof e.Stylesheet},event:function(t){return t instanceof e.Event},emptyString:function(t){return t?e.is.string(t)&&(""===t||t.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(t){return t&&e.is.string(t)&&""!==t&&!t.match(/^\s+$/)?!0:!1},domElement:function(e){return"undefined"==typeof HTMLElement?!1:e instanceof HTMLElement},boundingBox:function(t){return e.is.plainObject(t)&&e.is.number(t.x1)&&e.is.number(t.x2)&&e.is.number(t.y1)&&e.is.number(t.y2)},touch:function(){return t&&("ontouchstart"in t||t.DocumentTouch&&document instanceof DocumentTouch)},gecko:function(){return"undefined"!=typeof InstallTrigger||"MozAppearance"in document.documentElement.style},webkit:function(){return"undefined"!=typeof webkitURL||"WebkitAppearance"in document.documentElement.style},chromium:function(){return"undefined"!=typeof chrome},khtml:function(){return navigator.vendor.match(/kde/i)},khtmlEtc:function(){return e.is.khtml()||e.is.webkit()||e.is.blink()},trident:function(){return"undefined"!=typeof ActiveXObject||!1},windows:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Win/i)},mac:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Mac/i)},linux:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Linux/i)},unix:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/X11/i)}}})(n,"undefined"==typeof window?null:window);(function(n,i){"use strict";n.util={extend:function(){var e,t,r,i,a,o,s=arguments[0]||{},l=1,u=arguments.length,c=!1;if("boolean"==typeof s){c=s;s=arguments[1]||{};l=2}"object"==typeof s||n.is.fn(s)||(s={});if(u===l){s=this;--l}for(;u>l;l++)if(null!=(e=arguments[l]))for(t in e){r=s[t];i=e[t];if(s!==i)if(c&&i&&(n.is.plainObject(i)||(a=n.is.array(i)))){if(a){a=!1;o=r&&n.is.array(r)?r:[]}else o=r&&n.is.plainObject(r)?r:{};s[t]=n.util.extend(c,o,i)}else void 0!==i&&(s[t]=i)}return s},require:function(a,o,s){var l;s=n.util.extend({msgIfNotFound:!0},s);var u=!1,c=function(e){u=!0;o(e)},d=function(e){i&&(l=i[a]);void 0!==l&&c(l);e&&e()},f=function(){u||p(h)},p=function(e){"undefined"!=typeof r&&r.exports&&t&&(l=t(a));void 0!==l&&c(l);e&&e()},h=function(){u||v(g)},v=function(r){"undefined"!=typeof e&&e.amd&&t&&t([a],function(e){l=e;void 0!==l&&c(l);r&&r()})},g=function(){!u&&s.msgIfNotFound&&n.util.error("Cytoscape.js tried to pull in dependency `"+a+"` but no module (i.e. CommonJS, AMD, or window) was found")};d(f)},requires:function(e,t){for(var r=[],i=[],a=function(){for(var n=0;n<e.length;n++)if(!i[n])return;t.apply(t,r)},o=0;o<e.length;o++)(function(){var t=e[o],s=o;n.util.require(t,function(e){r[s]=e;i[s]=!0;a()})})()},throttle:function(e,t,r){var i=!0,a=!0;if(r===!1)i=!1;else if(n.is.plainObject(r)){i="leading"in r?r.leading:i;a="trailing"in r?r.trailing:a}r=r||{};r.leading=i;r.maxWait=t;r.trailing=a;return n.util.debounce(e,t,r)},now:function(){return+new Date},debounce:function(e,t,r){var i,a,o,s,l,u,c,d=0,f=!1,p=!0;if(n.is.fn(e)){t=Math.max(0,t)||0;if(r===!0){var h=!0;p=!1}else if(n.is.plainObject(r)){h=r.leading;f="maxWait"in r&&(Math.max(t,r.maxWait)||0);p="trailing"in r?r.trailing:p}var v=function(){var r=t-(n.util.now()-s);if(0>=r){a&&clearTimeout(a);var f=c;a=u=c=void 0;if(f){d=n.util.now();o=e.apply(l,i);u||a||(i=l=null)}}else u=setTimeout(v,r)},g=function(){u&&clearTimeout(u);a=u=c=void 0;if(p||f!==t){d=n.util.now();o=e.apply(l,i);u||a||(i=l=null)}};return function(){i=arguments;s=n.util.now();l=this;c=p&&(u||!h);if(f===!1)var r=h&&!u;else{a||h||(d=s);var y=f-(s-d),m=0>=y;if(m){a&&(a=clearTimeout(a));d=s;o=e.apply(l,i)}else a||(a=setTimeout(g,y))}m&&u?u=clearTimeout(u):u||t===f||(u=setTimeout(v,t));if(r){m=!0;o=e.apply(l,i)}!m||u||a||(i=l=null);return o}}},error:function(e){if(!console)throw e;if(console.error)console.error.apply(console,arguments);else{if(!console.log)throw e;console.log.apply(console,arguments)}},clone:function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},copy:function(e){return null==e?e:n.is.array(e)?e.slice():n.is.plainObject(e)?n.util.clone(e):e},makeBoundingBox:function(e){if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},mapEmpty:function(e){var t=!0;if(null!=e)for(var r in e){t=!1;break}return t},pushMap:function(e){var t=n.util.getMap(e);null==t?n.util.setMap($.extend({},e,{value:[e.value]})):t.push(e.value)},setMap:function(e){for(var t,r=e.map,i=e.keys,a=i.length,o=0;a>o;o++){var t=i[o];n.is.plainObject(t)&&n.util.error("Tried to set map with object key");if(o<i.length-1){null==r[t]&&(r[t]={});r=r[t]}else r[t]=e.value}},getMap:function(e){for(var t=e.map,r=e.keys,i=r.length,a=0;i>a;a++){var o=r[a];n.is.plainObject(o)&&n.util.error("Tried to get map with object key");t=t[o];if(null==t)return t}return t},deleteMap:function(e){for(var t=e.map,r=e.keys,i=r.length,a=e.keepChildren,o=0;i>o;o++){var s=r[o];n.is.plainObject(s)&&n.util.error("Tried to delete map with object key");var l=o===e.keys.length-1;if(l)if(a)for(var u in t)a[u]||(t[u]=void 0);else t[s]=void 0;else t=t[s]}},capitalize:function(e){return n.is.emptyString(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},camel2dash:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],i=n.toLowerCase(),a=n!==i;if(a){t.push("-");t.push(i)}else t.push(n)}var o=t.length===e.length;return o?e:t.join("")},dash2camel:function(e){for(var t=[],r=!1,n=0;n<e.length;n++){var i=e[n],a="-"===i;if(a)r=!0;else{t.push(r?i.toUpperCase():i);r=!1}}return t.join("")},trim:function(e){var t,r;for(t=0;t<e.length&&" "===e[t];t++);for(r=e.length-1;r>t&&" "===e[r];r--);return e.substring(t,r+1)},hex2tuple:function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,r,n,i=4===e.length,a=16;if(i){t=parseInt(e[1]+e[1],a);r=parseInt(e[2]+e[2],a);n=parseInt(e[3]+e[3],a)}else{t=parseInt(e[1]+e[2],a);r=parseInt(e[3]+e[4],a);n=parseInt(e[5]+e[6],a)}return[t,r,n]}},hsl2tuple:function(e){function t(e,t,r){0>r&&(r+=1);r>1&&(r-=1);return 1/6>r?e+6*(t-e)*r:.5>r?t:2/3>r?e+(t-e)*(2/3-r)*6:e}var r,i,a,o,s,l,u,c,d=new RegExp("^"+n.util.regex.hsla+"$").exec(e);if(d){i=parseInt(d[1]);0>i?i=(360- -1*i%360)%360:i>360&&(i%=360);i/=360;a=parseFloat(d[2]);if(0>a||a>100)return;a/=100;o=parseFloat(d[3]);if(0>o||o>100)return;o/=100;s=d[4];if(void 0!==s){s=parseFloat(s);if(0>s||s>1)return}if(0===a)l=u=c=Math.round(255*o);else{var f=.5>o?o*(1+a):o+a-o*a,p=2*o-f;l=Math.round(255*t(p,f,i+1/3));u=Math.round(255*t(p,f,i));c=Math.round(255*t(p,f,i-1/3))}r=[l,u,c,s]}return r},rgb2tuple:function(e){var t,r=new RegExp("^"+n.util.regex.rgba+"$").exec(e);if(r){t=[];for(var i=[],a=1;3>=a;a++){var o=r[a];"%"===o[o.length-1]&&(i[a]=!0);o=parseFloat(o);i[a]&&(o=o/100*255);if(0>o||o>255)return;t.push(Math.floor(o))}var s=i[1]||i[2]||i[3],l=i[1]&&i[2]&&i[3];if(s&&!l)return;var u=r[4];if(void 0!==u){u=parseFloat(u);if(0>u||u>1)return;t.push(u)}}return t},colorname2tuple:function(e){return n.util.colors[e.toLowerCase()]},color2tuple:function(e){return(n.is.array(e)?e:null)||n.util.colorname2tuple(e)||n.util.hex2tuple(e)||n.util.rgb2tuple(e)||n.util.hsl2tuple(e)},tuple2hex:function(e){function t(e){var t=e.toString(16);1===t.length&&(t="0"+t);return t}var r=e[0],n=e[1],i=e[2];return"#"+t(r)+t(n)+t(i)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}};n.util.regex={};n.util.regex.number="(?:[-]?\\d*\\.\\d+|[-]?\\d+|[-]?\\d*\\.\\d+[eE]\\d+)";n.util.regex.rgba="rgb[a]?\\(("+n.util.regex.number+"[%]?)\\s*,\\s*("+n.util.regex.number+"[%]?)\\s*,\\s*("+n.util.regex.number+"[%]?)(?:\\s*,\\s*("+n.util.regex.number+"))?\\)";n.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+n.util.regex.number+"[%]?)\\s*,\\s*(?:"+n.util.regex.number+"[%]?)\\s*,\\s*(?:"+n.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+n.util.regex.number+"))?\\)";n.util.regex.hsla="hsl[a]?\\(("+n.util.regex.number+")\\s*,\\s*("+n.util.regex.number+"[%])\\s*,\\s*("+n.util.regex.number+"[%])(?:\\s*,\\s*("+n.util.regex.number+"))?\\)";n.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+n.util.regex.number+")\\s*,\\s*(?:"+n.util.regex.number+"[%])\\s*,\\s*(?:"+n.util.regex.number+"[%])(?:\\s*,\\s*(?:"+n.util.regex.number+"))?\\)";n.util.regex.hex3="\\#[0-9a-fA-F]{3}";n.util.regex.hex6="\\#[0-9a-fA-F]{6}";var a=i?i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||i.msRequestAnimationFrame:null;a=a||function(e){e&&setTimeout(e,1e3/60)};n.util.requestAnimationFrame=function(e){a(e)}})(n,"undefined"==typeof window?null:window);(function(e){"use strict";e.math={};e.math.signum=function(e){return e>0?1:0>e?-1:0};e.math.distance=function(e,t){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)};e.math.qbezierAt=function(e,t,r,n){return(1-n)*(1-n)*e+2*(1-n)*n*t+n*n*r};e.math.qbezierPtAt=function(t,r,n,i){return{x:e.math.qbezierAt(t.x,r.x,n.x,i),y:e.math.qbezierAt(t.y,r.y,n.y,i)}};e.math.boundingBoxesIntersect=function(e,t){return e.x1>t.x2?!1:t.x1>e.x2?!1:e.x2<t.x1?!1:t.x2<e.x1?!1:e.y2<t.y1?!1:t.y2<e.y1?!1:e.y1>t.y2?!1:t.y1>e.y2?!1:!0};e.math.inBoundingBox=function(e,t,r){return e.x1<=t&&t<=e.x2&&e.y1<=r&&r<=e.y2};e.math.pointInBoundingBox=function(e,t){return this.inBoundingBox(e,t.x,t.y)};e.math.roundRectangleIntersectLine=function(e,t,r,n,i,a,o){var s,l=this.getRoundRectangleRadius(i,a),u=i/2,c=a/2,d=r-u+l-o,f=n-c-o,p=r+u-l+o,h=f;s=this.finiteLinesIntersect(e,t,r,n,d,f,p,h,!1);if(s.length>0)return s;var v=r+u+o,g=n-c+l-o,y=v,m=n+c-l+o;s=this.finiteLinesIntersect(e,t,r,n,v,g,y,m,!1);if(s.length>0)return s;var w=r-u+l-o,x=n+c+o,b=r+u-l+o,_=x;s=this.finiteLinesIntersect(e,t,r,n,w,x,b,_,!1);if(s.length>0)return s;var k=r-u-o,C=n-c+l-o,E=k,S=n+c-l+o;s=this.finiteLinesIntersect(e,t,r,n,k,C,E,S,!1);if(s.length>0)return s;var T,D=r-u+l,P=n-c+l;T=this.intersectLineCircle(e,t,r,n,D,P,l+o);if(T.length>0&&T[0]<=D&&T[1]<=P)return[T[0],T[1]];var N=r+u-l,M=n-c+l;T=this.intersectLineCircle(e,t,r,n,N,M,l+o);if(T.length>0&&T[0]>=N&&T[1]<=M)return[T[0],T[1]];var j=r+u-l,L=n+c-l;T=this.intersectLineCircle(e,t,r,n,j,L,l+o);if(T.length>0&&T[0]>=j&&T[1]>=L)return[T[0],T[1]];var I=r-u+l,R=n+c-l;T=this.intersectLineCircle(e,t,r,n,I,R,l+o);return T.length>0&&T[0]<=I&&T[1]>=R?[T[0],T[1]]:[]};e.math.roundRectangleIntersectBox=function(e,t,r,n,i,a,o,s,l){var u=this.getRoundRectangleRadius(i,a),c=o-i/2-l,d=s-a/2+u-l,f=o+i/2+l,p=s+a/2-u+l,h=o-i/2+u-l,v=s-a/2-l,g=o+i/2-u+l,y=s+a/2+l,m=Math.min(e,r),w=Math.max(e,r),x=Math.min(t,n),b=Math.max(t,n);return c>w?!1:m>f?!1:v>b?!1:x>y?!1:c>=m&&w>=c&&d>=x&&b>=d?!0:f>=m&&w>=f&&d>=x&&b>=d?!0:f>=m&&w>=f&&p>=x&&b>=p?!0:c>=m&&w>=c&&p>=x&&b>=p?!0:m>=c&&f>=m&&x>=d&&p>=x?!0:w>=c&&f>=w&&x>=d&&p>=x?!0:w>=c&&f>=w&&b>=d&&p>=b?!0:m>=c&&f>=m&&b>=d&&p>=b?!0:h>=m&&w>=h&&v>=x&&b>=v?!0:g>=m&&w>=g&&v>=x&&b>=v?!0:g>=m&&w>=g&&y>=x&&b>=y?!0:h>=m&&w>=h&&y>=x&&b>=y?!0:m>=h&&g>=m&&x>=v&&y>=x?!0:w>=h&&g>=w&&x>=v&&y>=x?!0:w>=h&&g>=w&&b>=v&&y>=b?!0:m>=h&&g>=m&&b>=v&&y>=b?!0:this.boxIntersectEllipse(m,x,w,b,l,2*u,2*u,h+l,d+l)?!0:this.boxIntersectEllipse(m,x,w,b,l,2*u,2*u,g-l,d+l)?!0:this.boxIntersectEllipse(m,x,w,b,l,2*u,2*u,g-l,p-l)?!0:this.boxIntersectEllipse(m,x,w,b,l,2*u,2*u,h+l,p-l)?!0:!1};e.math.checkInBoundingCircle=function(e,t,r,n,i,a,o,s){e=(e-o)/(i+n);t=(t-s)/(a+n);return r>=e*e+t*t};e.math.boxInBezierVicinity=function(e,t,r,n,i,a,o,s,l,u,c){var d=.25*i+.5*o+.25*l,f=.25*a+.5*s+.25*u,p=Math.min(e,r)-c,h=Math.min(t,n)-c,v=Math.max(e,r)+c,g=Math.max(t,n)+c;if(i>=p&&v>=i&&a>=h&&g>=a)return 1;if(l>=p&&v>=l&&u>=h&&g>=u)return 1;if(d>=p&&v>=d&&f>=h&&g>=f)return 1;if(o>=p&&v>=o&&s>=h&&g>=s)return 1;var y=Math.min(i,d,l),m=Math.min(a,f,u),w=Math.max(i,d,l),x=Math.max(a,f,u);return y>v||p>w||m>g||h>x?0:1};e.math.checkBezierInBox=function(t,r,n,i,a,o,s,l,u,c){function d(d){var f=e.math.qbezierAt(a,s,u,d),p=e.math.qbezierAt(o,l,c,d);return f>=t&&n>=f&&p>=r&&i>=p}for(var f=0;1>=f;f+=.25)if(!d(f))return!1;return!0};e.math.checkStraightEdgeInBox=function(e,t,r,n,i,a,o,s){return i>=e&&r>=i&&o>=e&&r>=o&&a>=t&&n>=a&&s>=t&&n>=s};e.math.checkStraightEdgeCrossesBox=function(e,t,r,n,i,a,o,s,l){var u,c,d=Math.min(e,r)-l,f=Math.min(t,n)-l,p=Math.max(e,r)+l,h=Math.max(t,n)+l,v=o-i,g=i,y=s-a,m=a;if(Math.abs(v)<1e-4)return i>=d&&p>=i&&Math.min(a,s)<=f&&Math.max(a,s)>=h;var w=(d-g)/v;if(w>0&&1>=w){u=y*w+m;if(u>=f&&h>=u)return!0}var x=(p-g)/v;if(x>0&&1>=x){u=y*x+m;if(u>=f&&h>=u)return!0}var b=(f-m)/y;if(b>0&&1>=b){c=v*b+g;if(c>=d&&p>=c)return!0}var _=(h-m)/y;if(_>0&&1>=_){c=v*_+g;if(c>=d&&p>=c)return!0}return!1};e.math.checkBezierCrossesBox=function(e,t,r,n,i,a,o,s,l,u,c){var d=Math.min(e,r)-c,f=Math.min(t,n)-c,p=Math.max(e,r)+c,h=Math.max(t,n)+c;
if(i>=d&&p>=i&&a>=f&&h>=a)return!0;if(l>=d&&p>=l&&u>=f&&h>=u)return!0;var v=i-2*o+l,g=-2*i+2*o,y=i,m=[];if(Math.abs(v)<1e-4){var w=(d-i)/g,x=(p-i)/g;m.push(w,x)}else{var b,_,k=g*g-4*v*(y-d);if(k>0){var C=Math.sqrt(k);b=(-g+C)/(2*v);_=(-g-C)/(2*v);m.push(b,_)}var E,S,T=g*g-4*v*(y-p);if(T>0){var C=Math.sqrt(T);E=(-g+C)/(2*v);S=(-g-C)/(2*v);m.push(E,S)}}m.sort(function(e,t){return e-t});var D=a-2*s+u,P=-2*a+2*s,N=a,M=[];if(Math.abs(D)<1e-4){var j=(f-a)/P,L=(h-a)/P;M.push(j,L)}else{var I,R,A=P*P-4*D*(N-f);if(A>0){var C=Math.sqrt(A);I=(-P+C)/(2*D);R=(-P-C)/(2*D);M.push(I,R)}var O,z,B=P*P-4*D*(N-h);if(B>0){var C=Math.sqrt(B);O=(-P+C)/(2*D);z=(-P-C)/(2*D);M.push(O,z)}}M.sort(function(e,t){return e-t});for(var V=0;V<m.length;V+=2)for(var q=1;q<M.length;q+=2)if(m[V]<M[q]&&M[q]>=0&&m[V]<=1&&m[V+1]>M[q-1]&&M[q-1]<=1&&m[V+1]>=0)return!0;return!1};e.math.inLineVicinity=function(e,t,r,n,i,a,o){var s=o,l=Math.min(r,i),u=Math.max(r,i),c=Math.min(n,a),d=Math.max(n,a);return e>=l-s&&u+s>=e&&t>=c-s&&d+s>=t};e.math.inBezierVicinity=function(e,t,r,n,i,a,o,s){var l={x1:Math.min(r,o,i),x2:Math.max(r,o,i),y1:Math.min(n,s,a),y2:Math.max(n,s,a)};return e<l.x1||e>l.x2||t<l.y1||t>l.y2?!1:!0};e.math.solveCubic=function(e,t,r,n,i){t/=e;r/=e;n/=e;var a,o,s,l,u,c,d,f;o=(3*r-t*t)/9;s=-(27*n)+t*(9*r-2*t*t);s/=54;a=o*o*o+s*s;i[1]=0;d=t/3;if(a>0){u=s+Math.sqrt(a);u=0>u?-Math.pow(-u,1/3):Math.pow(u,1/3);c=s-Math.sqrt(a);c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3);i[0]=-d+u+c;d+=(u+c)/2;i[4]=i[2]=-d;d=Math.sqrt(3)*(-c+u)/2;i[3]=d;i[5]=-d}else{i[5]=i[3]=0;if(0!==a){o=-o;l=o*o*o;l=Math.acos(s/Math.sqrt(l));f=2*Math.sqrt(o);i[0]=-d+f*Math.cos(l/3);i[2]=-d+f*Math.cos((l+2*Math.PI)/3);i[4]=-d+f*Math.cos((l+4*Math.PI)/3)}else{f=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3);i[0]=-d+2*f;i[4]=i[2]=-(f+d)}}};e.math.sqDistanceToQuadraticBezier=function(e,t,r,n,i,a,o,s){var l=1*r*r-4*r*i+2*r*o+4*i*i-4*i*o+o*o+n*n-4*n*a+2*n*s+4*a*a-4*a*s+s*s,u=9*r*i-3*r*r-3*r*o-6*i*i+3*i*o+9*n*a-3*n*n-3*n*s-6*a*a+3*a*s,c=3*r*r-6*r*i+r*o-r*e+2*i*i+2*i*e-o*e+3*n*n-6*n*a+n*s-n*t+2*a*a+2*a*t-s*t,d=1*r*i-r*r+r*e-i*e+n*a-n*n+n*t-a*t,f=[];this.solveCubic(l,u,c,d,f);for(var p=1e-7,h=[],v=0;6>v;v+=2)Math.abs(f[v+1])<p&&f[v]>=0&&f[v]<=1&&h.push(f[v]);h.push(1);h.push(0);for(var g,y,m,w,x=-1,b=0;b<h.length;b++){y=Math.pow(1-h[b],2)*r+2*(1-h[b])*h[b]*i+h[b]*h[b]*o;m=Math.pow(1-h[b],2)*n+2*(1-h[b])*h[b]*a+h[b]*h[b]*s;w=Math.pow(y-e,2)+Math.pow(m-t,2);if(x>=0){if(x>w){x=w;g=h[b]}}else{x=w;g=h[b]}}return x};e.math.sqDistanceToFiniteLine=function(e,t,r,n,i,a){var o=[e-r,t-n],s=[i-r,a-n],l=s[0]*s[0]+s[1]*s[1],u=o[0]*o[0]+o[1]*o[1],c=o[0]*s[0]+o[1]*s[1],d=c*c/l;return 0>c?u:d>l?(e-i)*(e-i)+(t-a)*(t-a):u-d};e.math.pointInsidePolygon=function(e,t,r,n,i,a,o,s,l){var u=new Array(r.length),c=Math.asin(s[1]/Math.sqrt(s[0]*s[0]+s[1]*s[1]));s[0]<0?c+=Math.PI/2:c=-c-Math.PI/2;for(var d=Math.cos(-c),f=Math.sin(-c),p=0;p<u.length/2;p++){u[2*p]=a/2*(r[2*p]*d-r[2*p+1]*f);u[2*p+1]=o/2*(r[2*p+1]*d+r[2*p]*f);u[2*p]+=n;u[2*p+1]+=i}var h;if(l>0){var v=this.expandPolygon(u,-l);h=this.joinLines(v)}else h=u;for(var g,y,m,w,x,b=0,_=0,p=0;p<h.length/2;p++){g=h[2*p];y=h[2*p+1];if(p+1<h.length/2){m=h[2*(p+1)];w=h[2*(p+1)+1]}else{m=h[2*(p+1-h.length/2)];w=h[2*(p+1-h.length/2)+1]}if(g==e&&m==e);else{if(!(g>=e&&e>=m||e>=g&&m>=e))continue;x=(e-g)/(m-g)*(w-y)+y;x>t&&b++;t>x&&_++}}return b%2===0?!1:!0};e.math.joinLines=function(e){for(var t,r,n,i,a,o,s,l,u=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c];r=e[4*c+1];n=e[4*c+2];i=e[4*c+3];if(c<e.length/4-1){a=e[4*(c+1)];o=e[4*(c+1)+1];s=e[4*(c+1)+2];l=e[4*(c+1)+3]}else{a=e[0];o=e[1];s=e[2];l=e[3]}var d=this.finiteLinesIntersect(t,r,n,i,a,o,s,l,!0);u[2*c]=d[0];u[2*c+1]=d[1]}return u};e.math.expandPolygon=function(e,t){for(var r,n,i,a,o=new Array(2*e.length),s=0;s<e.length/2;s++){r=e[2*s];n=e[2*s+1];if(s<e.length/2-1){i=e[2*(s+1)];a=e[2*(s+1)+1]}else{i=e[0];a=e[1]}var l=a-n,u=-(i-r),c=Math.sqrt(l*l+u*u),d=l/c,f=u/c;o[4*s]=r+d*t;o[4*s+1]=n+f*t;o[4*s+2]=i+d*t;o[4*s+3]=a+f*t}return o};e.math.intersectLineEllipse=function(e,t,r,n,i,a){var o=r-e,s=n-t;o/=i;s/=a;var l=Math.sqrt(o*o+s*s),u=l-1;if(0>u)return[];var c=u/l;return[(r-e)*c+e,(n-t)*c+t]};e.math.dotProduct=function(e,t){if(2!=e.length||2!=t.length)throw"dot product: arguments are not vectors";return e[0]*t[0]+e[1]*t[1]};e.math.intersectLineCircle=function(e,t,r,n,i,a,o){var s=[r-e,n-t],l=[i,a],u=[e-i,t-a],c=s[0]*s[0]+s[1]*s[1],d=2*(u[0]*s[0]+u[1]*s[1]),l=u[0]*u[0]+u[1]*u[1]-o*o,f=d*d-4*c*l;if(0>f)return[];var p=(-d+Math.sqrt(f))/(2*c),h=(-d-Math.sqrt(f))/(2*c),v=Math.min(p,h),g=Math.max(p,h),y=[];v>=0&&1>=v&&y.push(v);g>=0&&1>=g&&y.push(g);if(0===y.length)return[];var m=y[0]*s[0]+e,w=y[0]*s[1]+t;if(y.length>1){if(y[0]==y[1])return[m,w];var x=y[1]*s[0]+e,b=y[1]*s[1]+t;return[m,w,x,b]}return[m,w]};e.math.findCircleNearPoint=function(e,t,r,n,i){var a=n-e,o=i-t,s=Math.sqrt(a*a+o*o),l=a/s,u=o/s;return[e+l*r,t+u*r]};e.math.findMaxSqDistanceToOrigin=function(e){for(var t,r=1e-6,n=0;n<e.length/2;n++){t=e[2*n]*e[2*n]+e[2*n+1]*e[2*n+1];t>r&&(r=t)}return r};e.math.finiteLinesIntersect=function(e,t,r,n,i,a,o,s,l){var u=(o-i)*(t-a)-(s-a)*(e-i),c=(r-e)*(t-a)-(n-t)*(e-i),d=(s-a)*(r-e)-(o-i)*(n-t);if(0!==d){var f=u/d,p=c/d;return f>=0&&1>=f&&p>=0&&1>=p?[e+f*(r-e),t+f*(n-t)]:l?[e+f*(r-e),t+f*(n-t)]:[]}return 0===u||0===c?[e,r,o].sort()[1]===o?[o,s]:[e,r,i].sort()[1]===i?[i,a]:[i,o,r].sort()[1]===r?[r,n]:[]:[]};e.math.boxIntersectEllipse=function(e,t,r,n,i,a,o,s,l){if(e>r){var u=e;e=r;r=u}if(t>n){var c=t;t=n;n=c}var d=[s-a/2-i,l],f=[s+a/2+i,l],p=[s,l-o/2-i],h=[s,l+o/2+i];if(r<d[0])return!1;if(e>f[0])return!1;if(t>h[1])return!1;if(n<p[1])return!1;if(e<=f[0]&&f[0]<=r&&t<=f[1]&&f[1]<=n)return!0;if(e<=d[0]&&d[0]<=r&&t<=d[1]&&d[1]<=n)return!0;if(e<=p[0]&&p[0]<=r&&t<=p[1]&&p[1]<=n)return!0;if(e<=h[0]&&h[0]<=r&&t<=h[1]&&h[1]<=n)return!0;e=(e-s)/(a/2+i);r=(r-s)/(a/2+i);t=(t-l)/(o/2+i);n=(n-l)/(o/2+i);return 1>=e*e+t*t?!0:1>=r*r+t*t?!0:1>=r*r+n*n?!0:1>=e*e+n*n?!0:!1};e.math.boxIntersectPolygon=function(t,r,n,i,a,o,s,l,u,c,d){if(t>n){var f=t;t=n;n=f}if(r>i){var p=r;r=i;i=p}var h=new Array(a.length),v=Math.asin(c[1]/Math.sqrt(c[0]*c[0]+c[1]*c[1]));c[0]<0?v+=Math.PI/2:v=-v-Math.PI/2;for(var g=Math.cos(-v),y=Math.sin(-v),m=0;m<h.length/2;m++){h[2*m]=o/2*(a[2*m]*g-a[2*m+1]*y);h[2*m+1]=s/2*(a[2*m+1]*g+a[2*m]*y);h[2*m]+=l;h[2*m+1]+=u}for(var w=h[0],x=h[0],b=h[1],_=h[1],m=1;m<h.length/2;m++){h[2*m]>x&&(x=h[2*m]);h[2*m]<w&&(w=h[2*m]);h[2*m+1]>_&&(_=h[2*m+1]);h[2*m+1]<b&&(b=h[2*m+1])}if(w-d>n)return!1;if(t>x+d)return!1;if(b-d>i)return!1;if(r>_+d)return!1;var k;if(d>0){var C=e.math.expandPolygon(h,-d);k=e.math.joinLines(C)}else k=h;for(var m=0;m<h.length/2;m++)if(t<=h[2*m]&&h[2*m]<=n&&r<=h[2*m+1]&&h[2*m+1]<=i)return!0;for(var m=0;m<k.length/2;m++){var E,S,T=k[2*m],D=k[2*m+1];if(m<k.length/2-1){E=k[2*(m+1)];S=k[2*(m+1)+1]}else{E=k[0];S=k[1]}if(e.math.finiteLinesIntersect(T,D,E,S,t,r,n,r,!1).length>0)return!0;if(e.math.finiteLinesIntersect(T,D,E,S,t,i,n,i,!1).length>0)return!0;if(e.math.finiteLinesIntersect(T,D,E,S,t,r,t,i,!1).length>0)return!0;if(e.math.finiteLinesIntersect(T,D,E,S,n,r,n,i,!1).length>0)return!0}return!1};e.math.polygonIntersectLine=function(t,r,n,i,a,o,s,l){for(var u,c=[],d=new Array(n.length),f=0;f<d.length/2;f++){d[2*f]=n[2*f]*o+i;d[2*f+1]=n[2*f+1]*s+a}var p;if(l>0){var h=e.math.expandPolygon(d,-l);p=e.math.joinLines(h)}else p=d;for(var v,g,y,m,f=0;f<p.length/2;f++){v=p[2*f];g=p[2*f+1];if(f<p.length/2-1){y=p[2*(f+1)];m=p[2*(f+1)+1]}else{y=p[0];m=p[1]}u=this.finiteLinesIntersect(t,r,i,a,v,g,y,m);0!==u.length&&c.push(u[0],u[1])}return c};e.math.shortenIntersection=function(e,t,r){var n=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=(i-r)/i;0>a&&(a=1e-5);return[t[0]+a*n[0],t[1]+a*n[1]]};e.math.generateUnitNgonPointsFitToSquare=function(t,r){var n=e.math.generateUnitNgonPoints(t,r);n=e.math.fitPolygonToSquare(n);return n};e.math.fitPolygonToSquare=function(e){for(var t,r,n=e.length/2,i=1/0,a=1/0,o=-1/0,s=-1/0,l=0;n>l;l++){t=e[2*l];r=e[2*l+1];i=Math.min(i,t);o=Math.max(o,t);a=Math.min(a,r);s=Math.max(s,r)}for(var u=2/(o-i),c=2/(s-a),l=0;n>l;l++){t=e[2*l]=e[2*l]*u;r=e[2*l+1]=e[2*l+1]*c;i=Math.min(i,t);o=Math.max(o,t);a=Math.min(a,r);s=Math.max(s,r)}if(-1>a)for(var l=0;n>l;l++)r=e[2*l+1]=e[2*l+1]+(-1-a);return e};e.math.generateUnitNgonPoints=function(e,t){var r=1/e*2*Math.PI,n=e%2===0?Math.PI/2+r/2:Math.PI/2;n+=t;for(var i,a,o,s=new Array(2*e),l=0;e>l;l++){i=l*r+n;a=s[2*l]=Math.cos(i);o=s[2*l+1]=Math.sin(-i)}return s};e.math.getRoundRectangleRadius=function(e,t){return Math.min(e/4,t/4,8)}})(n);(function(e){"use strict";function t(t,r,n){var i={};i[r]=n;switch(t){case"core":case"collection":e.fn[t](i)}if("layout"===t){for(var o=n.prototype,s=["stop"],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){this.start();return this}:!o.start&&o.run&&(o.start=function(){this.run();return this});o.on=e.define.on({layout:!0});o.one=e.define.on({layout:!0,unbindSelfOnTrigger:!0});o.once=e.define.on({layout:!0,unbindAllBindersOnTrigger:!0});o.off=e.define.off({layout:!0});o.trigger=e.define.trigger({layout:!0});o.bind=o.on;o.unbind=o.off}return e.util.setMap({map:a,keys:[t,r],value:n})}function r(t,r){return e.util.getMap({map:a,keys:[t,r]})}function n(t,r,n,i,a){return e.util.setMap({map:o,keys:[t,r,n,i],value:a})}function i(t,r,n,i){return e.util.getMap({map:o,keys:[t,r,n,i]})}var a={};e.extensions=a;var o={};e.modules=o;e.extension=function(){if(2==arguments.length)return r.apply(this,arguments);if(3==arguments.length)return t.apply(this,arguments);if(4==arguments.length)return i.apply(this,arguments);if(5==arguments.length)return n.apply(this,arguments);e.util.error("Invalid extension access syntax");return void 0}})(n);(function(e,t){"use strict";if(e){var r=function(e){var t=e[0]._cyreg=e[0]._cyreg||{};return t};e.fn.cytoscape=function(i){var a=e(this);if("get"===i)return r(a).cy;if(t.is.fn(i)){var o=i,s=r(a).cy;if(s&&s.isReady())s.trigger("ready",[],o);else{var l=r(a),u=l.readies=l.readies||[];u.push(o)}}else if(t.is.plainObject(i))return a.each(function(){var t=e.extend({},i,{container:e(this)[0]});n(t)})};e.cytoscape=n;if(null==e.fn.cy&&null==e.cy){e.fn.cy=e.fn.cytoscape;e.cy=e.cytoscape}}})("undefined"!=typeof jQuery?jQuery:null,n);(function(e){"use strict";function t(){return!1}function r(){return!0}e.Event=function(n,i){if(!(this instanceof e.Event))return new e.Event(n,i);if(n&&n.type){this.originalEvent=n;this.type=n.type;this.isDefaultPrevented=n.defaultPrevented?r:t}else this.type=n;if(i){this.type=void 0!==i.type?i.type:this.type;this.cy=i.cy;this.cyTarget=i.cyTarget;this.cyPosition=i.cyPosition;this.cyRenderedPosition=i.cyRenderedPosition;this.namespace=i.namespace;this.layout=i.layout;this.data=i.data}this.timeStamp=n&&n.timeStamp||+new Date};e.Event.prototype={preventDefault:function(){this.isDefaultPrevented=r;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=r;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r;this.stopPropagation()},isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t}})(n);(function(e){"use strict";e.define={data:function(t){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(){},canSet:function(){return!0}};t=e.util.extend({},r,t);return function(r,n){var i=t,a=this,o=void 0!==a.length,s=o?a:[a],l=o?a[0]:a;if(e.is.string(r)){if(i.allowGetting&&void 0===n){var u;l&&(u=l._private[i.field][r]);return u}if(i.allowSetting&&void 0!==n){var c=!i.immutableKeys[r];if(c){for(var d=0,f=s.length;f>d;d++)i.canSet(s[d])&&(s[d]._private[i.field][r]=n);i.updateStyle&&a.updateStyle();i.onSet(a);i.settingTriggersEvent&&a[i.triggerFnName](i.settingEvent)}}}else if(i.allowSetting&&e.is.plainObject(r)){var p,h,v=r;for(p in v){h=v[p];var c=!i.immutableKeys[p];if(c)for(var d=0,f=s.length;f>d;d++)i.canSet(s[d])&&(s[d]._private[i.field][p]=h)}i.updateStyle&&a.updateStyle();i.onSet(a);i.settingTriggersEvent&&a[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&e.is.fn(r)){var g=r;a.bind(i.bindingEvent,g)}else if(i.allowGetting&&void 0===r){var u;l&&(u=l._private[i.field]);return u}return a}},removeData:function(t){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};t=e.util.extend({},r,t);return function(r){var n=t,i=this,a=void 0!==i.length,o=a?i:[i];if(e.is.string(r)){for(var s=r.split(/\s+/),l=s.length,u=0;l>u;u++){var c=s[u];if(!e.is.emptyString(c)){var d=!n.immutableKeys[c];if(d)for(var f=0,p=o.length;p>f;f++)o[f]._private[n.field][c]=void 0}}n.triggerEvent&&i[n.triggerFnName](n.event)}else if(void 0===r){for(var f=0,p=o.length;p>f;f++){var h=o[f]._private[n.field];for(var c in h){var v=!n.immutableKeys[c];v&&(h[c]=void 0)}}n.triggerEvent&&i[n.triggerFnName](n.event)}return i}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return!1}},on:function(t){var r={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};t=e.util.extend({},r,t);return function(r,n,i,a){var o=this,s=void 0!==o.length,l=s?o:[o],u=e.is.string(r),c=t;if(e.is.plainObject(n)){a=i;i=n;n=void 0}else if(e.is.fn(n)||n===!1){a=n;i=void 0;n=void 0}if(e.is.fn(i)||i===!1){a=i;i=void 0}if(!e.is.fn(a)&&a!==!1&&u)return o;if(u){var d={};d[r]=a;r=d}for(var f in r){a=r[f];a===!1&&(a=e.define.event.falseCallback);if(e.is.fn(a)){f=f.split(/\s+/);for(var p=0;p<f.length;p++){var h=f[p];if(!e.is.emptyString(h)){var v=h.match(e.define.event.regex);if(v)for(var g=v[1],y=v[2]?v[2]:void 0,m={callback:a,data:i,delegated:n?!0:!1,selector:n,selObj:new e.Selector(n),type:g,namespace:y,unbindSelfOnTrigger:c.unbindSelfOnTrigger,unbindAllBindersOnTrigger:c.unbindAllBindersOnTrigger,binders:l},w=0;w<l.length;w++)l[w]._private.listeners.push(m)}}}}return o}},off:function(t){var r={};t=e.util.extend({},r,t);return function(t,r,n){var i=this,a=void 0!==i.length,o=a?i:[i],s=e.is.string(t);if(0===arguments.length){for(var l=0;l<o.length;l++)o[l]._private.listeners=[];return i}if(e.is.fn(r)||r===!1){n=r;r=void 0}if(s){var u={};u[t]=n;t=u}for(var c in t){n=t[c];n===!1&&(n=e.define.event.falseCallback);c=c.split(/\s+/);for(var d=0;d<c.length;d++){var f=c[d];if(!e.is.emptyString(f)){var p=f.match(e.define.event.optionalTypeRegex);if(p)for(var h=p[1]?p[1]:void 0,v=p[2]?p[2]:void 0,l=0;l<o.length;l++)for(var g=o[l]._private.listeners,y=0;y<g.length;y++){var m=g[y],w=!v||v===m.namespace,x=!h||m.type===h,b=!n||n===m.callback,_=w&&x&&b;if(_){g.splice(y,1);y--}}}}}return i}},trigger:function(t){var r={};t=e.util.extend({},r,t);return function(r,n,i){var a=this,o=void 0!==a.length,s=o?a:[a],l=e.is.string(r),u=e.is.plainObject(r),c=e.is.event(r),d=this._private.cy||this,f=d.hasCompoundNodes();if(l){var p=r.split(/\s+/);r=[];for(var h=0;h<p.length;h++){var v=p[h];if(!e.is.emptyString(v)){var g=v.match(e.define.event.regex),y=g[1],m=g[2]?g[2]:void 0;r.push({type:y,namespace:m})}}}else if(u){var w=r;r=[w]}n?e.is.array(n)||(n=[n]):n=[];for(var h=0;h<r.length;h++)for(var x=r[h],b=0;b<s.length;b++){var v,_=s[b],k=_._private.listeners,C=e.is.element(_),E=C||t.layout;if(c){v=x;v.cyTarget=v.cyTarget||_;v.cy=v.cy||d}else v=new e.Event(x,{cyTarget:_,cy:d,namespace:x.namespace});x.layout&&(v.layout=x.layout);t.layout&&(v.layout=_);if(v.cyPosition){var S=v.cyPosition,T=d.zoom(),D=d.pan();v.cyRenderedPosition={x:S.x*T+D.x,y:S.y*T+D.y}}i&&(k=[{namespace:v.namespace,type:v.type,callback:i}]);for(var P=0;P<k.length;P++){var N=k[P],M=!N.namespace||N.namespace===v.namespace,j=N.type===v.type,L=N.delegated?_!==v.cyTarget&&e.is.element(v.cyTarget)&&N.selObj.matches(v.cyTarget):!0,I=M&&j&&L;if(I){var R=[v];R=R.concat(n);v.data=N.data?N.data:void 0;if(N.unbindSelfOnTrigger||N.unbindAllBindersOnTrigger){k.splice(P,1);P--}if(N.unbindAllBindersOnTrigger)for(var A=N.binders,O=0;O<A.length;O++){var z=A[O];if(z&&z!==_)for(var B=z._private.listeners,V=0;V<B.length;V++){var q=B[V];if(q===N){B.splice(V,1);V--}}}var X=N.delegated?v.cyTarget:_,F=N.callback.apply(X,R);if(F===!1||v.isPropagationStopped()){E=!1;if(F===!1){v.stopPropagation();v.preventDefault()}}}}if(E){var Y=f?_._private.parent:null,W=null!=Y&&0!==Y.length;if(W){Y=Y[0];Y.trigger(v)}else d.trigger(v)}}return a}},animated:function(t){var r={};t=e.util.extend({},r,t);return function(){var e=this,t=void 0!==e.length,r=t?e:[e],n=this._private.cy||this;if(!n.styleEnabled())return!1;var i=r[0];return i?i._private.animation.current.length>0:void 0}},clearQueue:function(t){var r={};t=e.util.extend({},r,t);return function(){var e=this,t=void 0!==e.length,r=t?e:[e],n=this._private.cy||this;if(!n.styleEnabled())return this;for(var i=0;i<r.length;i++){var a=r[i];a._private.animation.queue=[]}return this}},delay:function(t){var r={};t=e.util.extend({},r,t);return function(e,t){var r=this._private.cy||this;if(!r.styleEnabled())return this;this.animate({delay:e},{duration:e,complete:t});return this}},animate:function(t){var r={};t=e.util.extend({},r,t);return function(e,t){var r=this,n=void 0!==r.length,i=n?r:[r],a=this._private.cy||this,o=!n,s=!o;if(!a.styleEnabled())return this;var l,u=+new Date,c=a.style();void 0===t&&(t={});void 0===t.duration&&(t.duration=400);switch(t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}var d=!0;if(e)for(var f in e){d=!1;break}if(d)return this;e.css&&s&&(e.css=c.getValueStyle(e.css,{array:!0}));if(e.renderedPosition&&s){var p=e.renderedPosition,h=a.pan(),v=a.zoom();e.position={x:(p.x-h.x)/v,y:(p.y-h.y)/v}}if(e.panBy&&o){var g=e.panBy,y=a.pan();e.pan={x:y.x+g.x,y:y.y+g.y}}var m=e.center||e.centre;if(m&&o){var w=a.getCenterPan(m.eles,e.zoom);w&&(e.pan=w)}if(e.fit&&o){var x=e.fit,b=a.getFitViewport(x.eles||x.boundingBox,x.padding);if(b){e.pan=b.pan;e.zoom=b.zoom}}for(var f=0;f<i.length;f++){var _=i[f];l=_.animated()&&(void 0===t.queue||t.queue)?_._private.animation.queue:_._private.animation.current;l.push({properties:e,duration:t.duration,params:t,callTime:u})}s&&a.addToAnimationPool(this);return this}},stop:function(t){var r={};t=e.util.extend({},r,t);return function(e,t){var r=this,n=void 0!==r.length,i=n?r:[r],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var o=0;o<i.length;o++){for(var s=i[o],l=s._private.animation.current,u=0;u<l.length;u++){var c=l[u];t&&(c.duration=0)}e&&(s._private.animation.queue=[]);t||(s._private.animation.current=[])}a.notify({collection:this,type:"draw"});return this}}}})(n);(function(e){"use strict";e.fn.selector=function(t){for(var r in t){var n=t[r];e.Selector.prototype[r]=n}};e.Selector=function(t,r){if(!(this instanceof e.Selector))return new e.Selector(t,r);if(void 0===r&&void 0!==t){r=t;t=void 0}var n=this;n._private={selectorText:null,invalid:!0};if(!r||e.is.string(r)&&r.match(/^\s*$/))if(null==t)n.length=0;else{n[0]=o();n[0].group=t;n.length=1}else if(e.is.element(r)){var i=new e.Collection(n.cy(),[r]);n[0]=o();n[0].collection=i;n.length=1}else if(e.is.collection(r)){n[0]=o();n[0].collection=r;n.length=1}else if(e.is.fn(r)){n[0]=o();n[0].filter=r;n.length=1}else{if(!e.is.string(r)){e.util.error("A selector must be created from a string; found "+r);return}var a=null,o=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},s={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:e.util.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};s.variable="(?:[\\w-]|(?:\\\\"+s.metaChar+"))+";s.value=s.string+"|"+s.number;s.className=s.variable;s.id=s.variable;for(var l=function(e){return e.replace(new RegExp("\\\\("+s.metaChar+")","g"),function(e,t){return t})},u=s.comparatorOp.split("|"),c=0;c<u.length;c++){var d=u[c];s.comparatorOp+="|@"+d}for(var u=s.comparatorOp.split("|"),c=0;c<u.length;c++){var d=u[c];d.indexOf("!")>=0||"="!==d&&(s.comparatorOp+="|\\!"+d)}var f={group:{query:!0,regex:"(node|edge|\\*)",populate:function(e){this.group="*"==e?e:e+"s"}},state:{query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch)",populate:function(e){this.colonSelectors.push(e)}},id:{query:!0,regex:"\\#("+s.id+")",populate:function(e){this.ids.push(l(e))}},className:{query:!0,regex:"\\.("+s.className+")",populate:function(e){this.classes.push(l(e))}},dataExists:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*\\]",populate:function(e){this.data.push({field:l(e)})}},dataCompare:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*("+s.comparatorOp+")\\s*("+s.value+")\\s*\\]",populate:function(e,t,r){var n=null!=new RegExp("^"+s.string+"$").exec(r);r=n?r.substring(1,r.length-1):parseFloat(r);this.data.push({field:l(e),operator:t,value:r})}},dataBool:{query:!0,regex:"\\[\\s*("+s.boolOp+")\\s*("+s.variable+")\\s*\\]",populate:function(e,t){this.data.push({field:l(t),operator:e})}},metaCompare:{query:!0,regex:"\\[\\[\\s*("+s.meta+")\\s*("+s.comparatorOp+")\\s*("+s.number+")\\s*\\]\\]",populate:function(e,t,r){this.meta.push({field:l(e),operator:t,value:parseFloat(r)})}},nextQuery:{separator:!0,regex:s.separator,populate:function(){n[++c]=o();a=null}},child:{separator:!0,regex:s.child,populate:function(){var e=o();e.parent=this;e.subject=a;n[c]=e}},descendant:{separator:!0,regex:s.descendant,populate:function(){var e=o();e.ancestor=this;e.subject=a;n[c]=e}},subject:{modifier:!0,regex:s.subject,populate:function(){if(null!=a&&this.subject!=this){e.util.error("Redefinition of subject in selector `"+r+"`");return!1}a=this;this.subject=this}}},p=0;for(var h in f){f[p]=f[h];f[p].name=h;p++}f.length=p;n._private.selectorText=r;var v=r,c=0,g=function(t){for(var r,n,i,a=0;a<f.length;a++){var o=f[a],s=o.name;if(!e.is.fn(t)||t(s,o)){var l=v.match(new RegExp("^"+o.regex));if(null!=l){n=l;r=o;i=s;var u=l[0];v=v.substring(u.length);break}}}return{expr:r,match:n,name:i}},y=function(){var e=v.match(/^\s+/);if(e){var t=e[0];v=v.substring(t.length)}};n[0]=o();y();for(;;){var m=g();if(null==m.expr){e.util.error("The selector `"+r+"`is invalid");return}for(var w=[],p=1;p<m.match.length;p++)w.push(m.match[p]);var x=m.expr.populate.apply(n[c],w);if(x===!1)return;if(v.match(/^\s*$/))break}n.length=c+1;for(p=0;p<n.length;p++){var b=n[p];if(null!=b.subject){for(;b.subject!=b;)if(null!=b.parent){var _=b.parent,k=b;k.parent=null;_.child=k;b=_}else{if(null==b.ancestor){e.util.error("When adjusting references for the selector `"+b+"`, neither parent nor ancestor was found");break}var C=b.ancestor,E=b;E.ancestor=null;C.descendant=E;b=C}n[p]=b.subject}}if(null!=t)for(var p=0;p<n.length;p++){if(null!=n[p].group&&n[p].group!=t){e.util.error("Group `"+n[p].group+"` conflicts with implicit group `"+t+"` in selector `"+r+"`");return}n[p].group=t}}n._private.invalid=!1};e.selfn=e.Selector.prototype;e.selfn.size=function(){return this.length};e.selfn.eq=function(e){return this[e]};e.selfn.find=function(){};var t=function(r,n){if(null!=r.group&&"*"!=r.group&&r.group!=n._private.group)return!1;for(var i=n.cy(),a=!0,o=0;o<r.colonSelectors.length;o++){var s=r.colonSelectors[o];switch(s){case":selected":a=n.selected();break;case":unselected":a=!n.selected();break;case":selectable":a=n.selectable();break;case":unselectable":a=!n.selectable();break;case":locked":a=n.locked();break;case":unlocked":a=!n.locked();break;case":visible":a=n.visible();break;case":hidden":a=!n.visible();break;case":transparent":a=n.transparent();break;case":grabbed":a=n.grabbed();break;case":free":a=!n.grabbed();break;case":removed":a=n.removed();break;case":inside":a=!n.removed();break;case":grabbable":a=n.grabbable();break;case":ungrabbable":a=!n.grabbable();break;case":animated":a=n.animated();break;case":unanimated":a=!n.animated();break;case":parent":a=n.isNode()&&n.children().nonempty();break;case":child":case":nonorphan":a=n.isNode()&&n.parent().nonempty();break;case":orphan":a=n.isNode()&&n.parent().empty();break;case":loop":a=n.isEdge()&&n.data("source")===n.data("target");break;case":simple":a=n.isEdge()&&n.data("source")!==n.data("target");break;case":active":a=n.active();break;case":inactive":a=!n.active();break;case":touch":a=e.is.touch()}if(!a)break}if(!a)return!1;for(var l=!0,o=0;o<r.ids.length;o++){var u=r.ids[o],c=n._private.data.id;l=l&&u==c;if(!l)break}if(!l)return!1;for(var d=!0,o=0;o<r.classes.length;o++){var f=r.classes[o];d=d&&n.hasClass(f);if(!d)break}if(!d)return!1;var p=function(t){for(var n=!0,i=0;i<r[t.name].length;i++){var a,o=r[t.name][i],s=o.operator,l=o.value,u=o.field;if(null!=s&&null!=l){var c=t.fieldValue(u),d=e.is.string(c)||e.is.number(c)?""+c:"",f=""+l,p=!1;if(s.indexOf("@")>=0){d=d.toLowerCase();f=f.toLowerCase();s=s.replace("@","");p=!0}var h=!1,v=!1;if(s.indexOf("!")>=0){s=s.replace("!","");h=!0}if(p){l=f.toLowerCase();c=d.toLowerCase()}switch(s){case"*=":a=d.search(f)>=0;break;case"$=":a=null!=new RegExp(f+"$").exec(d);break;case"^=":a=null!=new RegExp("^"+f).exec(d);break;case"=":a=c===l;break;case"!=":a=c!==l;break;case">":a=h?l>=c:c>l;v=!0;break;case">=":a=h?l>c:c>=l;v=!0;break;case"<":a=h?c>=l:l>c;v=!0;break;case"<=":a=h?c>l:l>=c;v=!0;break;default:a=!1}}else if(null!=s)switch(s){case"?":a=t.fieldTruthy(u);break;case"!":a=!t.fieldTruthy(u);break;case"^":a=t.fieldUndefined(u)}else a=!t.fieldUndefined(u);if(h&&!v){a=!a;v=!0}if(!a){n=!1;break}}return n},h=p({name:"data",fieldValue:function(e){return n._private.data[e]},fieldRef:function(e){return"element._private.data."+e},fieldUndefined:function(e){return void 0===n._private.data[e]},fieldTruthy:function(e){return n._private.data[e]?!0:!1}});if(!h)return!1;var v=p({name:"meta",fieldValue:function(e){return n[e]()},fieldRef:function(e){return"element."+e+"()"},fieldUndefined:function(e){return null==n[e]()},fieldTruthy:function(e){return n[e]()?!0:!1}});if(!v)return!1;if(null!=r.collection){var g=null!=r.collection._private.ids[n.id()];if(!g)return!1}if(null!=r.filter&&0===n.collection().filter(r.filter).size())return!1;var y=function(e,r){if(null!=e){var n=!1;if(!i.hasCompoundNodes())return!1;r=r();for(var a=0;a<r.length;a++)if(t(e,r[a])){n=!0;break}return n}return!0};return y(r.parent,function(){return n.parent()})&&y(r.ancestor,function(){return n.parents()})&&y(r.child,function(){return n.children()})&&y(r.descendant,function(){return n.descendants()})?!0:!1};e.selfn.filter=function(r){var n=this,i=r.cy();if(n._private.invalid)return new e.Collection(i);var a=function(e,r){for(var i=0;i<n.length;i++){var a=n[i];if(t(a,r))return!0}return!1};null==n._private.selectorText&&(a=function(){return!0});var o=r.filter(a);return o};e.selfn.matches=function(e){var r=this;if(r._private.invalid)return!1;for(var n=0;n<r.length;n++){var i=r[n];if(t(i,e))return!0}return!1};e.selfn.toString=e.selfn.selector=function(){for(var t="",r=function(t,r){return e.is.string(t)?r?'"'+t+'"':t:""},n=function(e){var t="";e.subject===e&&(t+="$");var a=r(e.group);t+=a.substring(0,a.length-1);for(var o=0;o<e.data.length;o++){var s=e.data[o];t+=s.value?"["+s.field+r(s.operator)+r(s.value,!0)+"]":"["+r(s.operator)+s.field+"]"}for(var o=0;o<e.meta.length;o++){var l=e.meta[o];t+="[["+l.field+r(l.operator)+r(l.value,!0)+"]]"}for(var o=0;o<e.colonSelectors.length;o++){var u=e.colonSelectors[i];t+=u}for(var o=0;o<e.ids.length;o++){var u="#"+e.ids[i];t+=u}for(var o=0;o<e.classes.length;o++){var u="."+e.classes[i];t+=u}null!=e.parent&&(t=n(e.parent)+" > "+t);null!=e.ancestor&&(t=n(e.ancestor)+" "+t);null!=e.child&&(t+=" > "+n(e.child));null!=e.descendant&&(t+=" "+n(e.descendant));return t},i=0;i<this.length;i++){var a=this[i];t+=n(a);this.length>1&&i<this.length-1&&(t+=", ")}return t}})(n);(function(e){"use strict";e.Style=function(t){if(!(this instanceof e.Style))return new e.Style(t);if(e.is.core(t)){this._private={cy:t,coreStyle:{},newStyle:!0};this.length=0;this.addDefaultStylesheet()}else e.util.error("A style must have a core reference")};e.style=e.Style;e.styfn=e.Style.prototype;e.fn.style=function(t){for(var r in t){var n=t[r];e.Style.prototype=n}};(function(){var t=e.util.regex.number,r=e.util.regex.rgbaNoBackRefs,n=e.util.regex.hslaNoBackRefs,i=e.util.regex.hex3,a=e.util.regex.hex6,o=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(e){return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+t+"|\\w+|"+r+"|"+n+"|"+i+"|"+a+")\\s*\\,\\s*("+t+"|\\w+|"+r+"|"+n+"|"+i+"|"+a+")\\)$"};e.style.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},autoSize:{number:!0,min:0,enums:["auto"]},number:{number:!0},size:{number:!0,min:0},bgSize:{number:!0,min:0,allowPercent:!0},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgClip:{enums:["none","node"]},color:{color:!0},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad"}};var l=e.style.types,u=e.style.properties=[{name:"text-valign",type:l.valign},{name:"text-halign",type:l.halign},{name:"color",type:l.color},{name:"content",type:l.text},{name:"text-outline-color",type:l.color},{name:"text-outline-width",type:l.size},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-opacity",type:l.zeroOneNumber},{name:"text-transform",type:l.textTransform},{name:"font-family",type:l.fontFamily},{name:"font-style",type:l.fontStyle},{name:"font-weight",type:l.fontWeight},{name:"font-size",type:l.size},{name:"min-zoomed-font-size",type:l.size},{name:"display",type:l.display},{name:"visibility",type:l.visibility},{name:"opacity",type:l.zeroOneNumber},{name:"z-index",type:l.nonNegativeInt},{name:"overlay-padding",type:l.size},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber},{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"height",type:l.autoSize},{name:"width",type:l.autoSize},{name:"shape",type:l.nodeShape},{name:"background-color",type:l.color},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size},{name:"border-style",type:l.borderStyle},{name:"background-image",type:l.url},{name:"background-image-opacity",type:l.zeroOneNumber},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"padding-left",type:l.size},{name:"padding-right",type:l.size},{name:"padding-top",type:l.size},{name:"padding-bottom",type:l.size},{name:"position",type:l.position},{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"control-point-step-size",type:l.size},{name:"control-point-distance",type:l.number},{name:"control-point-weight",type:l.zeroOneNumber},{name:"curve-style",type:l.curveStyle},{name:"haystack-radius",type:l.zeroOneNumber},{name:"source-arrow-shape",type:l.arrowShape},{name:"target-arrow-shape",type:l.arrowShape},{name:"mid-source-arrow-shape",type:l.arrowShape},{name:"mid-target-arrow-shape",type:l.arrowShape},{name:"source-arrow-color",type:l.color},{name:"target-arrow-color",type:l.color},{name:"mid-source-arrow-color",type:l.color},{name:"mid-target-arrow-color",type:l.color},{name:"source-arrow-fill",type:l.arrowFill},{name:"target-arrow-fill",type:l.arrowFill},{name:"mid-source-arrow-fill",type:l.arrowFill},{name:"mid-target-arrow-fill",type:l.arrowFill},{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}];
e.style.pieBackgroundN=16;u.push({name:"pie-size",type:l.bgSize});for(var c=1;c<=e.style.pieBackgroundN;c++){u.push({name:"pie-"+c+"-background-color",type:l.color});u.push({name:"pie-"+c+"-background-size",type:l.percent});u.push({name:"pie-"+c+"-background-opacity",type:l.zeroOneNumber})}for(var c=0;c<u.length;c++){var d=u[c];u[d.name]=d}})();e.styfn.addDefaultStylesheet=function(){var t="Helvetica",r="normal",n="normal",i="#000",a="none",o=16;this.selector("node, edge").css({"text-valign":"top","text-halign":"center",color:i,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":a,"font-family":t,"font-style":r,"font-weight":n,"font-size":o,"min-zoomed-font-size":0,visibility:"visible",display:"element",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"background-blacken":0,"background-color":"#888","background-opacity":1,"background-image":"none","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,position:"origin","pie-size":"100%","pie-1-background-color":"black","pie-2-background-color":"black","pie-3-background-color":"black","pie-4-background-color":"black","pie-5-background-color":"black","pie-6-background-color":"black","pie-7-background-color":"black","pie-8-background-color":"black","pie-9-background-color":"black","pie-10-background-color":"black","pie-11-background-color":"black","pie-12-background-color":"black","pie-13-background-color":"black","pie-14-background-color":"black","pie-15-background-color":"black","pie-16-background-color":"black","pie-1-background-size":"0%","pie-2-background-size":"0%","pie-3-background-size":"0%","pie-4-background-size":"0%","pie-5-background-size":"0%","pie-6-background-size":"0%","pie-7-background-size":"0%","pie-8-background-size":"0%","pie-9-background-size":"0%","pie-10-background-size":"0%","pie-11-background-size":"0%","pie-12-background-size":"0%","pie-13-background-size":"0%","pie-14-background-size":"0%","pie-15-background-size":"0%","pie-16-background-size":"0%","pie-1-background-opacity":1,"pie-2-background-opacity":1,"pie-3-background-opacity":1,"pie-4-background-opacity":1,"pie-5-background-opacity":1,"pie-6-background-opacity":1,"pie-7-background-opacity":1,"pie-8-background-opacity":1,"pie-9-background-opacity":1,"pie-10-background-opacity":1,"pie-11-background-opacity":1,"pie-12-background-opacity":1,"pie-13-background-opacity":1,"pie-14-background-opacity":1,"pie-15-background-opacity":1,"pie-16-background-opacity":1,"source-arrow-shape":"none","mid-source-arrow-shape":"none","target-arrow-shape":"none","mid-target-arrow-shape":"none","source-arrow-color":"#ddd","mid-source-arrow-color":"#ddd","target-arrow-color":"#ddd","mid-target-arrow-color":"#ddd","source-arrow-fill":"filled","mid-source-arrow-fill":"filled","target-arrow-fill":"filled","mid-target-arrow-fill":"filled","line-style":"solid","line-color":"#ddd","control-point-step-size":40,"control-point-weight":.5,"curve-style":"bezier","haystack-radius":.8}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":e.is.touch()?40:15,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125});this.defaultLength=this.length};e.styfn.clear=function(){for(var e=0;e<this.length;e++)this[e]=void 0;this.length=0;this._private.newStyle=!0;return this};e.styfn.resetToDefault=function(){this.clear();this.addDefaultStylesheet();return this};e.styfn.core=function(){return this._private.coreStyle};e.styfn.parse=function(t,r,n,i){t=e.util.camel2dash(t);var a=e.style.properties[t],o=r;if(!a)return null;if(void 0===r||null===r)return null;var s=e.is.string(r);s&&(r=e.util.trim(r));var l=a.type;if(!l)return null;if(n&&(""===r||null===r))return{name:t,value:r,bypass:!0,deleteBypass:!0};var u,c,d,f;if(!s||i);else{if((u=new RegExp(e.style.types.data.regex).exec(r))||(d=new RegExp(e.style.types.layoutData.regex).exec(r))){if(n)return!1;var p=void 0!==d;u=u||d;return{name:t,value:u,strValue:""+r,mapped:p?e.style.types.layoutData:e.style.types.data,field:u[1],bypass:n,hasPie:t.match(/pie-(\d+)-background-size/)}}if((c=new RegExp(e.style.types.mapData.regex).exec(r))||(f=new RegExp(e.style.types.mapLayoutData.regex).exec(r))){if(n)return!1;var p=void 0!==f;c=c||f;if(!l.color&&!l.number)return!1;var h=this.parse(t,c[4]);if(!h||h.mapped)return!1;var v=this.parse(t,c[5]);if(!v||v.mapped)return!1;if(h.value===v.value)return!1;if(l.color){var g=h.value,y=v.value,m=!(g[0]!==y[0]||g[1]!==y[1]||g[2]!==y[2]||g[3]!==y[3]&&(null!=g[3]&&1!==g[3]||null!=y[3]&&1!==y[3]));if(m)return!1}return{name:t,value:c,strValue:""+r,mapped:p?e.style.types.mapLayoutData:e.style.types.mapData,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:h.value,valueMax:v.value,bypass:n,hasPie:t.match(/pie-(\d+)-background-size/)}}}if(l.number){var w,x="px";l.units&&(w=l.units);l.implicitUnits&&(x=l.implicitUnits);if(!l.unitless)if(s){var b="px|em"+(l.allowPercent?"|\\%":"");w&&(b=w);var _=r.match("^("+e.util.regex.number+")("+b+")?$");if(_){r=_[1];w=_[2]||x}}else(!w||l.implicitUnits)&&(w=x);r=parseFloat(r);if(isNaN(r)&&void 0===l.enums)return null;if(isNaN(r)&&void 0!==l.enums){r=o;for(var k=0;k<l.enums.length;k++){var C=l.enums[k];if(C===r)return{name:t,value:r,strValue:""+r,bypass:n}}return null}if(l.integer&&!e.is.integer(r))return null;if(void 0!==l.min&&r<l.min||void 0!==l.max&&r>l.max)return null;var E={name:t,value:r,strValue:""+r+(w?w:""),units:w,bypass:n,hasPie:t.match(/pie-(\d+)-background-size/)&&null!=r&&0!==r&&""!==r};l.unitless||"px"!==w&&"em"!==w||(E.pxValue="px"!==w&&w?this.getEmSizeInPixels()*r:r);("ms"===w||"s"===w)&&(E.msValue="ms"===w?r:1e3*r);return E}if(l.propList){var S=[],T=""+r;if("none"===T);else{for(var D=T.split(","),k=0;k<D.length;k++){var P=e.util.trim(D[k]);e.style.properties[P]&&S.push(P)}if(0===S.length)return null}return{name:t,value:S,strValue:0===S.length?"none":S.join(", "),bypass:n}}if(l.color){var N=e.util.color2tuple(r);return N?{name:t,value:N,strValue:""+r,bypass:n}:null}if(l.enums){for(var k=0;k<l.enums.length;k++){var C=l.enums[k];if(C===r)return{name:t,value:r,strValue:""+r,bypass:n}}return null}if(l.regex){var M=new RegExp(l.regex),j=M.exec(r);return j?{name:t,value:j,strValue:""+r,bypass:n}:null}return l.string?{name:t,value:r,strValue:""+r,bypass:n}:null};e.styfn.selector=function(t){var r="core"===t?null:new e.Selector(t),n=this.length++;this[n]={selector:r,properties:[],mappedProperties:[],index:n};return this};e.styfn.css=function(){var t=arguments;switch(t.length){case 1:for(var r=t[0],n=0;n<e.style.properties.length;n++){var i=e.style.properties[n],a=r[i.name];void 0===a&&(a=r[e.util.dash2camel(i.name)]);void 0!==a&&this.cssRule(i.name,a)}break;case 2:this.cssRule(t[0],t[1])}return this};e.styfn.cssRule=function(e,t){var r=this.parse(e,t);if(r){var n=this.length-1;this[n].properties.push(r);this[n].properties[r.name]=r;r.hasPie&&(this._private.hasPie=!0);r.mapped&&this[n].mappedProperties.push(r);var i=!this[n].selector;i&&(this._private.coreStyle[r.name]=r)}return this}})(n);(function(e){"use strict";e.styfn.apply=function(e){var t=this;if(t._private.newStyle){this._private.contextStyles={};this._private.propDiffs={}}for(var r=0;r<e.length;r++){var n=e[r],i=t.getContextMeta(n),a=t.getContextStyle(i),o=t.applyContextStyle(i,a,n);t.updateTransitions(n,o.diffProps);t.updateStyleHints(n)}t._private.newStyle=!1};e.styfn.getPropertiesDiff=function(e,t){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},i=e+"-"+t,a=n[i];if(a)return a;for(var o=[],s={},l=0;l<r.length;l++){var u=r[l],c="t"===e[l],d="t"===t[l],f=c!==d,p=u.mappedProperties.length>0;if(f||p){var h;f&&p?h=u.properties:f?h=u.properties:p&&(h=u.mappedProperties);for(var v=0;v<h.length;v++){for(var g=h[v],y=g.name,m=!1,w=l+1;w<r.length;w++){var x=r[w],b="t"===t[w];if(b){m=null!=x.properties[g.name];if(m)break}}if(!s[y]&&!m){s[y]=!0;o.push(y)}}}}n[i]=o;return o};e.styfn.getContextMeta=function(e){var t,r=this,n="",i=e._private.styleCxtKey||"";r._private.newStyle&&(i="");for(var a=0;a<r.length;a++){var o=r[a],s=o.selector&&o.selector.matches(e);n+=s?"t":"f"}t=r.getPropertiesDiff(i,n);e._private.styleCxtKey=n;return{key:n,diffPropNames:t}};e.styfn.getContextStyle=function(e){var t=e.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[t])return n[t];for(var i={_private:{key:t}},a=0;a<r.length;a++){var o=r[a],s="t"===t[a];if(s)for(var l=0;l<o.properties.length;l++){var u=o.properties[l],c=i[u.name]=u;c.context=o}}n[t]=i;return i};e.styfn.applyContextStyle=function(e,t,r){for(var n=this,i=e.diffPropNames,a={},o=0;o<i.length;o++){var s=i[o],l=t[s],u=r._private.style[s];if(l&&u!==l){var c=a[s]={prev:u};n.applyParsedProperty(r,l);c.next=r._private.style[s];c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:a}};e.styfn.updateStyleHints=function(t){var r=t._private,n=this,i=r.style,a=!1;if("nodes"===r.group&&n._private.hasPie)for(var o=1;o<=e.style.pieBackgroundN;o++){var s=r.style["pie-"+o+"-background-size"].value;if(s>0){a=!0;break}}r.hasPie=a;var l=i["text-transform"].strValue,u=i.content.strValue,c=i["font-style"].strValue,s=i["font-size"].pxValue+"px",d=i["font-family"].strValue,f=i["font-weight"].strValue,p=i["text-valign"].strValue,h=i["text-valign"].strValue,v=i["text-outline-width"].pxValue;r.labelKey=c+"$"+s+"$"+d+"$"+f+"$"+u+"$"+l+"$"+p+"$"+h+"$"+v;r.fontKey=c+"$"+f+"$"+s+"$"+d;var g=i.width.pxValue,y=i.height.pxValue,m=i["border-width"].pxValue;r.boundingBoxKey=g+"$"+y+"$"+m;if("edges"===t._private.group){var w=i["control-point-step-size"].pxValue,x=i["control-point-distance"]?i["control-point-distance"].pxValue:void 0,b=i["control-point-weight"].value,_=i["curve-style"].strValue;r.boundingBoxKey+="$"+w+"$"+x+"$"+b+"$"+_}r.styleKey=Date.now()};e.styfn.applyParsedProperty=function(t,r){var n,i,a=r,o=t._private.style,s=e.style.properties[a.name].type,l=a.bypass,u=o[a.name],c=u&&u.bypass;if(("height"===r.name||"width"===r.name)&&"auto"===r.value&&t.isNode()&&!t.isParent())return!1;if(l&&a.deleteBypass){var d=o[a.name];if(d){if(d.bypass&&d.bypassed){o[a.name]=d.bypassed;return!0}return!1}return!0}var f=function(){e.util.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+t.id()+"` for property `"+a.name+"` with data field `"+a.field+"`); try a `["+a.field+"]` selector to limit scope to elements with `"+a.field+"` defined")};switch(a.mapped){case e.style.types.mapData:case e.style.types.mapLayoutData:for(var p=a.mapped===e.style.types.mapLayoutData,h=a.field.split("."),n=p?t._private.layoutData:t._private.data,v=0;v<h.length&&n;v++){var g=h[v];n=n[g]}var y;y=e.is.number(n)?(n-a.fieldMin)/(a.fieldMax-a.fieldMin):0;0>y?y=0:y>1&&(y=1);if(s.color){var m=a.valueMin[0],w=a.valueMax[0],x=a.valueMin[1],b=a.valueMax[1],_=a.valueMin[2],k=a.valueMax[2],C=null==a.valueMin[3]?1:a.valueMin[3],E=null==a.valueMax[3]?1:a.valueMax[3],S=[Math.round(m+(w-m)*y),Math.round(x+(b-x)*y),Math.round(_+(k-_)*y),Math.round(C+(E-C)*y)];i={bypass:a.bypass,name:a.name,value:S,strValue:"rgb("+S[0]+", "+S[1]+", "+S[2]+")"}}else{if(!s.number)return!1;var T=a.valueMin+(a.valueMax-a.valueMin)*y;i=this.parse(a.name,T,a.bypass,!0)}i||(i=this.parse(a.name,u.strValue,a.bypass,!0));i||f();i.mapping=a;a=i;break;case e.style.types.data:case e.style.types.layoutData:for(var p=a.mapped===e.style.types.layoutData,h=a.field.split("."),n=p?t._private.layoutData:t._private.data,v=0;v<h.length&&n;v++){var g=h[v];n=n[g]}i=this.parse(a.name,n,a.bypass,!0);if(!i){var D=u?u.strValue:"";i=this.parse(a.name,D,a.bypass,!0)}i||f();i.mapping=a;a=i;break;case void 0:break;default:return!1}if(l){a.bypassed=c?u.bypassed:u;o[a.name]=a}else c?u.bypassed=a:o[a.name]=a;return!0};e.styfn.update=function(){var e=this._private.cy,t=e.elements();t.updateStyle()};e.styfn.updateMappers=function(t){for(var r=0;r<t.length;r++){for(var n=t[r],i=n._private.style,a=0;a<e.style.properties.length;a++){var o=e.style.properties[a],s=i[o.name];if(s&&s.mapping){var l=s.mapping;this.applyParsedProperty(n,l)}}this.updateStyleHints(n)}};e.styfn.updateTransitions=function(t,r,n){var i=this,a=t._private.style,o=a["transition-property"].value,s=a["transition-duration"].msValue,l=a["transition-delay"].msValue,u={};if(o.length>0&&s>0){for(var c=!1,d=0;d<o.length;d++){var f=o[d],p=a[f],h=r[f];if(h){var v=h.prev,g=v,y=null!=h.next?h.next:p,m=!1;if(g){e.is.number(g.pxValue)&&e.is.number(y.pxValue)?m=g.pxValue!==y.pxValue:e.is.number(g.value)&&e.is.number(y.value)?m=g.value!==y.value:e.is.array(g.value)&&e.is.array(y.value)&&(m=g.value[0]!==y.value[0]||g.value[1]!==y.value[1]||g.value[2]!==y.value[2]);if(m){u[f]=y.strValue;this.applyBypass(t,f,g.strValue);c=!0}}}}if(!c)return;t._private.transitioning=!0;t.stop();l>0&&t.delay(l);t.animate({css:u},{duration:s,queue:!1,complete:function(){n||i.removeBypasses(t,o);t._private.transitioning=!1}})}else if(t._private.transitioning){t.stop();this.removeBypasses(t,o);t._private.transitioning=!1}}})(n);(function(e){"use strict";e.styfn.applyBypass=function(t,r,n,i){var a=[],o=!0;if("*"===r||"**"===r){if(void 0!==n)for(var s=0;s<e.style.properties.length;s++){var l=e.style.properties[s],r=l.name,u=this.parse(r,n,!0);u&&a.push(u)}}else if(e.is.string(r)){var u=this.parse(r,n,!0);u&&a.push(u)}else{if(!e.is.plainObject(r))return!1;var c=r;i=n;for(var s=0;s<e.style.properties.length;s++){var l=e.style.properties[s],r=l.name,n=c[r];void 0===n&&(n=c[e.util.dash2camel(r)]);if(void 0!==n){var u=this.parse(r,n,!0);u&&a.push(u)}}}if(0===a.length)return!1;for(var d=!1,s=0;s<t.length;s++){for(var f,p=t[s],h=p._private.style,v={},g=0;g<a.length;g++){var l=a[g];if(i){var y=h[l.name];f=v[l.name]={prev:y}}d=this.applyParsedProperty(p,l)||d;i&&(f.next=h[l.name])}i&&this.updateTransitions(p,v,o)}return d};e.styfn.overrideBypass=function(t,r,n){for(var i=0;i<t.length;i++){var a=t[i],o=a._private.style[e.util.camel2dash(r)];if(o.bypass){o.value=n;o.pxValue=n}else this.applyBypass(a,r,n)}};e.styfn.removeAllBypasses=function(t,r){for(var n=!0,i=0;i<t.length;i++){for(var a=t[i],o={},s=a._private.style,l=0;l<e.style.properties.length;l++){var u=e.style.properties[l],c=u.name,d="",f=this.parse(c,d,!0),p=s[u.name],h=o[u.name]={prev:p};this.applyParsedProperty(a,f);h.next=s[u.name]}r&&this.updateTransitions(a,o,n)}};e.styfn.removeBypasses=function(t,r,n){for(var i=!0,a=0;a<t.length;a++){for(var o=t[a],s={},l=o._private.style,u=0;u<r.length;u++){var c=r[u],d=e.style.properties[c],f="",p=this.parse(c,f,!0),h=l[d.name],v=s[d.name]={prev:h};this.applyParsedProperty(o,p);v.next=l[d.name]}n&&this.updateTransitions(o,s,i)}}})(n);(function(e,t){"use strict";e.styfn.getEmSizeInPixels=function(){var e=this._private.cy,r=e.container();if(t&&r&&t.getComputedStyle){var n=t.getComputedStyle(r).getPropertyValue("font-size"),i=parseFloat(n);return i}return 1};e.styfn.containerCss=function(e){var r=this._private.cy,n=r.container();return t&&n&&t.getComputedStyle?t.getComputedStyle(n).getPropertyValue(e):void 0};e.styfn.containerProperty=function(e){var t=this.containerCss(e),r=this.parse(e,t);return r};e.styfn.containerPropertyAsString=function(e){var t=this.containerProperty(e);return t?t.strValue:void 0}})(n,"undefined"==typeof window?null:window);(function(e){"use strict";e.styfn.getRenderedStyle=function(t){var t=t[0];if(t){for(var r={},n=t._private.style,i=this._private.cy,a=i.zoom(),o=0;o<e.style.properties.length;o++){var s=e.style.properties[o],l=n[s.name];if(l){var u=l.unitless?l.strValue:l.pxValue*a+"px";r[s.name]=u;r[e.util.dash2camel(s.name)]=u}}return r}};e.styfn.getRawStyle=function(t){var t=t[0];if(t){for(var r={},n=t._private.style,i=0;i<e.style.properties.length;i++){var a=e.style.properties[i],o=n[a.name];if(o){r[a.name]=o.strValue;r[e.util.dash2camel(a.name)]=o.strValue}}return r}};e.styfn.getValueStyle=function(t,r){r=r||{};var n,i=r.array?[]:{};n=e.is.element(t)?t._private.style:t;if(n)for(var a=0;a<e.style.properties.length;a++){var o=e.style.properties[a],s=n[o.name]||n[e.util.dash2camel(o.name)];void 0===s||e.is.plainObject(s)||(s=this.parse(o.name,s));if(s)if(r.array)i.push(s);else{i[o.name]=s;i[e.util.dash2camel(o.name)]=s}}return i}})(n);(function(e){"use strict";e.style.applyFromJson=function(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.selector,a=n.css;e.selector(i);for(var o in a){var s=a[o];e.css(o,s)}}return e};e.style.fromJson=function(t,r){var n=new e.Style(t);e.style.applyFromJson(n,r);return n};e.styfn.fromJson=function(t){var r=this;r.resetToDefault();e.style.applyFromJson(r,t);return r};e.styfn.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],n=r.selector,i=r.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}e.push({selector:n?n.toString():"core",css:a})}return e}})(n);(function(e){"use strict";e.style.applyFromString=function(t,r){function n(){l=l.length>a.length?l.substr(a.length):""}function i(){o=o.length>s.length?o.substr(s.length):""}var a,o,s,l=""+r;l=l.replace(/[/][*](\s|.)+?[*][/]/g,"");for(;;){var u=l.match(/^\s*$/);if(u)break;var c=l.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){e.util.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+l);break}a=c[0];var d=c[1];if("core"!==d){var f=new e.Selector(d);if(f._private.invalid){e.util.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+d);n();continue}}var p=c[2],h=!1;o=p;for(var v=[];;){var u=o.match(/^\s*$/);if(u)break;var g=o.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!g){e.util.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p);h=!0;break}s=g[0];var y=g[1],m=g[2],w=e.style.properties[y];if(w){var x=t.parse(y,m);if(x){v.push({name:y,val:m});i()}else{e.util.error("Skipping property: Invalid property definition in: "+s);i()}}else{e.util.error("Skipping property: Invalid property name in: "+s);i()}}if(h){n();break}t.selector(d);for(var b=0;b<v.length;b++){var w=v[b];t.css(w.name,w.val)}n()}return t};e.style.fromString=function(t,r){var n=new e.Style(t);e.style.applyFromString(n,r);return n};e.styfn.fromString=function(t){var r=this;r.resetToDefault();e.style.applyFromString(r,t);return r}})(n);(function(e){"use strict";e.stylesheet=e.Stylesheet=function(){if(!(this instanceof e.Stylesheet))return new e.Stylesheet;this.length=0;return void 0};e.Stylesheet.prototype.selector=function(e){var t=this.length++;this[t]={selector:e,properties:[]};return this};e.Stylesheet.prototype.css=function(t,r){var n=this.length-1;if(e.is.string(t))this[n].properties.push({name:t,value:r});else if(e.is.plainObject(t))for(var i=t,a=0;a<e.style.properties.length;a++){var o=e.style.properties[a],s=i[o.name];void 0===s&&(s=i[e.util.dash2camel(o.name)]);if(void 0!==s){var t=o.name,r=s;this[n].properties.push({name:t,value:r})}}return this};e.Stylesheet.prototype.generateStyle=function(t){for(var r=new e.Style(t),n=0;n<this.length;n++){var i=this[n],a=i.selector,o=i.properties;r.selector(a);for(var s=0;s<o.length;s++){var l=o[s];r.css(l.name,l.value)}}return r}})(n);(function(e,t){"use strict";var r=e.is.touch(),n={},i=e.util.copy(n);e.defaults=function(t){n=e.util.extend({},i,t)};e.fn.core=function(t){for(var r in t){var n=t[r];e.Core.prototype[r]=n}};e.Core=function(i){if(!(this instanceof e.Core))return new e.Core(i);var a=this;i=e.util.extend({},n,i);var o=i.container,s=o?o._cyreg:null;s=s||{};if(s&&s.cy){if(o)for(;o.firstChild;)o.removeChild(o.firstChild);s.cy.notify({type:"destroy"});s={}}var l=s.readies=s.readies||[];o&&(o._cyreg=s);s.cy=a;var u=void 0!==t&&void 0!==o&&!i.headless,c=i;c.layout=e.util.extend({name:u?"grid":"null"},c.layout);c.renderer=e.util.extend({name:u?"canvas":"null"},c.renderer);var d=function(e,t,r){return void 0!==t?t:void 0!==r?r:e},f=this._private={container:c.container,ready:!1,initrender:!1,options:c,elements:[],id2index:{},listeners:[],aniEles:e.Collection(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:d(!0,c.zoomingEnabled),userZoomingEnabled:d(!0,c.userZoomingEnabled),panningEnabled:d(!0,c.panningEnabled),userPanningEnabled:d(!0,c.userPanningEnabled),boxSelectionEnabled:d(!1,c.boxSelectionEnabled),autolock:d(!1,c.autolock,c.autolockNodes),autoungrabify:d(!1,c.autoungrabify,c.autoungrabifyNodes),autounselectify:d(!1,c.autounselectify),styleEnabled:void 0===c.styleEnabled?u:c.styleEnabled,zoom:e.is.number(c.zoom)?c.zoom:1,pan:{x:e.is.plainObject(c.pan)&&e.is.number(c.pan.x)?c.pan.x:0,y:e.is.plainObject(c.pan)&&e.is.number(c.pan.y)?c.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,deferredExecQueue:[]},p=c.selectionType;f.selectionType=void 0===p||"additive"!==p&&"single"!==p?r?"additive":"single":p;if(e.is.number(c.minZoom)&&e.is.number(c.maxZoom)&&c.minZoom<c.maxZoom){f.minZoom=c.minZoom;f.maxZoom=c.maxZoom}else e.is.number(c.minZoom)&&void 0===c.maxZoom?f.minZoom=c.minZoom:e.is.number(c.maxZoom)&&void 0===c.minZoom&&(f.maxZoom=c.maxZoom);f.styleEnabled&&this.setStyle(c.style);a.initRenderer(e.util.extend({hideEdgesOnViewport:c.hideEdgesOnViewport,hideLabelsOnViewport:c.hideLabelsOnViewport,textureOnViewport:c.textureOnViewport,wheelSensitivity:e.is.number(c.wheelSensitivity)&&c.wheelSensitivity>0?c.wheelSensitivity:1,motionBlur:c.motionBlur,pixelRatio:e.is.number(c.pixelRatio)&&c.pixelRatio>0?c.pixelRatio:"auto"===c.pixelRatio?void 0:1,tapThreshold:d(e.is.touch()?8:4,e.is.touch()?c.touchTapThreshold:c.desktopTapThreshold)},c.renderer));if(c.initrender){a.on("initrender",c.initrender);a.on("initrender",function(){a._private.initrender=!0})}a.load(c.elements,function(){a.startAnimationLoop();a._private.ready=!0;e.is.fn(c.ready)&&a.on("ready",c.ready);for(var t=0;t<l.length;t++){var r=l[t];a.on("ready",r)}s&&(s.readies=[]);a.trigger("ready")},c.done)};e.corefn=e.Core.prototype;e.fn.core({isReady:function(){return this._private.ready},ready:function(e){this.isReady()?this.trigger("ready",[],e):this.on("ready",e)},initrender:function(){return this._private.initrender},destroy:function(){this.notify({type:"destroy"});var e=this.container(),t=e.parentNode;t&&t.removeChild(e);return this},getElementById:function(t){var r=this._private.id2index[t];return void 0!==r?this._private.elements[r]:new e.Collection(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){for(var t=this._private.elements,r=this._private.id2index,n=0;n<e.length;n++){var i=e[n],a=i._private.data.id,o=r[a],s=void 0!==o;if(!s){o=t.length;t.push(i);r[a]=o;i._private.index=o}}return this},removeFromPool:function(e){for(var t=this._private.elements,r=this._private.id2index,n=0;n<e.length;n++){var i=e[n],a=i._private.data.id,o=r[a],s=void 0!==o;if(s){this._private.id2index[a]=void 0;t.splice(o,1);for(var l=o;l<t.length;l++){var u=t[l]._private.data.id;r[u]--;t[l]._private.index--}}}},container:function(){return this._private.container},options:function(){return e.util.copy(this._private.options)},json:function(){var e={},t=this;e.elements={};t.elements().each(function(t,r){var n=r.group();e.elements[n]||(e.elements[n]=[]);e.elements[n].push(r.json())});this._private.styleEnabled&&(e.style=t.style().json());e.zoomingEnabled=t._private.zoomingEnabled;e.userZoomingEnabled=t._private.userZoomingEnabled;e.zoom=t._private.zoom;e.minZoom=t._private.minZoom;e.maxZoom=t._private.maxZoom;e.panningEnabled=t._private.panningEnabled;e.userPanningEnabled=t._private.userPanningEnabled;e.pan=t._private.pan;e.boxSelectionEnabled=t._private.boxSelectionEnabled;e.layout=t._private.options.layout;e.renderer=t._private.options.renderer;e.hideEdgesOnViewport=t._private.options.hideEdgesOnViewport;e.hideLabelsOnViewport=t._private.options.hideLabelsOnViewport;e.textureOnViewport=t._private.options.textureOnViewport;e.wheelSensitivity=t._private.options.wheelSensitivity;e.motionBlur=t._private.options.motionBlur;return e},defer:function(e){var t=this,r=t._private,n=r.deferredExecQueue;n.push(e);r.deferredTimeout||(r.deferredTimeout=setTimeout(function(){for(;n.length>0;)n.shift()();r.deferredTimeout=null},0))}})})(n,"undefined"==typeof window?null:window);(function(e,t){"use strict";function r(e){var t=!document||"interactive"!==document.readyState&&"complete"!==document.readyState?r:e;setTimeout(t,9,e)}e.fn.core({add:function(t){var r,n=this;if(e.is.elementOrCollection(t)){var i=t;if(i._private.cy===n)r=i.restore();else{for(var a=[],o=0;o<i.length;o++){var s=i[o];a.push(s.json())}r=new e.Collection(n,a)}}else if(e.is.array(t)){var a=t;r=new e.Collection(n,a)}else if(e.is.plainObject(t)&&(e.is.array(t.nodes)||e.is.array(t.edges))){for(var l=t,a=[],u=["nodes","edges"],o=0,c=u.length;c>o;o++){var d=u[o],f=l[d];if(e.is.array(f))for(var p=0,h=f.length;h>p;p++){var v=f[p];v.group=d;a.push(v)}}r=new e.Collection(n,a)}else{var v=t;r=new e.Element(n,v).collection()}return r},remove:function(t){if(e.is.elementOrCollection(t))t=t;else if(e.is.string(t)){var r=t;t=this.$(r)}return t.remove()},load:function(n,i,a){function o(){s.one("layoutready",function(e){s.notifications(!0);s.trigger(e);s.notify({type:"load",collection:s.elements()});s.one("load",i);s.trigger("load")}).one("layoutstop",function(){s.one("done",a);s.trigger("done")});var t=e.util.extend({},s._private.options.layout);t.eles=s.$();s.layout(t)}var s=this;s.notifications(!1);var l=s.elements();l.length>0&&l.remove();null!=n&&(e.is.plainObject(n)||e.is.array(n))&&s.add(n);t?r(o):o();return this}})})(n,"undefined"==typeof window?null:window);(function(e,t){"use strict";e.fn.core({animated:e.define.animated(),clearQueue:e.define.clearQueue(),delay:e.define.delay(),animate:e.define.animate(),stop:e.define.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},startAnimationLoop:function(){function r(){e.util.requestAnimationFrame(function(e){n(e);r()})}function n(t){function r(r,n){var s=r._private.animation.current,l=r._private.animation.queue,u=!1;if(0===s.length){var c=l.length>0?l.shift():null;if(c){c.callTime=t;s.push(c)}}for(var d=[],f=s.length-1;f>=0;f--){var p=s[f];p.started||i(r,p);a(r,p,t,n);if(p.done){d.push(p);s.splice(f,1)}u=!0}for(var f=0;f<d.length;f++){var p=d[f],h=p.params.complete;e.is.fn(h)&&h.apply(r,[t])}n||0!==s.length||0!==l.length||o.push(r);return u}t=+new Date;for(var n=l._private.aniEles,o=[],s=0;s<n.length;s++){var u=n[s];r(u)}var c=r(l,!0);if(n.length>0||c){var d;if(n.length>0){var f=n.updateCompoundBounds();d=f.length>0?n.add(f):n}l.notify({type:"draw",collection:d})}n.unmerge(o)}function i(t,r){var n=e.is.core(t),i=!n,a=t,o=l._private.style;if(i)var s=a._private.position,u={x:s.x,y:s.y},c=o.getValueStyle(a);if(n)var d=l._private.pan,f={x:d.x,y:d.y},p=l._private.zoom;r.started=!0;r.startTime=Date.now();r.startPosition=u;r.startStyle=c;r.startPan=f;r.startZoom=p}function a(t,r,n,i){var a,u=l._private.style,c=r.properties,d=r.params,f=r.startTime,p=!i;a=0===r.duration?1:Math.min(1,(n-f)/r.duration);0>a?a=0:a>1&&(a=1);if(null==c.delay){var h=r.startPosition,v=c.position,g=t._private.position;if(v&&p){o(h.x,v.x)&&(g.x=s(h.x,v.x,a));o(h.y,v.y)&&(g.y=s(h.y,v.y,a))}var y=r.startPan,m=c.pan,w=t._private.pan,x=null!=m&&i;if(x){o(y.x,m.x)&&(w.x=s(y.x,m.x,a));o(y.y,m.y)&&(w.y=s(y.y,m.y,a));t.trigger("pan")}var b=r.startZoom,_=c.zoom,k=null!=_&&i;if(k){o(b,_)&&(t._private.zoom=s(b,_,a));t.trigger("zoom")}(x||k)&&t.trigger("viewport");if(c.css&&p)for(var C=c.css,E=0;E<C.length;E++){var S=C[E].name,T=C[E],D=T,P=r.startStyle[S],N=s(P,D,a);u.overrideBypass(t,S,N)}}e.is.fn(d.step)&&d.step.apply(t,[n]);a>=1&&(r.done=!0);return a}function o(t,r){return null==t||null==r?!1:e.is.number(t)&&e.is.number(r)?!0:t&&r?!0:!1}function s(t,r,n){0>n?n=0:n>1&&(n=1);var i,a;i=null!=t.pxValue||null!=t.value?null!=t.pxValue?t.pxValue:t.value:t;a=null!=r.pxValue||null!=r.value?null!=r.pxValue?r.pxValue:r.value:r;if(e.is.number(i)&&e.is.number(a))return i+(a-i)*n;if(e.is.number(i[0])&&e.is.number(a[0])){var o=i,s=a,l=function(e,t){var r=t-e,i=e;return Math.round(n*r+i)},u=l(o[0],s[0]),c=l(o[1],s[1]),d=l(o[2],s[2]);return[u,c,d]}return void 0}var l=this;l.styleEnabled()&&t&&r()}})})(n,"undefined"==typeof window?null:window);(function(e){"use strict";e.fn.core({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1})})})(n);(function(e){"use strict";e.fn.core({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger()});e.corefn.bind=e.corefn.on;e.corefn.unbind=e.corefn.off})(n);(function(e){"use strict";e.fn.core({png:function(e){var t=this._private.renderer;e=e||{};return t.png(e)}})})(n);(function(e){"use strict";e.fn.core({layout:function(t){var r;if(null==t){t=e.util.extend({},this._private.options.layout);t.eles=this.$()}r=this.initLayout(t);r.run();return this},makeLayout:function(e){return this.initLayout(e)},initLayout:function(t){if(null!=t)if(null!=t.name){var r=t.name,n=e.extension("layout",r);if(null!=n){t.eles=null!=t.eles?t.eles:this.$();e.is.string(t.eles)&&(t.eles=this.$(t.eles));var i=new n(e.util.extend({},t,{cy:this}));e.is.plainObject(i._private)||(i._private={});i._private.cy=this;i._private.listeners=[];return i}e.util.error("Can not apply layout: No such layout `"+r+"` found; did you include its JS file?")}else e.util.error("A `name` must be specified to make a layout");else e.util.error("Layout options must be specified to make a layout")}})})(n);(function(e){"use strict";e.fn.core({notify:function(e){if(this._private.batchingNotify){var t=this._private.batchNotifyEles,r=this._private.batchNotifyTypes;if(e.collection)for(var n=0;n<e.collection.length;n++){var i=e.collection[n];t.ids[i._private.id]||t.push(i)}r.ids[e.type]||r.push(e.type)}else if(this._private.notificationsEnabled){var a=this.renderer();a.notify(e)}},notifications:function(e){var t=this._private;if(void 0===e)return t.notificationsEnabled;t.notificationsEnabled=e?!0:!1;return void 0},noNotifications:function(e){this.notifications(!1);e();this.notifications(!0)},startBatch:function(){var e=this._private;e.batchingStyle=e.batchingNotify=!0;e.batchStyleEles=[];e.batchNotifyEles=[];e.batchNotifyTypes=[];e.batchStyleEles.ids={};e.batchNotifyEles.ids={};e.batchNotifyTypes.ids={};return this},endBatch:function(){var t=this._private;t.batchingStyle=!1;new e.Collection(this,t.batchStyleEles).updateStyle();t.batchingNotify=!1;this.notify({type:t.batchNotifyTypes,collection:t.batchNotifyEles});return this},batch:function(e){this.startBatch();e();this.endBatch();return this},batchData:function(e){var t=this;return this.batch(function(){for(var r in e){var n=e[r],i=t.getElementById(r);
i.data(n)}})}})})(n);(function(e){"use strict";e.fn.core({renderTo:function(e,t,r,n){var i=this._private.renderer;i.renderTo(e,t,r,n);return this},renderer:function(){return this._private.renderer},forceRender:function(){this.notify({type:"draw"});return this},resize:function(){this.notify({type:"resize"});this.trigger("resize");return this},initRenderer:function(t){var r=this,n=e.extension("renderer",t.name);null!=n?this._private.renderer=new n(e.util.extend({},t,{cy:r,style:r._private.style})):e.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",t.name)}})})(n);(function(e){"use strict";e.fn.core({collection:function(t){return e.is.string(t)?this.$(t):e.is.elementOrCollection(t)?t.collection():e.is.array(t)?new e.Collection(this,t):new e.Collection(this)},nodes:function(e){var t=this.$(function(){return this.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(){return this.isEdge()});return e?t.filter(e):t},$:function(t){var r=new e.Collection(this,this._private.elements);return t?r.filter(t):r}});e.corefn.elements=e.corefn.filter=e.corefn.$})(n);(function(e){"use strict";e.fn.core({style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(t){var r=this._private;r.style=e.is.stylesheet(t)?t.generateStyle(this):e.is.array(t)?e.style.fromJson(this,t):e.is.string(t)?e.style.fromString(this,t):new e.Style(this);return r.style}})})(n);(function(e){"use strict";e.fn.core({autolock:function(e){if(void 0===e)return this._private.autolock;this._private.autolock=e?!0:!1;return this},autoungrabify:function(e){if(void 0===e)return this._private.autoungrabify;this._private.autoungrabify=e?!0:!1;return this},autounselectify:function(e){if(void 0===e)return this._private.autounselectify;this._private.autounselectify=e?!0:!1;return this},panningEnabled:function(e){if(void 0===e)return this._private.panningEnabled;this._private.panningEnabled=e?!0:!1;return this},userPanningEnabled:function(e){if(void 0===e)return this._private.userPanningEnabled;this._private.userPanningEnabled=e?!0:!1;return this},zoomingEnabled:function(e){if(void 0===e)return this._private.zoomingEnabled;this._private.zoomingEnabled=e?!0:!1;return this},userZoomingEnabled:function(e){if(void 0===e)return this._private.userZoomingEnabled;this._private.userZoomingEnabled=e?!0:!1;return this},boxSelectionEnabled:function(e){if(void 0===e)return this._private.boxSelectionEnabled;this._private.boxSelectionEnabled=e?!0:!1;return this},pan:function(){var t,r,n,i,a,o=arguments,s=this._private.pan;switch(o.length){case 0:return s;case 1:if(e.is.string(o[0])){t=o[0];return s[t]}if(e.is.plainObject(o[0])){if(!this._private.panningEnabled)return this;n=o[0];i=n.x;a=n.y;e.is.number(i)&&(s.x=i);e.is.number(a)&&(s.y=a);this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=o[0];r=o[1];"x"!==t&&"y"!==t||!e.is.number(r)||(s[t]=r);this.trigger("pan viewport")}this.notify({type:"viewport"});return this},panBy:function(){var t,r,n,i,a,o=arguments,s=this._private.pan;if(!this._private.panningEnabled)return this;switch(o.length){case 1:if(e.is.plainObject(o[0])){n=o[0];i=n.x;a=n.y;e.is.number(i)&&(s.x+=i);e.is.number(a)&&(s.y+=a);this.trigger("pan viewport")}break;case 2:t=o[0];r=o[1];"x"!==t&&"y"!==t||!e.is.number(r)||(s[t]+=r);this.trigger("pan viewport")}this.notify({type:"viewport"});return this},fit:function(e,t){var r=this.getFitViewport(e,t);if(r){var n=this._private;n.zoom=r.zoom;n.pan=r.pan;this.trigger("pan zoom viewport");this.notify({type:"viewport"})}return this},getFitViewport:function(t,r){if(e.is.number(t)&&void 0===r){r=t;t=void 0}if(this._private.panningEnabled&&this._private.zoomingEnabled){var n;if(e.is.string(t)){var i=t;t=this.$(i)}else if(e.is.boundingBox(t)){var a=t;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2};n.w=n.x2-n.x1;n.h=n.y2-n.y1}else e.is.elementOrCollection(t)||(t=this.elements());n=n||t.boundingBox();var o,s=this.width(),l=this.height();r=e.is.number(r)?r:0;if(!isNaN(s)&&!isNaN(l)&&s>0&&l>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){o=Math.min((s-2*r)/n.w,(l-2*r)/n.h);o=o>this._private.maxZoom?this._private.maxZoom:o;o=o<this._private.minZoom?this._private.minZoom:o;var u={x:(s-o*(n.x1+n.x2))/2,y:(l-o*(n.y1+n.y2))/2};return{zoom:o,pan:u}}}},minZoom:function(t){if(void 0===t)return this._private.minZoom;e.is.number(t)&&(this._private.minZoom=t);return this},maxZoom:function(t){if(void 0===t)return this._private.maxZoom;e.is.number(t)&&(this._private.maxZoom=t);return this},zoom:function(t){var r,n;if(void 0===t)return this._private.zoom;if(e.is.number(t))n=t;else if(e.is.plainObject(t)){n=t.level;if(t.position){var i=t.position,a=this._private.pan,o=this._private.zoom;r={x:i.x*o+a.x,y:i.y*o+a.y}}else t.renderedPosition&&(r=t.renderedPosition);if(r&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!e.is.number(n)||r&&(!e.is.number(r.x)||!e.is.number(r.y)))return this;n=n>this._private.maxZoom?this._private.maxZoom:n;n=n<this._private.minZoom?this._private.minZoom:n;if(r){var s=this._private.pan,l=this._private.zoom,u=n,c={x:-u/l*(r.x-s.x)+r.x,y:-u/l*(r.y-s.y)+r.y};this._private.zoom=n;this._private.pan=c;var d=s.x!==c.x||s.y!==c.y;this.trigger(" zoom "+(d?" pan ":"")+" viewport ")}else{this._private.zoom=n;this.trigger("zoom viewport")}this.notify({type:"viewport"});return this},viewport:function(t){var r=this._private,n=!0,i=!0,a=[],o=!1,s=!1;if(!t)return this;e.is.number(t.zoom)||(n=!1);e.is.plainObject(t.pan)||(i=!1);if(!n&&!i)return this;if(n){var l=t.zoom;if(l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled)o=!0;else{r.zoom=l;a.push("zoom")}}if(i&&(!o||!t.cancelOnFailedZoom)&&r.panningEnabled){var u=t.pan;if(e.is.number(u.x)){r.pan.x=u.x;s=!1}if(e.is.number(u.y)){r.pan.y=u.y;s=!1}s||a.push("pan")}if(a.length>0){a.push("viewport");this.trigger(a.join(" "));this.notify({type:"viewport"})}return this},center:function(e){var t=this.getCenterPan(e);if(t){this._private.pan=t;this.trigger("pan viewport");this.notify({type:"viewport"})}return this},getCenterPan:function(t,r){if(this._private.panningEnabled){if(e.is.string(t)){var n=t;t=this.elements(n)}else e.is.elementOrCollection(t)||(t=this.elements());var i=t.boundingBox(),a=this.width(),o=this.height();r=void 0===r?this._private.zoom:r;var s={x:(a-r*(i.x1+i.x2))/2,y:(o-r*(i.y1+i.y2))/2};return s}},reset:function(){if(!this._private.panningEnabled||!this._private.zoomingEnabled)return this;this.viewport({pan:{x:0,y:0},zoom:1});return this},width:function(){var e=this._private.container;return e?e.clientWidth:1},height:function(){var e=this._private.container;return e?e.clientHeight:1},extent:function(){var e=this._private.pan,t=this._private.zoom,r=this.renderedExtent(),n={x1:(r.x1-e.x)/t,x2:(r.x2-e.x)/t,y1:(r.y1-e.y)/t,y2:(r.y2-e.y)/t};n.w=n.x2-n.x1;n.h=n.y2-n.y1;return n},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}});e.corefn.centre=e.corefn.center;e.corefn.autolockNodes=e.corefn.autolock;e.corefn.autoungrabifyNodes=e.corefn.autoungrabify})(n);(function(e){"use strict";e.fn.collection=e.fn.eles=function(t){for(var r in t){var n=t[r];e.Collection.prototype[r]=n}};var t={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(t,r,n){var i=e.is.element(r)?r._private:r,a=i.group,o=null!=n?n:this.prefix[a]+this.id[a];if(t.getElementById(o).empty())this.id[a]++;else for(;!t.getElementById(o).empty();)o=this.prefix[a]+ ++this.id[a];return o}};e.Element=function(t,r,n){if(!(this instanceof e.Element))return new e.Element(t,r,n);var i=this;n=void 0===n||n?!0:!1;if(void 0!==t&&void 0!==r&&e.is.core(t))if("nodes"===r.group||"edges"===r.group){this.length=1;this[0]=this;this._private={cy:t,single:!0,data:r.data||{},layoutData:{},position:r.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:r.group,style:{},rstyle:{},styleCxts:[],removed:!0,selected:r.selected?!0:!1,selectable:void 0===r.selectable?!0:r.selectable?!0:!1,locked:r.locked?!0:!1,grabbed:!1,grabbable:void 0===r.grabbable?!0:r.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]};if(r.renderedPosition){var a=r.renderedPosition,o=t.pan(),s=t.zoom();this._private.position={x:(a.x-o.x)/s,y:(a.y-o.y)/s}}if(e.is.string(r.classes))for(var l=r.classes.split(/\s+/),u=0,c=l.length;c>u;u++){var d=l[u];d&&""!==d&&(i._private.classes[d]=!0)}r.css&&t.style().applyBypass(this,r.css);(void 0===n||n)&&this.restore()}else e.util.error("An element must be of type `nodes` or `edges`; you specified `"+r.group+"`");else e.util.error("An element must have a core reference and parameters set")};e.Collection=function(r,n,i){if(!(this instanceof e.Collection))return new e.Collection(r,n);if(void 0!==r&&e.is.core(r)){var a={},o={},s=!1;if(n){if(n.length>0&&e.is.plainObject(n[0])&&!e.is.element(n[0])){s=!0;for(var l=[],u={},c=0,d=n.length;d>c;c++){var f=n[c];null==f.data&&(f.data={});var p=f.data;if(null==p.id)p.id=t.generate(r,f);else if(0!==r.getElementById(p.id).length||u[p.id])continue;var h=new e.Element(r,f,!1);l.push(h);u[p.id]=!0}n=l}}else n=[];this.length=0;for(var c=0,d=n.length;d>c;c++){var v=n[c];if(v){var g=v._private.data.id;if(!i||i.unique&&!a[g]){a[g]=v;o[g]=this.length;this[this.length]=v;this.length++}}}this._private={cy:r,ids:a,indexes:o};s&&this.restore()}else e.util.error("A collection must have a reference to the core")};e.elefn=e.elesfn=e.Element.prototype=e.Collection.prototype;e.elesfn.cy=function(){return this._private.cy};e.elesfn.element=function(){return this[0]};e.elesfn.collection=function(){return e.is.collection(this)?this:new e.Collection(this._private.cy,[this])};e.elesfn.unique=function(){return new e.Collection(this._private.cy,this,{unique:!0})};e.elesfn.getElementById=function(t){var r=this._private.cy,n=this._private.ids[t];return n?n:e.Collection(r)};e.elesfn.json=function(){var t=this.element();if(null==t)return void 0;var r=t._private,n=e.util.copy({data:r.data,position:r.position,group:r.group,bypass:r.bypass,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbed:r.grabbed,grabbable:r.grabbable,classes:""}),i=[];for(var a in r.classes)r.classes[a]&&i.push(a);for(var o=0;o<i.length;o++){var a=i[o];n.classes+=a+(o<i.length-1?" ":"")}return n};e.elesfn.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t],n=r.json();e.push(n)}return e};e.elesfn.clone=function(){for(var t=this.cy(),r=[],n=0;n<this.length;n++){var i=this[n],a=i.json(),o=new e.Element(t,a,!1);r.push(o)}return new e.Collection(t,r)};e.elesfn.restore=function(r){var n=this,i=[],a=n.cy();void 0===r&&(r=!0);for(var o=[],s=[],l=[],u=0,c=0,d=0,f=n.length;f>d;d++){var p=n[d];if(p.isNode()){s.push(p);u++}else{l.push(p);c++}}o=s.concat(l);for(var d=0,f=o.length;f>d;d++){var p=o[d];if(p.removed()){var h=p._private,v=h.data;if(void 0===v.id)v.id=t.generate(a,p);else{if(e.is.emptyString(v.id)||!e.is.string(v.id)){e.util.error("Can not create element with invalid string ID `"+v.id+"`");continue}if(0!==a.getElementById(v.id).length){e.util.error("Can not create second element with ID `"+v.id+"`");continue}}var g=v.id;if(p.isEdge()){for(var y=p,m=["source","target"],w=m.length,x=!1,b=0;w>b;b++){var _=m[b],k=v[_];if(null==k||""===k){e.util.error("Can not create edge `"+g+"` with unspecified "+_);x=!0}else if(a.getElementById(k).empty()){e.util.error("Can not create edge `"+g+"` with nonexistant "+_+" `"+k+"`");x=!0}}if(x)continue;var C=a.getElementById(v.source),E=a.getElementById(v.target);C._private.edges.push(y);E._private.edges.push(y);y._private.source=C;y._private.target=E}h.ids={};h.ids[g]=p;h.removed=!1;a.addToPool(p);i.push(p)}}for(var d=0;u>d;d++){var S=o[d],v=S._private.data,T=S._private.data.parent,D=null!=T;if(D){var P=a.getElementById(T);if(P.empty())v.parent=void 0;else{for(var N=!1,M=P;!M.empty();){if(S.same(M)){N=!0;v.parent=void 0;break}M=M.parent()}if(!N){P[0]._private.children.push(S);S._private.parent=P[0];a._private.hasCompoundNodes=!0}}}}i=new e.Collection(a,i);if(i.length>0){var j=i.add(i.connectedNodes()).add(i.parent());j.updateStyle(r);r?i.rtrigger("add"):i.trigger("add")}return n};e.elesfn.removed=function(){var e=this[0];return e&&e._private.removed};e.elesfn.inside=function(){var e=this[0];return e&&!e._private.removed};e.elesfn.remove=function(t){function r(e){for(var t=e._private.edges,r=0;r<t.length;r++)i(t[r])}function n(e){for(var t=e._private.children,r=0;r<t.length;r++)i(t[r])}function i(e){var t=c[e.id()];if(!t){c[e.id()]=!0;if(e.isNode()){u.push(e);r(e);n(e)}else u.unshift(e)}}function a(e,t){for(var r=e._private.edges,n=0;n<r.length;n++){var i=r[n];if(t===i){r.splice(n,1);break}}}function o(e,t){t=t[0];e=e[0];for(var r=e._private.children,n=0;n<r.length;n++)if(r[n][0]===t[0]){r.splice(n,1);break}}var s=this,l=[],u=[],c={},d=s._private.cy;void 0===t&&(t=!0);for(var f=0,p=s.length;p>f;f++){var h=s[f];i(h)}for(var f=0;f<u.length;f++){var h=u[f];h._private.removed=!0;d.removeFromPool(h);l.push(h);if(h.isEdge()){var v=h.source()[0],g=h.target()[0];a(v,h);a(g,h)}else{var y=h.parent();0!==y.length&&o(y,h)}}var m=d._private.elements;d._private.hasCompoundNodes=!1;for(var f=0;f<m.length;f++){var h=m[f];if(h.isParent()){d._private.hasCompoundNodes=!0;break}}var w=new e.Collection(this.cy(),l);if(w.size()>0){t&&this.cy().notify({type:"remove",collection:w});w.trigger("remove")}for(var x={},f=0;f<u.length;f++){var h=u[f],b="nodes"===h._private.group,_=h._private.data.parent;if(b&&void 0!==_&&!x[_]){x[_]=!0;var y=d.getElementById(_);y&&0!==y.length&&!y._private.removed&&0===y.children().length&&y.updateStyle()}}return this};e.elesfn.move=function(e){var t=this._private.cy;if(void 0!==e.source||void 0!==e.target){var r=e.source,n=e.target,i=t.getElementById(r).length>0,a=t.getElementById(n).length>0;if(i||a){var o=this.jsons();this.remove();for(var s=0;s<o.length;s++){var l=o[s];if("edges"===l.group){i&&(l.data.source=r);a&&(l.data.target=n)}}return t.add(o)}}else if(void 0!==e.parent){var u=e.parent,c=null===u||t.getElementById(u).length>0;if(c){var o=this.jsons(),d=this.descendants(),f=d.merge(d.add(this).connectedEdges());this.remove();for(var s=0;s<this.length;s++){var l=o[s];"nodes"===l.group&&(l.data.parent=null===u?void 0:u)}}return t.add(o).merge(f.restore())}return this}})(n);(function(e){"use strict";e.fn.eles({stdBreadthFirstSearch:function(t){t=e.util.extend({},t,{std:!0});return this.breadthFirstSearch(t)},breadthFirstSearch:function(t,r,n){var i,a,o;if(e.is.plainObject(t)&&!e.is.elementOrCollection(t)){i=t;t=i.roots;r=i.visit;n=i.directed;a=i.std;o=i.thisArg}n=2!==arguments.length||e.is.fn(r)?n:r;r=e.is.fn(r)?r:function(){};for(var s,l=this._private.cy,u=e.is.string(t)?this.filter(t):t,c=[],d=[],f={},p={},h={},v=0,g=this.nodes(),y=this.edges(),m=0;m<u.length;m++)if(u[m].isNode()){c.unshift(u[m]);h[u[m].id()]=!0;d.push(u[m]);p[u[m].id()]=0}for(;0!==c.length;){var w,u=c.shift(),x=p[u.id()],b=f[u.id()],_=null==b?void 0:b.connectedNodes().not(u)[0];w=a?r.call(o,u,b,_,v++,x):r.call(u,v++,x,u,b,_);if(w===!0){s=u;break}if(w===!1)break;for(var k=u.connectedEdges(n?function(){return this.data("source")===u.id()}:void 0).intersect(y),m=0;m<k.length;m++){var C=k[m],E=C.connectedNodes(function(){return this.id()!==u.id()}).intersect(g);if(0!==E.length&&!h[E.id()]){E=E[0];c.push(E);h[E.id()]=!0;p[E.id()]=p[u.id()]+1;d.push(E);f[E.id()]=C}}}for(var S=[],m=0;m<d.length;m++){var T=d[m],D=f[T.id()];D&&S.push(D);S.push(T)}return{path:new e.Collection(l,S,{unique:!0}),found:new e.Collection(l,s,{unique:!0})}},stdDepthFirstSearch:function(t){t=e.util.extend({},t,{std:!0});return this.depthFirstSearch(t)},depthFirstSearch:function(t,r,n){var i,a,o;if(e.is.plainObject(t)&&!e.is.elementOrCollection(t)){i=t;t=i.roots;r=i.visit;n=i.directed;a=i.std;o=i.thisArg}n=2!==arguments.length||e.is.fn(r)?n:r;r=e.is.fn(r)?r:function(){};for(var s,l=this._private.cy,u=e.is.string(t)?this.filter(t):t,c=[],d=[],f={},p={},h={},v=0,g=this.edges(),y=this.nodes(),m=0;m<u.length;m++)if(u[m].isNode()){c.push(u[m]);d.push(u[m]);p[u[m].id()]=0}for(;0!==c.length;){var u=c.pop();if(!h[u.id()]){h[u.id()]=!0;var w,x=p[u.id()],b=f[u.id()],_=null==b?void 0:b.connectedNodes().not(u)[0];w=a?r.call(o,u,b,_,v++,x):r.call(u,v++,x,u,b,_);if(w===!0){s=u;break}if(w===!1)break;for(var k=u.connectedEdges(n?function(){return this.data("source")===u.id()}:void 0).intersect(g),m=0;m<k.length;m++){var C=k[m],E=C.connectedNodes(function(){return this.id()!==u.id()}).intersect(y);if(0!==E.length&&!h[E.id()]){E=E[0];c.push(E);p[E.id()]=p[u.id()]+1;d.push(E);f[E.id()]=C}}}}for(var S=[],m=0;m<d.length;m++){var T=d[m],D=f[T.id()];D&&S.push(D);S.push(T)}return{path:new e.Collection(l,S,{unique:!0}),found:new e.Collection(l,s,{unique:!0})}},kruskal:function(t){function r(e){for(var t=0;t<i.length;t++){var r=i[t];if(r.anySame(e))return{eles:r,index:t}}}t=e.is.fn(t)?t:function(){return 1};for(var n=new e.Collection(this._private.cy,[]),i=[],a=this.nodes(),o=0;o<a.length;o++)i.push(a[o].collection());for(var s=this.edges(),l=s.toArray().sort(function(e,r){var n=t.call(e,e),i=t.call(r,r);return n-i}),o=0;o<l.length;o++){var u=l[o],c=u.source()[0],d=u.target()[0],f=r(c),p=r(d);if(f.index!==p.index){n=n.add(u);i[f.index]=f.eles.add(p.eles);i.splice(p.index,1)}}return a.add(n)},dijkstra:function(t,r,n){var i;if(e.is.plainObject(t)&&!e.is.elementOrCollection(t)){i=t;t=i.root;r=i.weight;n=i.directed}var a=this._private.cy;n=e.is.fn(r)?n:r;r=e.is.fn(r)?r:function(){return 1};for(var o=e.is.string(t)?this.filter(t).eq(0):t.eq(0),s={},l={},u={},c=this.edges().filter(function(){return!this.isLoop()}),d=this.nodes(),f=[],p=0;p<d.length;p++){s[d[p].id()]=d[p].same(o)?0:1/0;f.push(d[p])}var h=function(e){return s[e.id()]};f=new e.Collection(a,f);for(var v=e.Minheap(a,f,h),g=function(e,t){for(var i,a=(n?e.edgesTo(t):e.edgesWith(t)).intersect(c),o=1/0,s=0;s<a.length;s++){var l=a[s],u=r.apply(l,[l]);if(o>u||!i){o=u;i=l}}return{edge:i,dist:o}};v.size()>0;){var y=v.pop(),m=y.value,w=y.id,x=a.getElementById(w);u[w]=m;if(m===Math.Infinite)break;for(var b=x.neighborhood().intersect(d),p=0;p<b.length;p++){var _=b[p],k=_.id(),C=g(x,_),E=m+C.dist;if(E<v.getValueById(k)){v.edit(k,E);l[k]={node:x,edge:C.edge}}}}return{distanceTo:function(t){var r=e.is.string(t)?d.filter(t).eq(0):t.eq(0);return u[r.id()]},pathTo:function(t){var r=e.is.string(t)?d.filter(t).eq(0):t.eq(0),n=[],i=r;if(r.length>0){n.unshift(r);for(;l[i.id()];){var o=l[i.id()];n.unshift(o.edge);n.unshift(o.node);i=o.node}}return new e.Collection(a,n)}}}});e.elesfn.bfs=e.elesfn.breadthFirstSearch;e.elesfn.dfs=e.elesfn.depthFirstSearch;e.elesfn.stdBfs=e.elesfn.stdBreadthFirstSearch;e.elesfn.stdDfs=e.elesfn.stdDepthFirstSearch})(n);(function(e){"use strict";e.fn.eles({aStar:function(t){t=t||{};var r=function(){a&&console.log.apply(console,arguments)},n=function(e,t,r,i){if(e==t){i.push(o.getElementById(t));return i}if(t in r){var a=r[t],s=v[t];i.push(o.getElementById(t));i.push(o.getElementById(s));return n(e,a,r,i)}return void 0},i=function(e,t){if(0===e.length)return void 0;for(var r=0,n=t[e[0]],i=1;i<e.length;i++){var a=t[e[i]];if(n>a){n=a;r=i}}return r};if(null!=t.debug)var a=t.debug;else var a=!1;r("Starting aStar...");var o=this._private.cy;if(null==t||null==t.root)return void 0;var s=e.is.string(t.root)?this.filter(t.root)[0]:t.root[0];r("Source node: %s",s.id());if(null==t.goal)return void 0;var l=e.is.string(t.goal)?this.filter(t.goal)[0]:t.goal[0];r("Target node: %s",l.id());if(null!=t.heuristic&&e.is.fn(t.heuristic))var u=t.heuristic;else var u=function(){return 0};if(null!=t.weight&&e.is.fn(t.weight))var c=t.weight;else var c=function(){return 1};if(null!=t.directed)var d=t.directed;else var d=!1;var f=[],p=[s.id()],h={},v={},g={},y={};g[s.id()]=0;y[s.id()]=u(s);for(var m=this.edges().not(":loop"),w=this.nodes(),x=0;p.length>0;){var b=i(p,y),_=this.filter("#"+p[b])[0];x++;r("\nStep: %s",x);r("Processing node: %s, fScore = %s",_.id(),y[_.id()]);if(_.id()==l.id()){r("Found goal node!");var k=n(s.id(),l.id(),h,[]);k.reverse();r("Path: %s",k);return{found:!0,distance:g[_.id()],path:new e.Collection(o,k),steps:x}}f.push(_.id());p.splice(b,1);r("Added node to closedSet, removed from openSet.");r("Processing neighbors...");for(var C=_.connectedEdges(d?'[source = "'+_.id()+'"]':void 0).intersect(m),E=0;E<C.length;E++){var S=C[E],T=S.connectedNodes('[id != "'+_.id()+'"]').intersect(w);r("   processing neighbor: %s",T.id());if(-1==f.indexOf(T.id())){var D=g[_.id()]+c.apply(S,[S]);r("   tentative gScore: %d",D);if(-1!=p.indexOf(T.id())){if(D<g[T.id()]){g[T.id()]=D;y[T.id()]=D+u(T);h[T.id()]=_.id();r("   better score, replacing gScore. ");r("   fScore(%s) = %s",T.id(),D)}}else{g[T.id()]=D;y[T.id()]=D+u(T);p.push(T.id());h[T.id()]=_.id();v[T.id()]=S.id();r("   not in openSet, adding it. ");r("   fScore(%s) = %s",T.id(),D)}}else r("   already in closedSet, ignoring it.")}}r("Reached end of computation without finding our goal");return{found:!1,distance:void 0,path:void 0,steps:x}},floydWarshall:function(t){t=t||{};var r=function(){n&&console.log.apply(console,arguments)};if(null!=t.debug)var n=t.debug;else var n=!1;r("Starting floydWarshall...");var i=this._private.cy;if(null!=t.weight&&e.is.fn(t.weight))var a=t.weight;else var a=function(){return 1};if(null!=t.directed)var o=t.directed;else var o=!1;for(var s=this.edges().not(":loop"),l=this.nodes(),u=l.length,c={},d=0;u>d;d++)c[l[d].id()]=d;for(var f=[],d=0;u>d;d++){for(var p=new Array(u),h=0;u>h;h++)p[h]=d==h?0:1/0;f.push(p)}var v=[],g=[],y=function(e){for(var t=0;u>t;t++){for(var r=new Array(u),n=0;u>n;n++)r[n]=void 0;e.push(r)}};y(v);y(g);for(var d=0;d<s.length;d++){var m=c[s[d].source().id()],w=c[s[d].target().id()],x=a.apply(s[d],[s[d]]);if(f[m][w]>x){f[m][w]=x;v[m][w]=w;g[m][w]=s[d]}}if(!o)for(var d=0;d<s.length;d++){var m=c[s[d].target().id()],w=c[s[d].source().id()],x=a.apply(s[d],[s[d]]);if(f[m][w]>x){f[m][w]=x;v[m][w]=w;g[m][w]=s[d]}}for(var b=0;u>b;b++)for(var d=0;u>d;d++)for(var h=0;u>h;h++)if(f[d][b]+f[b][h]<f[d][h]){f[d][h]=f[d][b]+f[b][h];v[d][h]=v[d][b]}for(var _=[],d=0;u>d;d++)_.push(l[d].id());var k={distance:function(t,r){if(e.is.string(t))var n=i.filter(t)[0].id();else var n=t.id();if(e.is.string(r))var a=i.filter(r)[0].id();else var a=r.id();return f[c[n]][c[a]]},path:function(t,r){var n=function(e,t,r,n,a){if(e===t)return i.getElementById(n[e]);if(void 0===r[e][t])return void 0;for(var o=[i.getElementById(n[e])],s=e;e!==t;){s=e;e=r[e][t];var l=a[s][e];o.push(l);o.push(i.getElementById(n[e]))}return o};if(e.is.string(t))var a=i.filter(t)[0].id();else var a=t.id();if(e.is.string(r))var o=i.filter(r)[0].id();else var o=r.id();var s=n(c[a],c[o],v,_,g);return new e.Collection(i,s)}};return k},bellmanFord:function(t){t=t||{};var r=function(){n&&console.log.apply(console,arguments)};if(null!=t.debug)var n=t.debug;else var n=!1;r("Starting bellmanFord...");if(null!=t.weight&&e.is.fn(t.weight))var i=t.weight;else var i=function(){return 1};if(null!=t.directed)var a=t.directed;else var a=!1;if(null==t.root){e.util.error("options.root required");return void 0}if(e.is.string(t.root))var o=this.filter(t.root)[0];else var o=t.root[0];r("Source node: %s",o.id());for(var s=this._private.cy,l=this.edges().not(":loop"),u=this.nodes(),c=u.length,d={},f=0;c>f;f++)d[u[f].id()]=f;for(var p=[],h=[],v=[],f=0;c>f;f++){p[f]=u[f].id()===o.id()?0:1/0;h[f]=void 0}for(var g=!1,f=1;c>f;f++){g=!1;for(var y=0;y<l.length;y++){var m=d[l[y].source().id()],w=d[l[y].target().id()],x=i.apply(l[y],[l[y]]),b=p[m]+x;if(b<p[w]){p[w]=b;h[w]=m;v[w]=l[y];g=!0}if(!a){var b=p[w]+x;if(b<p[m]){p[m]=b;h[m]=w;v[m]=l[y];g=!0}}}if(!g)break}if(g)for(var y=0;y<l.length;y++){var m=d[l[y].source().id()],w=d[l[y].target().id()],x=i.apply(l[y],[l[y]]);if(p[m]+x<p[w]){e.util.error("Error: graph contains a negative weigth cycle!");return{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}}for(var _=[],f=0;c>f;f++)_.push(u[f].id());var k={distanceTo:function(t){if(e.is.string(t))var r=s.filter(t)[0].id();else var r=t.id();return p[d[r]]},pathTo:function(t){var r=function(e,t,r,n,i,a){for(;;){i.push(s.getElementById(n[r]));i.push(a[r]);if(t===r)return i;var o=e[r];if("undefined"==typeof o)return void 0;r=o}};if(e.is.string(t))var n=s.filter(t)[0].id();else var n=t.id();var i=[],a=r(h,d[o.id()],d[n],_,i,v);null!=a&&a.reverse();return new e.Collection(s,a)},hasNegativeWeightCycle:!1};return k},kargerStein:function(t){t=t||{};var r=function(){a&&console.log.apply(console,arguments)},n=function(e,t,r){for(var n=r[e],i=n[1],a=n[2],o=t[i],s=t[a],l=r.filter(function(e){return t[e[1]]===o&&t[e[2]]===s?!1:t[e[1]]===s&&t[e[2]]===o?!1:!0}),u=0;u<l.length;u++){var c=l[u];if(c[1]===s){l[u]=c.slice(0);l[u][1]=o}else if(c[2]===s){l[u]=c.slice(0);l[u][2]=o}}for(var u=0;u<t.length;u++)t[u]===s&&(t[u]=o);return l},i=function(e,t,r,a){if(a>=r)return t;var o=Math.floor(Math.random()*t.length),s=n(o,e,t);return i(e,s,r-1,a)};if(null!=t&&null!=t.debug)var a=t.debug;else var a=!1;r("Starting kargerStein...");var o=this._private.cy,s=this.edges().not(":loop"),l=this.nodes(),u=l.length,c=s.length,d=Math.ceil(Math.pow(Math.log(u)/Math.LN2,2)),f=Math.floor(u/Math.sqrt(2));if(2>u){e.util.error("At least 2 nodes are required for KargerSteing algorithm!");return void 0}for(var p={},h=0;u>h;h++)p[l[h].id()]=h;for(var v=[],h=0;c>h;h++){var g=s[h];v.push([h,p[g.source().id()],p[g.target().id()]])}for(var y,m=1/0,w=[],h=0;u>h;h++)w.push(h);for(var x=0;d>=x;x++){var b=w.slice(0),_=i(b,v,u,f),k=b.slice(0),C=i(b,_,f,2),E=i(k,_,f,2);if(C.length<=E.length&&C.length<m){m=C.length;y=[C,b]}else if(E.length<=C.length&&E.length<m){m=E.length;y=[E,k]}}for(var S=y[0].map(function(e){return s[e[0]]}),T=[],D=[],P=y[1][0],h=0;h<y[1].length;h++){var N=y[1][h];N===P?T.push(l[h]):D.push(l[h])}var M={cut:new e.Collection(o,S),partition1:new e.Collection(o,T),partition2:new e.Collection(o,D)};return M},pageRank:function(t){t=t||{};var r=function(e){for(var t=e.length,r=0,n=0;t>n;n++)r+=e[n];for(var n=0;t>n;n++)e[n]=e[n]/r},n=function(){i&&console.log.apply(console,arguments)};if(null!=t&&null!=t.debug)var i=t.debug;else var i=!1;n("Starting pageRank...");if(null!=t&&null!=t.dampingfactor)var a=t.dampingFactor;else var a=.8;if(null!=t&&null!=t.precision)var o=t.precision;else var o=1e-6;if(null!=t&&null!=t.iterations)var s=t.iterations;else var s=200;if(null!=t&&null!=t.weight&&e.is.fn(t.weight))var l=t.weight;else var l=function(){return 1};for(var u=this._private.cy,c=this.edges().not(":loop"),d=this.nodes(),f=d.length,p=c.length,h={},v=0;f>v;v++)h[d[v].id()]=v;for(var g=[],y=[],m=(1-a)/f,v=0;f>v;v++){for(var w=[],x=0;f>x;x++)w.push(0);g.push(w);y.push(0)}for(var v=0;p>v;v++){var b=c[v],_=h[b.source().id()],k=h[b.target().id()],C=l.apply(b,[b]);g[k][_]+=C;y[_]+=C}for(var E=1/f+m,x=0;f>x;x++)if(0===y[x])for(var v=0;f>v;v++)g[v][x]=E;else for(var v=0;f>v;v++)g[v][x]=g[v][x]/y[x]+m;for(var S,T=[],D=[],v=0;f>v;v++){T.push(1);D.push(0)}for(var P=0;s>P;P++){for(var N=D.slice(0),v=0;f>v;v++)for(var x=0;f>x;x++)N[v]+=g[v][x]*T[x];r(N);S=T;T=N;for(var M=0,v=0;f>v;v++)M+=Math.pow(S[v]-T[v],2);if(o>M){n("Stoped at iteration %s",P);break}}n("Result:\n"+T);var j={rank:function(t){if(e.is.string(t))var r=u.filter(t)[0].id();else var r=t.id();return T[h[r]]}};return j}})})(n);(function(e){"use strict";e.fn.eles({animated:e.define.animated(),clearQueue:e.define.clearQueue(),delay:e.define.delay(),animate:e.define.animate(),stop:e.define.stop()})})(n);(function(e){"use strict";e.fn.eles({classes:function(t){var r,n=this,i=[];if(e.is.fn(t))r=t;else if(!e.is.plainObject(t))return this;for(var a=0;a<n.length;a++){var o=n[a],s=!1;t=r?r.apply(o,[a,o]):t;if(t.add)for(var l=0;l<t.add.length;l++){var u=t.add[l],c=o._private.classes[u];o._private.classes[u]=!0;if(!c&&!s){i.push(o);s=!0}}if(t.remove)for(var l=0;l<t.remove.length;l++){var u=t.remove[l],c=o._private.classes[u];o._private.classes[u]=!1;if(c&&!s){i.push(o);s=!0}}if(t.toggle)for(var l=0;l<t.toggle.length;l++){var u=t.toggle[l],c=o._private.classes[u];o._private.classes[u]=!c;if(!s){i.push(o);s=!0}}}i.length>0&&new e.Collection(this.cy(),i).updateStyle().trigger("class");return this},addClass:function(t){t=t.split(/\s+/);for(var r=this,n=[],i=0;i<t.length;i++){var a=t[i];if(!e.is.emptyString(a))for(var o=0;o<r.length;o++){var s=r[o],l=s._private.classes[a];s._private.classes[a]=!0;l||n.push(s)}}n.length>0&&new e.Collection(this._private.cy,n).updateStyle().trigger("class");return r},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes[e]?!0:!1},toggleClass:function(t,r){for(var n=t.split(/\s+/),i=this,a=[],o=0,s=i.length;s>o;o++)for(var l=i[o],u=0;u<n.length;u++){var c=n[u];if(!e.is.emptyString(c)){var d=l._private.classes[c],f=r||void 0===r&&!d;if(f){l._private.classes[c]=!0;d||a.push(l)}else{l._private.classes[c]=!1;d&&a.push(l)}}}a.length>0&&new e.Collection(this._private.cy,a).updateStyle().trigger("class");return i},removeClass:function(t){t=t.split(/\s+/);for(var r=this,n=[],i=0;i<r.length;i++)for(var a=r[i],o=0;o<t.length;o++){var s=t[o];if(s&&""!==s){var l=a._private.classes[s];a._private.classes[s]=void 0;l&&n.push(a)}}n.length>0&&new e.Collection(r._private.cy,n).updateStyle();r.trigger("class");return r},flashClass:function(e,t){var r=this;if(null==t)t=250;else if(0===t)return r;r.addClass(e);setTimeout(function(){r.removeClass(e)},t);return r}})})(n);(function(e){"use strict";e.fn.eles({allAre:function(e){return this.filter(e).length===this.length},is:function(e){return this.filter(e).length>0},some:function(e,t){for(var r=0;r<this.length;r++){var n=e.apply(t,[this[r],r,this]);if(n)return!0}return!1},every:function(e,t){for(var r=0;r<this.length;r++){var n=e.apply(t,[this[r],r,this]);if(!n)return!1}return!0},same:function(e){e=this.cy().collection(e);return this.length!==e.length?!1:this.intersect(e).length===this.length},anySame:function(e){e=this.cy().collection(e);return this.intersect(e).length>0},allAreNeighbors:function(e){e=this.cy().collection(e);return this.neighborhood().intersect(e).length===e.length}})})(n);(function(e){"use strict";e.fn.eles({parent:function(t){for(var r=[],n=this._private.cy,i=0;i<this.length;i++){var a=this[i],o=n.getElementById(a._private.data.parent);o.size()>0&&r.push(o)}return new e.Collection(n,r,{unique:!0}).filter(t)},parents:function(t){for(var r=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var a=n[i];r.push(a)}n=n.parent()}return new e.Collection(this.cy(),r,{unique:!0}).filter(t)},commonAncestors:function(e){for(var t,r=0;r<this.length;r++){var n=this[r],i=n.parents();t=t||i;t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isNode()&&e.parent().empty()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isNode()&&e.parent().nonempty()}).filter(e)},children:function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n];r=r.concat(i._private.children)}return new e.Collection(this.cy(),r,{unique:!0}).filter(t)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];return e?0!==e._private.children.length:void 0},isChild:function(){var e=this[0];return e?void 0!==e._private.data.parent&&0!==e.parent().length:void 0},descendants:function(t){function r(e){for(var t=0;t<e.length;t++){var i=e[t];n.push(i);i.children().nonempty()&&r(i.children())}}var n=[];r(this.children());return new e.Collection(this.cy(),n,{unique:!0}).filter(t)}});e.elesfn.ancestors=e.elesfn.parents})(n);(function(e){"use strict";var t=1,r=0;e.fn.eles({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1}),rscratch:e.define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:e.define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];
return e?e._private.data.id:void 0},position:e.define.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){var t=e.updateCompoundBounds();t.rtrigger("position")},canSet:function(e){return!e.locked()}}),silentPosition:e.define.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){e.updateCompoundBounds()},canSet:function(e){return!e.locked()}}),positions:function(t,r){if(e.is.plainObject(t))this.position(t);else if(e.is.fn(t)){for(var n=t,i=0;i<this.length;i++){var a=this[i],t=n.apply(a,[i,a]);if(t&&!a.locked()){var o=a._private.position;o.x=t.x;o.y=t.y}}var s=this.updateCompoundBounds(),l=s.length>0?this.add(s):this;r?l.trigger("position"):l.rtrigger("position")}return this},silentPositions:function(e){return this.positions(e,!0)},updateCompoundBounds:function(){function t(e){var t=e.children(),r=e._private.style,i=t.boundingBox({includeLabels:!1,includeEdges:!1}),a={top:r["padding-top"].pxValue,bottom:r["padding-bottom"].pxValue,left:r["padding-left"].pxValue,right:r["padding-right"].pxValue},o=e._private.position,s=!1;if("auto"===r.width.value){e._private.autoWidth=i.w+a.left+a.right;o.x=(i.x1+i.x2-a.left+a.right)/2;s=!0}if("auto"===r.height.value){e._private.autoHeight=i.h+a.top+a.bottom;o.y=(i.y1+i.y2-a.top+a.bottom)/2;s=!0}s&&n.push(e)}var r=this.cy();if(!r.styleEnabled()||!r.hasCompoundNodes())return r.collection();for(var n=[],i=this.parent();i.nonempty();){for(var a=0;a<i.length;a++){var o=i[a];t(o)}i=i.parent()}return new e.Collection(r,n)},renderedPosition:function(t,r){var n=this[0],i=this.cy(),a=i.zoom(),o=i.pan(),s=e.is.plainObject(t)?t:void 0,l=void 0!==s||void 0!==r&&e.is.string(t);if(n&&n.isNode()){if(!l){var u=n._private.position;s={x:u.x*a+o.x,y:u.y*a+o.y};return void 0===t?s:s[t]}for(var c=0;c<this.length;c++){var n=this[c];void 0!==r?n._private.position[t]=(r-o[t])/a:void 0!==s&&(n._private.position={x:(s.x-o.x)/a,y:(s.y-o.y)/a})}this.rtrigger("position")}else if(!l)return void 0;return this},parentPosition:function(t,r){var n=this[0],i=this.cy(),a=e.is.plainObject(t)?t:void 0,o=void 0!==a||void 0!==r&&e.is.string(t),s=i.hasCompoundNodes();if(n&&n.isNode()){if(!o){var l=n._private.position,u=s?n.parent():null,c=u&&u.length>0,d=c;c&&(u=u[0]);var f=d?u._private.position:{x:0,y:0};a={x:l.x-f.x,y:l.y-f.y};return void 0===t?a:a[t]}for(var p=0;p<this.length;p++){var n=this[p],u=s?n.parent():null,c=u&&u.length>0,d=c;c&&(u=u[0]);var f=d?u._private.position:{x:0,y:0};void 0!==r?n._private.position[t]=r+f[t]:void 0!==a&&(n._private.position={x:a.x+f.x,y:a.y+f.y})}this.rtrigger("position")}else if(!o)return void 0;return this},width:function(){var e=this[0],t=e._private.cy,r=t._private.styleEnabled;if(e){if(r){var n=e._private.style.width;return"auto"===n.strValue?e._private.autoWidth:n.pxValue}return 1}},outerWidth:function(){var e=this[0],n=e._private.cy,i=n._private.styleEnabled;if(e){if(i){var a=e._private.style,o="auto"===a.width.strValue?e._private.autoWidth:a.width.pxValue,s=a["border-width"]?a["border-width"].pxValue*t+r:0;return o+s}return 1}},renderedWidth:function(){var e=this[0];if(e){var t=e.width();return t*this.cy().zoom()}},renderedOuterWidth:function(){var e=this[0];if(e){var t=e.outerWidth();return t*this.cy().zoom()}},height:function(){var e=this[0],t=e._private.cy,r=t._private.styleEnabled;if(e&&"nodes"===e._private.group){if(r){var n=e._private.style.height;return"auto"===n.strValue?e._private.autoHeight:n.pxValue}return 1}},outerHeight:function(){var e=this[0],n=e._private.cy,i=n._private.styleEnabled;if(e&&"nodes"===e._private.group){if(!i)return 1;var a=e._private.style,o="auto"===a.height.strValue?e._private.autoHeight:a.height.pxValue,s=a["border-width"]?a["border-width"].pxValue*t+r:0;return o+s}},renderedHeight:function(){var e=this[0];if(e&&"nodes"===e._private.group){var t=e.height();return t*this.cy().zoom()}},renderedOuterHeight:function(){var e=this[0];if(e&&"nodes"===e._private.group){var t=e.outerHeight();return t*this.cy().zoom()}},renderedBoundingBox:function(e){var t=this.boundingBox(e),r=this.cy(),n=r.zoom(),i=r.pan(),a=t.x1*n+i.x,o=t.x2*n+i.x,s=t.y1*n+i.y,l=t.y2*n+i.y;return{x1:a,x2:o,y1:s,y2:l,w:o-a,h:l-s}},boundingBox:function(e){var t=this,r=t._private.cy,n=r._private,i=n.styleEnabled;e=e||{};var a=void 0===e.includeNodes?!0:e.includeNodes,o=void 0===e.includeEdges?!0:e.includeEdges,s=void 0===e.includeLabels?!0:e.includeLabels;i&&n.renderer.recalculateRenderedStyle(this);for(var l=1/0,u=-1/0,c=1/0,d=-1/0,f=0;f<t.length;f++){var p,h,v,g,y,m,w=t[f],x=w._private,b=i?x.style.display.value:"element",_="nodes"===x.group,k=!1;if("none"!==b){if(_&&a){k=!0;var C=x.position;y=C.x;m=C.y;var E=w.outerWidth(),S=E/2,T=w.outerHeight(),D=T/2;p=y-S;h=y+S;v=m-D;g=m+D;l=l>p?p:l;u=h>u?h:u;c=c>v?v:c;d=g>d?g:d}else if(w.isEdge()&&o){k=!0;var P=w._private.source._private.position,N=w._private.target._private.position,M=w._private.rstyle||{};p=P.x;h=N.x;v=P.y;g=N.y;if(p>h){var j=p;p=h;h=j}if(v>g){var j=v;v=g;g=j}l=l>p?p:l;u=h>u?h:u;c=c>v?v:c;d=g>d?g:d;if(i)for(var L=M.bezierPts||[],E=w._private.style.width.pxValue,I=E/2,R=0;R<L.length;R++){var A=L[R];p=A.x-I;h=A.x+I;v=A.y-I;g=A.y+I;l=l>p?p:l;u=h>u?h:u;c=c>v?v:c;d=g>d?g:d}}if(i){var O=w._private.style,M=w._private.rstyle,z=O.content.strValue,B=O["font-size"],V=O["text-halign"],q=O["text-valign"],X=M.labelWidth,F=M.labelHeight,Y=M.labelX,W=M.labelY;if(k&&s&&z&&B&&null!=F&&null!=X&&null!=Y&&null!=W&&V&&q){var U,H,$,G,Z=F,Q=X;if(w.isEdge()){U=Y-Q/2;H=Y+Q/2;$=W-Z/2;G=W+Z/2}else{switch(V.value){case"left":U=Y-Q;H=Y;break;case"center":U=Y-Q/2;H=Y+Q/2;break;case"right":U=Y;H=Y+Q}switch(q.value){case"top":$=W-Z;G=W;break;case"center":$=W-Z/2;G=W+Z/2;break;case"bottom":$=W;G=W+Z}}l=l>U?U:l;u=H>u?H:u;c=c>$?$:c;d=G>d?G:d}}}}return{x1:l,x2:u,y1:c,y2:d,w:u-l,h:d-c}}});e.elesfn.modelPosition=e.elesfn.position;e.elesfn.modelPositions=e.elesfn.positions})(n);(function(e){"use strict";function t(e){return function(t){var r=this;void 0===t&&(t=!0);if(0!==r.length&&r.isNode()&&!r.removed()){for(var n=0,i=r[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];(t||!s.isLoop())&&(n+=e(i,s))}return n}}}function r(e,t){return function(r){for(var n,i=this.nodes(),a=0;a<i.length;a++){var o=i[a],s=o[e](r);void 0===s||void 0!==n&&!t(s,n)||(n=s)}return n}}e.fn.eles({degree:t(function(e,t){return t.source().same(t.target())?2:1}),indegree:t(function(e,t){return t.target().same(e)?1:0}),outdegree:t(function(e,t){return t.source().same(e)?1:0})});e.fn.eles({minDegree:r("degree",function(e,t){return t>e}),maxDegree:r("degree",function(e,t){return e>t}),minIndegree:r("indegree",function(e,t){return t>e}),maxIndegree:r("indegree",function(e,t){return e>t}),minOutdegree:r("outdegree",function(e,t){return t>e}),maxOutdegree:r("outdegree",function(e,t){return e>t})});e.fn.eles({totalDegree:function(e){for(var t=0,r=this.nodes(),n=0;n<r.length;n++)t+=r[n].degree(e);return t}})})(n);(function(e){"use strict";e.fn.eles({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger(),rtrigger:function(e,t){if(0!==this.length){this.cy().notify({type:e,collection:this});this.trigger(e,t);return this}}});e.elesfn.bind=e.elesfn.on;e.elesfn.unbind=e.elesfn.off})(n);(function(e){"use strict";e.fn.eles({nodes:function(e){return this.filter(function(e,t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(e,t){return t.isEdge()}).filter(e)},filter:function(t){var r=this._private.cy;if(e.is.fn(t)){for(var n=[],i=0;i<this.length;i++){var a=this[i];t.apply(a,[i,a])&&n.push(a)}return new e.Collection(r,n)}return e.is.string(t)||e.is.elementOrCollection(t)?new e.Selector(t).filter(this):void 0===t?this:new e.Collection(r)},not:function(t){var r=this._private.cy;if(t){e.is.string(t)&&(t=this.filter(t));for(var n=[],i=0;i<this.length;i++){var a=this[i],o=t._private.ids[a.id()];o||n.push(a)}return new e.Collection(r,n)}return this},intersect:function(t){var r=this._private.cy;if(e.is.string(t)){var n=t;return this.filter(n)}for(var i=[],a=this,o=t,s=this.length<t.length,l=s?o._private.ids:a._private.ids,u=s?a:o,c=0;c<u.length;c++){var d=u[c]._private.data.id,f=l[d];f&&i.push(f)}return new e.Collection(r,i)},add:function(t){var r=this._private.cy;if(!t)return this;if(e.is.string(t)){var n=t;t=r.elements(n)}for(var i=[],a=0;a<this.length;a++)i.push(this[a]);for(var a=0;a<t.length;a++){var o=!this._private.ids[t[a].id()];o&&i.push(t[a])}return new e.Collection(r,i)},merge:function(t){var r=this._private,n=r.cy;if(!t)return this;if(e.is.string(t)){var i=t;t=n.elements(i)}for(var a=0;a<t.length;a++){var o=t[a],s=o.id(),l=!r.ids[s];if(l){var u=this.length++;this[u]=o;r.ids[s]=o;r.indexes[s]=u}}return this},unmergeOne:function(e){e=e[0];var t=this._private,r=e.id(),n=t.indexes[r];if(null==n)return this;this[n]=void 0;t.ids[r]=void 0;t.indexes[r]=void 0;var i=n===this.length-1;if(this.length>1&&!i){var a=this.length-1,o=this[a];this[a]=void 0;this[n]=o;t.indexes[o.id()]=n}this.length--;return this},unmerge:function(t){var r=this._private.cy;if(!t)return this;if(e.is.string(t)){var n=t;t=r.elements(n)}for(var i=0;i<t.length;i++)this.unmergeOne(t[i]);return this},map:function(e,t){for(var r=[],n=this,i=0;i<n.length;i++){var a=n[i],o=e.apply(t,[a,i,n]);r.push(o)}return r},stdFilter:function(t,r){for(var n=[],i=this,a=this._private.cy,o=0;o<i.length;o++){var s=i[o],l=t.apply(r,[s,o,i]);l&&n.push(s)}return new e.Collection(a,n)},max:function(e,t){for(var r,n=-1/0,i=this,a=0;a<i.length;a++){var o=i[a],s=e.apply(t,[o,a,i]);if(s>n){n=s;r=o}}return{value:n,ele:r}},min:function(e,t){for(var r,n=1/0,i=this,a=0;a<i.length;a++){var o=i[a],s=e.apply(t,[o,a,i]);if(n>s){n=s;r=o}}return{value:n,ele:r}}})})(n);(function(e){"use strict";e.fn.eles({isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var e=this[0];return e?e._private.group:void 0}})})(n);(function(e){"use strict";e.fn.eles({each:function(t){if(e.is.fn(t))for(var r=0;r<this.length;r++){var n=this[r],i=t.apply(n,[r,n]);if(i===!1)break}return this},forEach:function(t,r){if(e.is.fn(t))for(var n=0;n<this.length;n++){var i=this[n],a=t.apply(r,[i,n,this]);if(a===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(t,r){var n=[],i=this.length;null==r&&(r=i);null==t&&(t=0);0>t&&(t=i+t);0>r&&(r=i+r);for(var a=t;a>=0&&r>a&&i>a;a++)n.push(this[a]);return new e.Collection(this.cy(),n)},size:function(){return this.length},eq:function(t){return this[t]||new e.Collection(this.cy())},first:function(){return this[0]||new e.Collection(this.cy())},last:function(){return this[this.length-1]||new e.Collection(this.cy())},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!e.is.fn(t))return this;var r=this.cy(),n=this.toArray().sort(t);return new e.Collection(r,n)},sortByZIndex:function(){return this.sort(e.Collection.zIndexSort)},zDepth:function(){var e=this[0];if(!e)return void 0;var t=e._private,r=t.group;if("nodes"===r)return t.data.parent?e.parents().size():0;var n=t.source,i=t.target,a=n._private.data.parent?n.parents().size():0,o=i._private.data.parent?i.parents().size():0;return Math.max(a-1,o-1,0)+.5}});e.Collection.zIndexSort=function(e,t){var r=e.cy(),n=e._private,i=t._private,a=n.style["z-index"].value-i.style["z-index"].value,o=0,s=0,l=r.hasCompoundNodes(),u="nodes"===n.group,c="edges"===n.group,d="nodes"===i.group,f="edges"===i.group;if(l){o=e.zDepth();s=t.zDepth()}var p=o-s,h=0===p;return h?u&&f?1:c&&d?-1:0===a?n.index-i.index:a:p}})(n);(function(e){"use strict";e.fn.eles({layoutPositions:function(t,r,n){var i=this.nodes(),a=this.cy();t.trigger({type:"layoutstart",layout:t});if(r.animate){for(var o=0;o<i.length;o++){var s=i[o],l=o===i.length-1,u=n.call(s,o,s),c=s.position();e.is.number(c.x)&&e.is.number(c.y)||s.silentPosition({x:0,y:0});s.animate({position:u},{duration:r.animationDuration,step:l?function(){r.fit&&a.fit(r.padding)}:void 0,complete:l?function(){null!=r.zoom&&a.zoom(r.zoom);r.pan&&a.pan(r.pan);r.fit&&a.fit(r.padding);t.one("layoutstop",r.stop);t.trigger({type:"layoutstop",layout:t})}:void 0})}t.one("layoutready",r.ready);t.trigger({type:"layoutready",layout:t})}else{i.positions(n);r.fit&&a.fit(r.padding);null!=r.zoom&&a.zoom(r.zoom);r.pan&&a.pan(r.pan);t.one("layoutready",r.ready);t.trigger({type:"layoutready",layout:t});t.one("layoutstop",r.stop);t.trigger({type:"layoutstop",layout:t})}return this},layout:function(t){var r=this.cy();r.layout(e.util.extend({},t,{eles:this}));return this},makeLayout:function(t){var r=this.cy();return r.makeLayout(e.util.extend({},t,{eles:this}))}})})(n);(function(e){"use strict";e.fn.eles({updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t._private.batchingStyle){for(var r=t._private.batchStyleEles,n=0;n<this.length;n++){var i=this[n];r.ids[i._private.id]||r.push(i)}return this}var a=t.style();e=e||void 0===e?!0:!1;a.apply(this);var o=this.updateCompoundBounds(),s=o.length>0?this.add(o):this;e?s.rtrigger("style"):s.trigger("style");return this},updateMappers:function(e){var t=this._private.cy,r=t.style();e=e||void 0===e?!0:!1;if(!t.styleEnabled())return this;r.updateMappers(this);var n=this.updateCompoundBounds(),i=n.length>0?this.add(n):this;e?i.rtrigger("style"):i.trigger("style");return this},renderedCss:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=this[0];if(r){var n=r.cy().style().getRenderedStyle(r);return void 0===e?n:n[e]}},css:function(t,r){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,a=n.style();if(e.is.plainObject(t)){var o=t;a.applyBypass(this,o,i);var s=this.updateCompoundBounds(),l=s.length>0?this.add(s):this;l.rtrigger("style")}else if(e.is.string(t)){if(void 0===r){var u=this[0];return u?u._private.style[t].strValue:void 0}a.applyBypass(this,t,r,i);var s=this.updateCompoundBounds(),l=s.length>0?this.add(s):this;l.rtrigger("style")}else if(void 0===t){var u=this[0];return u?a.getRawStyle(u):void 0}return this},removeCss:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=!1,n=t.style(),i=this;if(void 0===e)for(var a=0;a<i.length;a++){var o=i[a];n.removeAllBypasses(o,r)}else{e=e.split(/\s+/);for(var a=0;a<i.length;a++){var o=i[a];n.removeBypasses(o,e,r)}}var s=this.updateCompoundBounds(),l=s.length>0?this.add(s):this;l.rtrigger("style");return this},show:function(){this.css("display","element");return this},hide:function(){this.css("display","none");return this},visible:function(){var e=this.cy();if(!e.styleEnabled())return!0;var t=this[0],r=e.hasCompoundNodes();if(t){var n=t._private.style;if("visible"!==n.visibility.value||"element"!==n.display.value)return!1;if("nodes"===t._private.group){if(!r)return!0;var i=t._private.data.parent?t.parents():null;if(i)for(var a=0;a<i.length;a++){var o=i[a],s=o._private.style,l=s.visibility.value,u=s.display.value;if("visible"!==l||"element"!==u)return!1}return!0}var c=t._private.source,d=t._private.target;return c.visible()&&d.visible()}},hidden:function(){var e=this[0];return e?!e.visible():void 0},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),r=this[0];if(r){var n=r._private,i=n.style.opacity.value;if(!t)return i;var a=n.data.parent?r.parents():null;if(a)for(var o=0;o<a.length;o++){var s=a[o],l=s._private.style.opacity.value;i=l*i}return i}},transparent:function(){var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e._private.style.opacity.value:void 0},isFullAutoParent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];if(t){var r="auto"===t._private.style.width.value,n="auto"===t._private.style.height.value;return t.isParent()&&r&&n}}});e.elesfn.style=e.elesfn.css;e.elesfn.renderedStyle=e.elesfn.renderedCss;e.elesfn.removeStyle=e.elesfn.removeCss})(n);(function(e){"use strict";function t(t){return function(){var r=arguments,n=[];if(2===r.length){var i=r[0],a=r[1];this.bind(t.event,i,a)}else if(1===r.length){var a=r[0];this.bind(t.event,a)}else if(0===r.length){for(var o=0;o<this.length;o++){var s=this[o],l=!t.ableField||s._private[t.ableField],u=s._private[t.field]!=t.value;if(t.overrideAble){var c=t.overrideAble(s);if(void 0!==c){l=c;if(!c)return this}}if(l){s._private[t.field]=t.value;u&&n.push(s)}}var d=e.Collection(this.cy(),n);d.updateStyle();d.trigger(t.event)}return this}}function r(r){e.elesfn[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(void 0!==t)return t}return e._private[r.field]}};e.elesfn[r.on]=t({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0});e.elesfn[r.off]=t({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}r({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});r({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()?!1:void 0},on:"grabify",off:"ungrabify"});r({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});r({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});e.elesfn.grabbed=function(){var e=this[0];return e?e._private.grabbed:void 0};r({field:"active",on:"activate",off:"unactivate"});e.elesfn.inactive=function(){var e=this[0];return e?!e._private.active:void 0}})(n);(function(e){"use strict";function t(t){return function(r){for(var n=[],i=this._private.cy,a=0;a<this.length;a++){var o=this[a],s=o._private[t.attr];s&&n.push(s)}return new e.Collection(i,n,{unique:!0}).filter(r)}}function r(t){return function(r){var n=[],i=this._private.cy,a=t||{};e.is.string(r)&&(r=i.$(r));for(var o=r.connectedEdges(),s=this._private.ids,l=0;l<o.length;l++){var u,c=o[l],d=c._private.data;if(a.thisIs){var f=d[a.thisIs];u=s[f]}else u=s[d.source]||s[d.target];u&&n.push(c)}return new e.Collection(i,n,{unique:!0})}}function n(t){var r={codirected:!1};t=e.util.extend({},r,t);return function(r){for(var n=this._private.cy,i=[],a=this.edges(),o=t,s=0;s<a.length;s++)for(var l=a[s],u=l.source()[0],c=u.id(),d=l.target()[0],f=d.id(),p=u._private.edges,h=0;h<p.length;h++){var v=p[h],g=v._private.data,y=g.target,m=g.source,w=y===f&&m===c,x=c===y&&f===m;(o.codirected&&w||!o.codirected&&(w||x))&&i.push(v)}return new e.Collection(n,i,{unique:!0}).filter(r)}}e.fn.eles({roots:function(t){for(var r=this,n=[],i=0;i<r.length;i++){var a=r[i];if(a.isNode()){var o=a.connectedEdges(function(){return this.data("target")===a.id()&&this.data("source")!==a.id()}).length>0;o||n.push(a)}}return new e.Collection(this._private.cy,n,{unique:!0}).filter(t)},leaves:function(t){for(var r=this,n=[],i=0;i<r.length;i++){var a=r[i];if(a.isNode()){var o=a.connectedEdges(function(){return this.data("source")===a.id()&&this.data("target")!==a.id()}).length>0;o||n.push(a)}}return new e.Collection(this._private.cy,n,{unique:!0}).filter(t)},outgoers:function(t){for(var r=this,n=[],i=0;i<r.length;i++){var a=r[i],o=a.id();if(a.isNode())for(var s=a._private.edges,l=0;l<s.length;l++){var u=s[l],c=u._private.data.source,d=u._private.data.target;if(c===o&&d!==o){n.push(u);n.push(u.target()[0])}}}return new e.Collection(this._private.cy,n,{unique:!0}).filter(t)},successors:function(t){for(var r=this,n=[],i={};;){var a=r.outgoers();if(0===a.length)break;for(var o=!1,s=0;s<a.length;s++){var l=a[s],u=l.id();if(!i[u]){i[u]=!0;n.push(l);o=!0}}if(!o)break;r=a}return new e.Collection(this._private.cy,n,{unique:!0}).filter(t)},incomers:function(t){for(var r=this,n=[],i=0;i<r.length;i++){var a=r[i],o=a.id();if(a.isNode())for(var s=a._private.edges,l=0;l<s.length;l++){var u=s[l],c=u._private.data.source,d=u._private.data.target;if(d===o&&c!==o){n.push(u);n.push(u.source()[0])}}}return new e.Collection(this._private.cy,n,{unique:!0}).filter(t)},predecessors:function(t){for(var r=this,n=[],i={};;){var a=r.incomers();if(0===a.length)break;for(var o=!1,s=0;s<a.length;s++){var l=a[s],u=l.id();if(!i[u]){i[u]=!0;n.push(l);o=!0}}if(!o)break;r=a}return new e.Collection(this._private.cy,n,{unique:!0}).filter(t)}});e.fn.eles({neighborhood:function(t){for(var r=[],n=this._private.cy,i=this.nodes(),a=0;a<i.length;a++)for(var o=i[a],s=o.connectedEdges(),l=0;l<s.length;l++){var u=s[l],c=u.connectedNodes().not(o);c.length>0&&r.push(c[0]);r.push(u[0])}return new e.Collection(n,r,{unique:!0}).filter(t)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});e.fn.eles({source:function(e){var t,r=this[0];r&&(t=r._private.source);return t&&e?t.filter(e):t},target:function(e){var t,r=this[0];r&&(t=r._private.target);return t&&e?t.filter(e):t},sources:t({attr:"source"}),targets:t({attr:"target"})});e.fn.eles({edgesWith:r(),edgesTo:r({thisIs:"source"})});e.fn.eles({connectedEdges:function(t){for(var r=[],n=this._private.cy,i=this,a=0;a<i.length;a++){var o=i[a];if(o.isNode())for(var s=o._private.edges,l=0;l<s.length;l++){var u=s[l];r.push(u)}}return new e.Collection(n,r,{unique:!0}).filter(t)},connectedNodes:function(t){for(var r=[],n=this._private.cy,i=this,a=0;a<i.length;a++){var o=i[a];if(o.isEdge()){r.push(o.source()[0]);r.push(o.target()[0])}}return new e.Collection(n,r,{unique:!0}).filter(t)},parallelEdges:n(),codirectedEdges:n({codirected:!0})})})(n);(function(e){"use strict";e.fn.eles({fit:function(){},center:function(){}})})(n);(function(e){"use strict";e.Minheap=function(t,r,n){return new e.Heap(t,r,e.Heap.minHeapComparator,n)};e.Maxheap=function(t,r,n){return new e.Heap(t,r,e.Heap.maxHeapComparator,n)};e.Heap=function(t,r,n,i){if("undefined"!=typeof n&&"undefined"!=typeof r){"undefined"==typeof i&&(i=e.Heap.idFn);var a,o,s,l=[],u={},c=[],d=0;r=this.getArgumentAsCollection(r,t);s=r.length;for(d=0;s>d;d+=1){l.push(i.call(t,r[d],d,r));a=r[d].id();if(u.hasOwnProperty(a))throw"ERROR: Multiple items with the same id found: "+a;u[a]=d;c.push(a)}this._private={cy:t,heap:l,pointers:u,elements:c,comparator:n,extractor:i,length:s};for(d=Math.floor(s/2);d>=0;d-=1)o=this.heapify(d);return o}};e.Heap.idFn=function(e){return e.id()};e.Heap.minHeapComparator=function(e,t){return e>=t};e.Heap.maxHeapComparator=function(e,t){return t>=e};e.fn.heap=function(t){for(var r in t){var n=t[r];e.Heap.prototype[r]=n}};e.heapfn=e.Heap.prototype;e.heapfn.size=function(){return this._private.length};e.heapfn.getArgumentAsCollection=function(t,r){var n;"undefined"==typeof r&&(r=this._private.cy);if(e.is.elementOrCollection(t))n=t;else{for(var i=[],a=[].concat.apply([],[t]),o=0;o<a.length;o++){var s=a[o],l=r.getElementById(s);l.length>0&&i.push(l)}n=new e.Collection(r,i)}return n};e.heapfn.isHeap=function(){var e,t,r,n,i,a=this._private.heap,o=a.length,s=this._private.comparator;for(e=0;o>e;e+=1){t=2*e+1;r=t+1;n=o>t?s(a[t],a[e]):!0;i=o>r?s(a[r],a[e]):!0;if(!n||!i)return!1}return!0};e.heapfn.heapSwap=function(e,t){var r=this._private.heap,n=this._private.pointers,i=this._private.elements,a=r[e],o=i[e],s=i[e],l=i[t];r[e]=r[t];i[e]=i[t];n[s]=t;n[l]=e;r[t]=a;i[t]=o};e.heapfn.heapify=function(e,t){var r,n,i,a,o,s,l,u=0,c=!1;"undefined"==typeof t&&(t=!0);r=this._private.heap;u=r.length;s=this._private.comparator;n=e;for(;!c;)if(t){i=2*n+1;a=i+1;o=n;u>i&&!s(r[i],r[o])&&(o=i);u>a&&!s(r[a],r[o])&&(o=a);c=o===n;if(!c){this.heapSwap(o,n);n=o}}else{l=Math.floor((n-1)/2);o=n;c=0>l||s(r[o],r[l]);if(!c){this.heapSwap(o,l);n=l}}};e.heapfn.insert=function(e){var t,r,n,i,a,o=this.getArgumentAsCollection(e),s=o.length;for(a=0;s>a;a+=1){t=o[a];r=this._private.heap.length;n=this._private.extractor(t);i=t.id();if(this._private.pointers.hasOwnProperty(i))throw"ERROR: Multiple items with the same id found: "+i;this._private.heap.push(n);this._private.elements.push(i);this._private.pointers[i]=r;this.heapify(r,!1)}this._private.length=this._private.heap.length};e.heapfn.getValueById=function(e){if(this._private.pointers.hasOwnProperty(e)){var t=this._private.pointers[e];return this._private.heap[t]}};e.heapfn.contains=function(e){for(var t=this.getArgumentAsCollection(e),r=0;r<t.length;r+=1){var n=t[r].id();if(!this._private.pointers.hasOwnProperty(n))return!1}return!0};e.heapfn.top=function(){return this._private.length>0?{value:this._private.heap[0],id:this._private.elements[0]}:void 0};e.heapfn.pop=function(){if(this._private.length>0){var e,t,r,n=this.top(),i=this._private.length-1;this.heapSwap(0,i);e=this._private.elements[i];t=this._private.heap[i];r=e;this._private.heap.pop();this._private.elements.pop();this._private.length=this._private.heap.length;this._private.pointers[r]=void 0;this.heapify(0);return n}};e.heapfn.findDirectionHeapify=function(e){var t=Math.floor((e-1)/2),r=this._private.heap,n=0>t||this._private.comparator(r[e],r[t]);this.heapify(e,n)};e.heapfn.edit=function(t,r){for(var n=this.getArgumentAsCollection(t),i=0;i<n.length;i+=1){var a=n[i].id(),o=this._private.pointers[a],s=this._private.heap[o];e.is.number(r)?this._private.heap[o]=r:e.is.fn(r)&&(this._private.heap[o]=r.call(this._private.cy,s,o));this.findDirectionHeapify(o)}};e.heapfn.remove=function(e){for(var t=this.getArgumentAsCollection(e),r=0;r<t.length;r+=1){var n,i,a,o=t[r].id(),s=this._private.pointers[o],l=this._private.length-1;s!==l&&this.heapSwap(s,l);n=this._private.elements[l];i=this._private.heap[l];a=n;this._private.heap.pop();this._private.elements.pop();this._private.length=this._private.heap.length;this._private.pointers[a]=void 0;this.findDirectionHeapify(s)}return i}})(n);(function(e){"use strict";function t(e){t.CANVAS_LAYERS=5;t.SELECT_BOX=0;t.DRAG=2;t.NODE=4;t.TEXTURE_BUFFER=0;t.BUFFER_COUNT=2;this.options=e;this.data={select:[void 0,void 0,void 0,void 0,0],renderer:this,cy:e.cy,container:e.cy.container(),canvases:new Array(t.CANVAS_LAYERS),contexts:new Array(t.CANVAS_LAYERS),canvasNeedsRedraw:new Array(t.CANVAS_LAYERS),bufferCanvases:new Array(t.BUFFER_COUNT),bufferContexts:new Array(t.CANVAS_LAYERS)};this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1};this.timeoutData={panTimeout:null};this.dragData={possibleDragElements:[]};this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]};this.zoomData={freeToZoom:!1,lastPointerX:null};this.redraws=0;this.showFps=e.showFps;this.bindings=[];this.data.canvasContainer=document.createElement("div");var r=this.data.canvasContainer.style;r.position="absolute";r.zIndex="0";r.overflow="hidden";this.data.container.appendChild(this.data.canvasContainer);for(var n=0;n<t.CANVAS_LAYERS;n++){this.data.canvases[n]=document.createElement("canvas");this.data.contexts[n]=this.data.canvases[n].getContext("2d");this.data.canvases[n].style.position="absolute";this.data.canvases[n].setAttribute("data-id","layer"+n);this.data.canvases[n].style.zIndex=String(t.CANVAS_LAYERS-n);this.data.canvasContainer.appendChild(this.data.canvases[n]);this.data.canvasNeedsRedraw[n]=!1}this.data.topCanvas=this.data.canvases[0];this.data.canvases[t.NODE].setAttribute("data-id","layer"+t.NODE+"-node");this.data.canvases[t.SELECT_BOX].setAttribute("data-id","layer"+t.SELECT_BOX+"-selectbox");this.data.canvases[t.DRAG].setAttribute("data-id","layer"+t.DRAG+"-drag");for(var n=0;n<t.BUFFER_COUNT;n++){this.data.bufferCanvases[n]=document.createElement("canvas");this.data.bufferContexts[n]=this.data.bufferCanvases[n].getContext("2d");this.data.bufferCanvases[n].style.position="absolute";this.data.bufferCanvases[n].setAttribute("data-id","buffer"+n);this.data.bufferCanvases[n].style.zIndex=String(-n-1);this.data.bufferCanvases[n].style.visibility="hidden"}this.hideEdgesOnViewport=e.hideEdgesOnViewport;this.hideLabelsOnViewport=e.hideLabelsOnViewport;this.textureOnViewport=e.textureOnViewport;this.wheelSensitivity=e.wheelSensitivity;this.motionBlurEnabled=void 0===e.motionBlur?!0:e.motionBlur;this.forcedPixelRatio=e.pixelRatio;this.motionBlur=!0;this.tapThreshold=e.tapThreshold;this.tapThreshold2=e.tapThreshold*e.tapThreshold;this.tapholdDuration=500;this.load()}t.panOrBoxSelectDelay=400;t.isTouch=e.is.touch();var r="undefined"!=typeof Path2D;t.usePaths=function(){return r};t.prototype.notify=function(r){var n;n=e.is.array(r.type)?r.type:[r.type];for(var i=0;i<n.length;i++){var a=n[i];switch(a){case"destroy":this.destroy();return;case"add":case"remove":case"load":this.updateNodesCache();this.updateEdgesCache();break;case"viewport":this.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;break;case"style":this.updateCachedZSortedEles()}if("load"===a||"resize"===a){this.invalidateContainerClientCoordsCache();this.matchCanvasSize(this.data.container)}}this.data.canvasNeedsRedraw[t.NODE]=!0;this.data.canvasNeedsRedraw[t.DRAG]=!0;this.redraw()};t.prototype.destroy=function(){this.destroyed=!0;for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e],r=t;r.target.removeEventListener(r.event,r.handler,r.useCapture)}this.removeObserver&&this.removeObserver.disconnect();this.labelCalcDiv&&document.body.removeChild(this.labelCalcDiv)};for(var n in e.math)t.prototype[n]=e.math[n];e("renderer","canvas",t)})(n);(function(e){"use strict";var t=e("renderer","canvas"),r=t.prototype,n=t.arrowShapes={};t.arrowShapeHeight=.3;var i=function(e,t,r,n,i,a){var o=r-i/2,s=r+i/2,l=n-a/2,u=n+a/2;return e>=o&&s>=e&&t>=l&&u>=t},a=function(e,t,r,n,i){n=-n;var a=e*Math.cos(n)-t*Math.sin(n),o=e*Math.sin(n)+t*Math.cos(n),s=a*r,l=o*r,u=s+i.x,c=l+i.y;return{x:u,y:c}};n.arrow={_points:[-.15,-.3,0,0,.15,-.3],collide:function(t,r,i,a,o,s,l,u){var c=n.arrow._points;return e.math.pointInsidePolygon(t,r,c,i,a,o,s,l,u)},roughCollide:i,draw:function(e,t,r,i){for(var o=n.arrow._points,s=0;s<o.length/2;s++){var l=a(o[2*s],o[2*s+1],t,r,i);e.lineTo(l.x,l.y)}},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}};n.triangle=n.arrow;n["triangle-backcurve"]={_ctrlPt:[0,-.15],collide:function(t,r,i,a,o,s,l,u){var c=n.triangle._points;return e.math.pointInsidePolygon(t,r,c,i,a,o,s,l,u)},roughCollide:i,draw:function(e,t,r,i){for(var o,s=n.triangle._points,l=0;l<s.length/2;l++){var u=a(s[2*l],s[2*l+1],t,r,i);0===l&&(o=u);e.lineTo(u.x,u.y)}var c=this._ctrlPt,d=a(c[0],c[1],t,r,i);e.quadraticCurveTo(d.x,d.y,o.x,o.y)},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}};n["triangle-tee"]={_points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],_pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,r,i,a,o,s,l,u){var c=n["triangle-tee"]._points,d=n["triangle-tee"]._pointsTee,f=e.math.pointInsidePolygon(t,r,d,i,a,o,s,l,u)||e.math.pointInsidePolygon(t,r,c,i,a,o,s,l,u);return f},roughCollide:i,draw:function(e,t,r,i){for(var o=n["triangle-tee"]._points,s=0;s<o.length/2;s++){var l=a(o[2*s],o[2*s+1],t,r,i);e.lineTo(l.x,l.y)}var u=n["triangle-tee"]._pointsTee,c=a(u[0],u[1],t,r,i);e.moveTo(c.x,c.y);for(var s=0;s<u.length/2;s++){var l=a(u[2*s],u[2*s+1],t,r,i);e.lineTo(l.x,l.y)}},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}};n["half-triangle-overshot"]={_points:[0,-.25,-.5,-.25,.5,.25],leavePathOpen:!0,matchEdgeWidth:!0,collide:function(t,r,n,i,a,o,s,l){var u=this._points;return e.math.pointInsidePolygon(t,r,u,n,i,a,o,s,l)},roughCollide:i,draw:function(e,t,r,n){for(var i=this._points,o=0;o<i.length/2;o++){var s=a(i[2*o],i[2*o+1],t,r,n);e.lineTo(s.x,s.y)}},spacing:function(){return 0
},gap:function(e){return 2*e._private.style.width.pxValue}};n.none={collide:function(){return!1},roughCollide:function(){return!1},draw:function(){},spacing:function(){return 0},gap:function(){return 0}};n.circle={_baseRadius:.15,collide:function(e,t,r,i,a,o,s,l){if(a!=o){var u=(o+l)/(a+l);t/=u;i/=u;return Math.pow(r-e,2)+Math.pow(i-t,2)<=Math.pow((a+l)*n.circle._baseRadius,2)}return Math.pow(r-e,2)+Math.pow(i-t,2)<=Math.pow((a+l)*n.circle._baseRadius,2)},roughCollide:i,draw:function(e,t,r,i){e.arc(i.x,i.y,n.circle._baseRadius*t,0,2*Math.PI,!1)},spacing:function(e){return r.getArrowWidth(e._private.style.width.pxValue)*n.circle._baseRadius},gap:function(e){return 2*e._private.style.width.pxValue}};n.inhibitor={_points:[-.25,0,-.25,-.1,.25,-.1,.25,0],collide:function(t,r,i,a,o,s,l,u){var c=n.inhibitor._points;return e.math.pointInsidePolygon(t,r,c,i,a,o,s,l,u)},roughCollide:i,draw:function(e,t,r,i){for(var o=n.inhibitor._points,s=0;s<o.length/2;s++){var l=a(o[2*s],o[2*s+1],t,r,i);e.lineTo(l.x,l.y)}},spacing:function(){return 1},gap:function(){return 1}};n.tee=n.inhibitor;n.square={_points:[-.15,0,.15,0,.15,-.3,-.15,-.3],collide:function(t,r,i,a,o,s,l,u){var c=n.square._points;return e.math.pointInsidePolygon(t,r,c,i,a,o,s,l,u)},roughCollide:i,draw:function(e,t,r,i){for(var o=n.square._points,s=0;s<o.length/2;s++){var l=a(o[2*s],o[2*s+1],t,r,i);e.lineTo(l.x,l.y)}},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}};n.diamond={_points:[-.15,-.15,0,-.3,.15,-.15,0,0],collide:function(t,r,i,a,o,s,l,u){var c=n.diamond._points;return e.math.pointInsidePolygon(t,r,c,i,a,o,s,l,u)},roughCollide:i,draw:function(e,t,r,i){for(var o=n.diamond._points,s=0;s<o.length/2;s++){var l=a(o[2*s],o[2*s+1],t,r,i);e.lineTo(l.x,l.y)}},spacing:function(){return 0},gap:function(e){return e._private.style.width.pxValue}}})(n);(function(e){"use strict";var t=e("renderer","canvas");t.prototype.getCachedNodes=function(){var e=this.data,t=this.data.cy;null==e.cache&&(e.cache={});null==e.cache.cachedNodes&&(e.cache.cachedNodes=t.nodes());return e.cache.cachedNodes};t.prototype.updateNodesCache=function(){var e=this.data,t=this.data.cy;null==e.cache&&(e.cache={});e.cache.cachedNodes=t.nodes()};t.prototype.getCachedEdges=function(){var e=this.data,t=this.data.cy;null==e.cache&&(e.cache={});null==e.cache.cachedEdges&&(e.cache.cachedEdges=t.edges());return e.cache.cachedEdges};t.prototype.updateEdgesCache=function(){var e=this.data,t=this.data.cy;null==e.cache&&(e.cache={});e.cache.cachedEdges=t.edges()}})(n);(function(e){"use strict";var t=e("renderer","canvas");t.prototype.projectIntoViewport=function(e,t){var r=this.findContainerClientCoords(),n=r[0],i=r[1],a=e-n,o=t-i;a-=this.data.cy.pan().x;o-=this.data.cy.pan().y;a/=this.data.cy.zoom();o/=this.data.cy.zoom();return[a,o]};t.prototype.findContainerClientCoords=function(){var e=this.data.container,t=this.containerBB=this.containerBB||e.getBoundingClientRect();return[t.left,t.top,t.right-t.left,t.bottom-t.top]};t.prototype.invalidateContainerClientCoordsCache=function(){this.containerBB=null};t.prototype.findNearestElement=function(r,n,i){function a(e){var a=e.outerWidth(),o=e.outerHeight(),l=a/2,c=o/2,d=e._private.position;if(d.x-l<=r&&r<=d.x+l&&d.y-c<=n&&n<=d.y+c){var f=!i||e.visible()&&!e.transparent();if(i&&!f)return;var p=t.nodeShapes[s.getNodeShape(e)],v=e._private.style["border-width"].pxValue/2;p.checkPoint(r,n,v,a+h,o+h,d.x,d.y)&&u.push(e)}}function o(o){var l,c=o._private.rscratch,d=o._private.style,h=d.width.pxValue,v=h*h,g=2*h,y=o._private.source,m=o._private.target,w=!1,x=function(){if(void 0!==l)return l;if(!i){l=!0;return!0}var e=o.visible()&&!o.transparent();if(e){l=!0;return!0}l=!1;return!1};if("self"===c.edgeType||"compound"===c.edgeType)((w=e.math.inBezierVicinity(r,n,c.startX,c.startY,c.cp2ax,c.cp2ay,c.selfEdgeMidX,c.selfEdgeMidY,v))&&x()&&v+p>e.math.sqDistanceToQuadraticBezier(r,n,c.startX,c.startY,c.cp2ax,c.cp2ay,c.selfEdgeMidX,c.selfEdgeMidY)||(w=e.math.inBezierVicinity(r,n,c.selfEdgeMidX,c.selfEdgeMidY,c.cp2cx,c.cp2cy,c.endX,c.endY,v))&&x()&&v+p>e.math.sqDistanceToQuadraticBezier(r,n,c.selfEdgeMidX,c.selfEdgeMidY,c.cp2cx,c.cp2cy,c.endX,c.endY))&&u.push(o);else if("haystack"===c.edgeType){var b=d["haystack-radius"].value,_=b/2,k=m._private.position,C=m.width(),E=m.height(),S=y._private.position,T=y.width(),D=y.height(),P=S.x+c.source.x*T*_,N=S.y+c.source.y*D*_,M=k.x+c.target.x*C*_,j=k.y+c.target.y*E*_;(w=e.math.inLineVicinity(r,n,P,N,M,j,g))&&x()&&v+p>e.math.sqDistanceToFiniteLine(r,n,P,N,M,j)&&u.push(o)}else"straight"===c.edgeType?(w=e.math.inLineVicinity(r,n,c.startX,c.startY,c.endX,c.endY,g))&&x()&&v+p>e.math.sqDistanceToFiniteLine(r,n,c.startX,c.startY,c.endX,c.endY)&&u.push(o):"bezier"===c.edgeType&&(w=e.math.inBezierVicinity(r,n,c.startX,c.startY,c.cp2x,c.cp2y,c.endX,c.endY,v))&&x()&&v+p>e.math.sqDistanceToQuadraticBezier(r,n,c.startX,c.startY,c.cp2x,c.cp2y,c.endX,c.endY)&&u.push(o);if(w&&x()&&0===u.length||u[u.length-1]!==o){var L=t.arrowShapes[d["source-arrow-shape"].value],I=t.arrowShapes[d["target-arrow-shape"].value],y=y||o._private.source,m=m||o._private.target,k=m._private.position,S=y._private.position,R=s.getArrowWidth(d.width.pxValue),A=s.getArrowHeight(d.width.pxValue),O=R,z=A;(L.roughCollide(r,n,c.arrowStartX,c.arrowStartY,R,A,[c.arrowStartX-S.x,c.arrowStartY-S.y],0)&&L.collide(r,n,c.arrowStartX,c.arrowStartY,R,A,[c.arrowStartX-S.x,c.arrowStartY-S.y],0)||I.roughCollide(r,n,c.arrowEndX,c.arrowEndY,O,z,[c.arrowEndX-k.x,c.arrowEndY-k.y],0)&&I.collide(r,n,c.arrowEndX,c.arrowEndY,O,z,[c.arrowEndX-k.x,c.arrowEndY-k.y],0))&&u.push(o)}if(f&&u.length>0&&u[u.length-1]===o){a(y);a(m)}}for(var s=this,l=this.getCachedZSortedEles(),u=[],c=t.isTouch,d=this.data.cy.zoom(),f=this.data.cy.hasCompoundNodes(),p=(c?256:32)/d,h=(c?16:0)/d,v=l.length-1;v>=0;v--){var g=l[v];if(u.length>0)break;"nodes"===g._private.group?a(l[v]):o(l[v])}return u.length>0?u[u.length-1]:null};t.prototype.getAllInBox=function(r,n,i,a){var o=this.getCachedNodes(),s=this.getCachedEdges(),l=[],u=Math.min(r,i),c=Math.max(r,i),d=Math.min(n,a),f=Math.max(n,a);r=u;i=c;n=d;a=f;for(var p,h=0;h<o.length;h++){var v=o[h]._private.position,g=this.getNodeShape(o[h]),y=this.getNodeWidth(o[h]),m=this.getNodeHeight(o[h]),w=o[h]._private.style["border-width"].pxValue/2,x=t.nodeShapes[g];x.intersectBox(r,n,i,a,y,m,v.x,v.y,w)&&l.push(o[h])}for(var h=0;h<s.length;h++){var b=s[h]._private.rscratch;"self"==s[h]._private.rscratch.edgeType&&((p=e.math.boxInBezierVicinity(r,n,i,a,b.startX,b.startY,b.cp2ax,b.cp2ay,b.endX,b.endY,s[h]._private.style.width.pxValue))&&(2==p||1==p&&e.math.checkBezierInBox(r,n,i,a,b.startX,b.startY,b.cp2ax,b.cp2ay,b.endX,b.endY,s[h]._private.style.width.pxValue))||(p=e.math.boxInBezierVicinity(r,n,i,a,b.startX,b.startY,b.cp2cx,b.cp2cy,b.endX,b.endY,s[h]._private.style.width.pxValue))&&(2==p||1==p&&e.math.checkBezierInBox(r,n,i,a,b.startX,b.startY,b.cp2cx,b.cp2cy,b.endX,b.endY,s[h]._private.style.width.pxValue)))&&l.push(s[h]);"bezier"==b.edgeType&&(p=e.math.boxInBezierVicinity(r,n,i,a,b.startX,b.startY,b.cp2x,b.cp2y,b.endX,b.endY,s[h]._private.style.width.pxValue))&&(2==p||1==p&&e.math.checkBezierInBox(r,n,i,a,b.startX,b.startY,b.cp2x,b.cp2y,b.endX,b.endY,s[h]._private.style.width.pxValue))&&l.push(s[h]);"straight"==b.edgeType&&(p=e.math.boxInBezierVicinity(r,n,i,a,b.startX,b.startY,.5*b.startX+.5*b.endX,.5*b.startY+.5*b.endY,b.endX,b.endY,s[h]._private.style.width.pxValue))&&(2==p||1==p&&e.math.checkStraightEdgeInBox(r,n,i,a,b.startX,b.startY,b.endX,b.endY,s[h]._private.style.width.pxValue))&&l.push(s[h]);if("haystack"==b.edgeType){var _=s[h].target()[0],k=_.position(),C=s[h].source()[0],E=C.position(),S=E.x+b.source.x,T=E.y+b.source.y,D=k.x+b.target.x,P=k.y+b.target.y,N=S>=r&&i>=S&&T>=n&&a>=T,M=D>=r&&i>=D&&P>=n&&a>=P;N&&M&&l.push(s[h])}}return l};t.prototype.getNodeWidth=function(e){return e.width()};t.prototype.getNodeHeight=function(e){return e.height()};t.prototype.getNodeShape=function(e){var t=e._private.style.shape.value;return e.isParent()?"rectangle"===t||"roundrectangle"===t?t:"rectangle":t};t.prototype.getNodePadding=function(e){var t=e._private.style["padding-left"].pxValue,r=e._private.style["padding-right"].pxValue,n=e._private.style["padding-top"].pxValue,i=e._private.style["padding-bottom"].pxValue;isNaN(t)&&(t=0);isNaN(r)&&(r=0);isNaN(n)&&(n=0);isNaN(i)&&(i=0);return{left:t,right:r,top:n,bottom:i}};t.prototype.zOrderSort=e.Collection.zIndexSort;t.prototype.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)};t.prototype.getCachedZSortedEles=function(e){var t=this.lastZOrderCachedNodes,r=this.lastZOrderCachedEdges,n=this.getCachedNodes(),i=this.getCachedEdges(),a=[];if(!e&&t&&r&&t===n&&r===i)a=this.cachedZSortedEles;else{for(var o=0;o<n.length;o++)n[o].visible()&&!n[o].transparent()&&a.push(n[o]);for(var o=0;o<i.length;o++)i[o].visible()&&!i[o].transparent()&&a.push(i[o]);a.sort(this.zOrderSort);this.cachedZSortedEles=a}this.lastZOrderCachedNodes=n;this.lastZOrderCachedEdges=i;return a};t.prototype.projectBezier=function(t){function r(e){a.push({x:n(e[0],e[2],e[4],.05),y:n(e[1],e[3],e[5],.05)});a.push({x:n(e[0],e[2],e[4],.25),y:n(e[1],e[3],e[5],.25)});a.push({x:n(e[0],e[2],e[4],.4),y:n(e[1],e[3],e[5],.4)});var t={x:n(e[0],e[2],e[4],.5),y:n(e[1],e[3],e[5],.5)};a.push(t);if("self"===i.edgeType||"compound"===i.edgeType){i.midX=i.selfEdgeMidX;i.midY=i.selfEdgeMidY}else{i.midX=t.x;i.midY=t.y}a.push({x:n(e[0],e[2],e[4],.6),y:n(e[1],e[3],e[5],.6)});a.push({x:n(e[0],e[2],e[4],.75),y:n(e[1],e[3],e[5],.75)});a.push({x:n(e[0],e[2],e[4],.95),y:n(e[1],e[3],e[5],.95)})}var n=e.math.qbezierAt,i=t._private.rscratch,a=t._private.rstyle.bezierPts=[];if("self"===i.edgeType){r([i.startX,i.startY,i.cp2ax,i.cp2ay,i.selfEdgeMidX,i.selfEdgeMidY]);r([i.selfEdgeMidX,i.selfEdgeMidY,i.cp2cx,i.cp2cy,i.endX,i.endY])}else"bezier"===i.edgeType&&r([i.startX,i.startY,i.cp2x,i.cp2y,i.endX,i.endY])};t.prototype.recalculateNodeLabelProjection=function(e){var t=e._private.style.content.strValue;if(t&&!t.match(/^\s+$/)){var r,n,i=e.outerWidth(),a=e.outerHeight(),o=e._private.position,s=e._private.style["text-halign"].strValue,l=e._private.style["text-valign"].strValue,u=e._private.rscratch,c=e._private.rstyle;switch(s){case"left":r=o.x-i/2;break;case"right":r=o.x+i/2;break;default:r=o.x}switch(l){case"top":n=o.y-a/2;break;case"bottom":n=o.y+a/2;break;default:n=o.y}u.labelX=r;u.labelY=n;c.labelX=r;c.labelY=n;this.applyLabelDimensions(e)}};t.prototype.recalculateEdgeLabelProjection=function(t){var r=t._private.style.content.strValue;if(r&&!r.match(/^\s+$/)){var n,i,a,o,s=t._private.rscratch,l=t._private.rstyle;if("self"==s.edgeType){a=s.selfEdgeMidX;o=s.selfEdgeMidY}else if("straight"==s.edgeType){a=(s.startX+s.endX)/2;o=(s.startY+s.endY)/2}else if("bezier"==s.edgeType){a=e.math.qbezierAt(s.startX,s.cp2x,s.endX,.5);o=e.math.qbezierAt(s.startY,s.cp2y,s.endY,.5)}else if("haystack"==s.edgeType){var u=t._private.source._private.position,c=t._private.target._private.position;a=(u.x+s.source.x+c.x+s.target.x)/2;o=(u.y+s.source.y+c.y+s.target.y)/2}n=a;i=o;s.labelX=n;s.labelY=i;l.labelX=n;l.labelY=i;this.applyLabelDimensions(t)}};t.prototype.applyLabelDimensions=function(e){var t=e._private.rscratch,r=e._private.rstyle,n=this.getLabelText(e),i=this.calculateLabelDimensions(e,n);r.labelWidth=i.width;t.labelWidth=i.width;r.labelHeight=i.height;t.labelHeight=i.height};t.prototype.getLabelText=function(e){var t=e._private.style,r=e._private.style.content.strValue,n=t["text-transform"].value;"none"==n||("uppercase"==n?r=r.toUpperCase():"lowercase"==n&&(r=r.toLowerCase()));return r};t.prototype.calculateLabelDimensions=function(e,t){var r=this,n=e._private.style,i=n["font-style"].strValue,a=n["font-size"].pxValue+"px",o=n["font-family"].strValue,s=n["font-weight"].strValue,l=e._private.labelKey,u=r.labelDimCache||(r.labelDimCache={});if(u[l])return u[l];var c=this.labelCalcDiv;if(!c){c=this.labelCalcDiv=document.createElement("div");document.body.appendChild(c)}var d=c.style;d.fontFamily=o;d.fontStyle=i;d.fontSize=a;d.fontWeight=s;d.position="absolute";d.left="-9999px";d.top="-9999px";d.zIndex="-1";d.visibility="hidden";d.pointerEvents="none";d.padding="0";d.lineHeight="1";c.textContent=t;u[l]={width:c.clientWidth,height:c.clientHeight};return u[l]};t.prototype.recalculateRenderedStyle=function(e){for(var t=[],r=[],n={},i=0;i<e.length;i++){var a=e[i],o=a._private,s=o.rscratch,l=o.rstyle,u=o.data.id,c=null!=s.boundingBoxKey&&o.boundingBoxKey===s.boundingBoxKey,d=null!=s.labelKey&&o.labelKey===s.labelKey,f=c&&d;if("nodes"===a._private.group){var p=o.position,h=null!=l.nodeX&&null!=l.nodeY&&p.x===l.nodeX&&p.y===l.nodeY;h&&f||r.push(a);l.nodeX=p.x;l.nodeY=p.y}else{var v=a._private.source._private.position,g=a._private.target._private.position,y=null!=l.srcX&&null!=l.srcY&&v.x===l.srcX&&v.y===l.srcY,m=null!=l.tgtX&&null!=l.tgtY&&g.x===l.tgtX&&g.y===l.tgtY,w=y&&m;if(!w||!f){var x=o.style["curve-style"].value;if("bezier"===x){if(!n[u]){t.push(a);n[u]=!0;for(var b=a.parallelEdges(),i=0;i<b.length;i++){var _=b[i],k=_._private.data.id;if(!n[k]){t.push(_);n[k]=!0}}}}else t.push(a)}l.srcX=v.x;l.srcY=v.y;l.tgtX=g.x;l.tgtY=g.y}s.boundingBoxKey=o.boundingBoxKey;s.labelKey=o.labelKey}this.recalculateEdgeProjections(t);this.recalculateLabelProjections(r,t)};t.prototype.recalculateLabelProjections=function(e,t){for(var r=0;r<e.length;r++)this.recalculateNodeLabelProjection(e[r]);for(var r=0;r<t.length;r++)this.recalculateEdgeLabelProjection(t[r])};t.prototype.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};t.prototype.findEdgeControlPoints=function(r){if(r&&0!==r.length){for(var n,i=this.data.cy,a=i.hasCompoundNodes(),o={},s=[],l=[],u=0;u<r.length;u++){var c=r[u],d=c._private.style,f="unbundled-bezier"===d["curve-style"].value;if("none"!==d.display.value)if("haystack"!==d["curve-style"].value){var p=c._private.data.source,h=c._private.data.target;n=p>h?h+"-"+p:p+"-"+h;f&&(n="unbundled"+c._private.data.id);if(null==o[n]){o[n]=[];s.push(n)}o[n].push(c);f&&(o[n].hasUnbundled=!0)}else l.push(c)}for(var v,g,y,m,w,x,b,_,k,C,E,S,T,D,P=0;P<s.length;P++){n=s[P];var N=o[n];N.sort(function(e,t){return e._private.index-t._private.index});v=N[0]._private.source;g=N[0]._private.target;if(v._private.data.id>g._private.data.id){var M=v;v=g;g=M}y=v._private.position;m=g._private.position;w=this.getNodeWidth(v);x=this.getNodeHeight(v);b=this.getNodeWidth(g);_=this.getNodeHeight(g);k=t.nodeShapes[this.getNodeShape(v)];C=t.nodeShapes[this.getNodeShape(g)];E=v._private.style["border-width"].pxValue;S=g._private.style["border-width"].pxValue;D=!1;if(N.length>1&&v!==g||N.hasUnbundled){var j=k.intersectLine(y.x,y.y,w,x,m.x,m.y,E/2),L=C.intersectLine(m.x,m.y,b,_,y.x,y.y,S/2),I={x1:j[0],x2:L[0],y1:j[1],y2:L[1]},R=L[1]-j[1],A=L[0]-j[0],O=Math.sqrt(A*A+R*R),z={x:A,y:R},B={x:z.x/O,y:z.y/O};T={x:-B.y,y:B.x};if(C.checkPoint(j[0],j[1],S/2,b,_,m.x,m.y)||k.checkPoint(L[0],L[1],E/2,w,x,y.x,y.y)){T={};D=!0}}for(var c,V,u=0;u<N.length;u++){c=N[u];V=c._private.rscratch;var q=V.lastEdgeIndex,X=u,F=V.lastNumEdges,Y=N.length,W=c._private.style,U=W["control-point-step-size"].pxValue,H=void 0!==W["control-point-distance"]?W["control-point-distance"].pxValue:void 0,$=W["control-point-weight"].value,f="unbundled-bezier"===W["curve-style"].value,G=V.lastSrcCtlPtX,Z=y.x,Q=V.lastSrcCtlPtY,J=y.y,K=V.lastSrcCtlPtW,et=v.outerWidth(),tt=V.lastSrcCtlPtH,rt=v.outerHeight(),nt=V.lastTgtCtlPtX,it=m.x,at=V.lastTgtCtlPtY,ot=m.y,st=V.lastTgtCtlPtW,lt=g.outerWidth(),ut=V.lastTgtCtlPtH,ct=g.outerHeight(),dt=V.lastW,ft=W["control-point-step-size"].pxValue;V.badBezier=D?!0:!1;if(G!==Z||Q!==J||K!==et||tt!==rt||nt!==it||at!==ot||st!==lt||ut!==ct||dt!==ft||!(q===X&&F===Y||f)){V.lastSrcCtlPtX=Z;V.lastSrcCtlPtY=J;V.lastSrcCtlPtW=et;V.lastSrcCtlPtH=rt;V.lastTgtCtlPtX=it;V.lastTgtCtlPtY=ot;V.lastTgtCtlPtW=lt;V.lastTgtCtlPtH=ct;V.lastEdgeIndex=X;V.lastNumEdges=Y;V.lastWidth=ft;if(v===g){V.edgeType="self";var pt=u,ht=U;if(f){pt=0;ht=H}V.cp2ax=y.x;V.cp2ay=y.y-(1+Math.pow(x,1.12)/100)*ht*(pt/3+1);V.cp2cx=y.x-(1+Math.pow(w,1.12)/100)*ht*(pt/3+1);V.cp2cy=y.y;V.selfEdgeMidX=(V.cp2ax+V.cp2cx)/2;V.selfEdgeMidY=(V.cp2ay+V.cp2cy)/2}else if(a&&(v.isParent()||v.isChild()||g.isParent()||g.isChild())&&(v.parents().anySame(g)||g.parents().anySame(v))){V.edgeType="compound";V.badBezier=!1;var pt=u,ht=U;if(f){pt=0;ht=H}var vt=50,gt={x:y.x-w/2,y:y.y-x/2},yt={x:m.x-b/2,y:m.y-_/2},mt=1;V.cp2ax=gt.x;V.compoundStretchA=Math.max(mt,Math.log(.01*w));V.cp2ay=gt.y-(1+Math.pow(vt,1.12)/100)*ht*(pt/3+1)*V.compoundStretchA;V.compoundStretchB=Math.max(mt,Math.log(.01*b));V.cp2cx=yt.x-(1+Math.pow(vt,1.12)/100)*ht*(pt/3+1)*V.compoundStretchB;V.cp2cy=yt.y;V.selfEdgeMidX=(V.cp2ax+V.cp2cx)/2;V.selfEdgeMidY=(V.cp2ay+V.cp2cy)/2}else if(N.length%2!==1||u!==Math.floor(N.length/2)||f){var wt,xt=(.5-N.length/2+u)*U,bt=e.math.signum(xt);wt=f?H:void 0!==H?bt*H:void 0;var _t=void 0!==wt?wt:xt,kt=1-$,Ct=$,Et=c._private.source!==v;if(Et){kt=$;Ct=1-$}var St={x:I.x1*kt+I.x2*Ct,y:I.y1*kt+I.y2*Ct};V.edgeType="bezier";V.cp2x=St.x+T.x*_t;V.cp2y=St.y+T.y*_t}else V.edgeType="straight";this.findEndpoints(c);var Tt=!e.is.number(V.startX)||!e.is.number(V.startY),Dt=!e.is.number(V.arrowStartX)||!e.is.number(V.arrowStartY),Pt=!e.is.number(V.endX)||!e.is.number(V.endY),Nt=!e.is.number(V.arrowEndX)||!e.is.number(V.arrowEndY),Mt=3,jt=this.getArrowWidth(c._private.style.width.pxValue)*t.arrowShapeHeight,Lt=Mt*jt,It=e.math.distance({x:V.cp2x,y:V.cp2y},{x:V.startX,y:V.startY}),Rt=Lt>It,At=e.math.distance({x:V.cp2x,y:V.cp2y},{x:V.endX,y:V.endY}),Ot=Lt>At;if("bezier"===V.edgeType){var zt=!1;if(Tt||Dt||Rt){zt=!0;var Bt={x:V.cp2x-y.x,y:V.cp2y-y.y},Vt=Math.sqrt(Bt.x*Bt.x+Bt.y*Bt.y),qt={x:Bt.x/Vt,y:Bt.y/Vt},Xt=Math.max(w,x),Ft={x:V.cp2x+2*qt.x*Xt,y:V.cp2y+2*qt.y*Xt},Yt=k.intersectLine(y.x,y.y,w,x,Ft.x,Ft.y,E/2);if(Rt){V.cp2x=V.cp2x+qt.x*(Lt-It);V.cp2y=V.cp2y+qt.y*(Lt-It)}else{V.cp2x=Yt[0]+qt.x*Lt;V.cp2y=Yt[1]+qt.y*Lt}}if(Pt||Nt||Ot){zt=!0;var Bt={x:V.cp2x-m.x,y:V.cp2y-m.y},Vt=Math.sqrt(Bt.x*Bt.x+Bt.y*Bt.y),qt={x:Bt.x/Vt,y:Bt.y/Vt},Xt=Math.max(w,x),Ft={x:V.cp2x+2*qt.x*Xt,y:V.cp2y+2*qt.y*Xt},Wt=C.intersectLine(m.x,m.y,b,_,Ft.x,Ft.y,S/2);if(Ot){V.cp2x=V.cp2x+qt.x*(Lt-At);V.cp2y=V.cp2y+qt.y*(Lt-At)}else{V.cp2x=Wt[0]+qt.x*Lt;V.cp2y=Wt[1]+qt.y*Lt}}zt&&this.findEndpoints(c)}else if("straight"===V.edgeType){V.midX=(Z+it)/2;V.midY=(J+ot)/2}this.projectBezier(c)}}}for(var u=0;u<l.length;u++){var c=l[u],Ut=c._private.rscratch;if(!Ut.haystack){var Ht=2*Math.random()*Math.PI;Ut.source={x:Math.cos(Ht),y:Math.sin(Ht)};var Ht=2*Math.random()*Math.PI;Ut.target={x:Math.cos(Ht),y:Math.sin(Ht)}}Ut.edgeType="haystack";Ut.haystack=!0}return o}};t.prototype.findEndpoints=function(r){var n,i=r.source()[0],a=r.target()[0],o=r._private.style["target-arrow-shape"].value,s=r._private.style["source-arrow-shape"].value,l=a._private.style["border-width"].pxValue,u=i._private.style["border-width"].pxValue,c=r._private.rscratch;if("self"==c.edgeType||"compound"==c.edgeType){var d=[c.cp2cx,c.cp2cy];n=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),d[0],d[1],l/2);var f=e.math.shortenIntersection(n,d,t.arrowShapes[o].spacing(r)),p=e.math.shortenIntersection(n,d,t.arrowShapes[o].gap(r));c.endX=p[0];c.endY=p[1];c.arrowEndX=f[0];c.arrowEndY=f[1];var d=[c.cp2ax,c.cp2ay];n=t.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),d[0],d[1],u/2);var h=e.math.shortenIntersection(n,d,t.arrowShapes[s].spacing(r)),v=e.math.shortenIntersection(n,d,t.arrowShapes[s].gap(r));c.startX=v[0];c.startY=v[1];c.arrowStartX=h[0];c.arrowStartY=h[1]}else if("straight"==c.edgeType){n=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),i.position().x,i.position().y,l/2);c.noArrowPlacement=0===n.length?!0:!1;var f=e.math.shortenIntersection(n,[i.position().x,i.position().y],t.arrowShapes[o].spacing(r)),p=e.math.shortenIntersection(n,[i.position().x,i.position().y],t.arrowShapes[o].gap(r));c.endX=p[0];c.endY=p[1];c.arrowEndX=f[0];c.arrowEndY=f[1];n=t.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),a.position().x,a.position().y,u/2);c.noArrowPlacement=0===n.length?!0:!1;var h=e.math.shortenIntersection(n,[a.position().x,a.position().y],t.arrowShapes[s].spacing(r)),v=e.math.shortenIntersection(n,[a.position().x,a.position().y],t.arrowShapes[s].gap(r));c.startX=v[0];c.startY=v[1];c.arrowStartX=h[0];c.arrowStartY=h[1]}else if("bezier"==c.edgeType){var d=[c.cp2x,c.cp2y];n=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),d[0],d[1],l/2);var f=e.math.shortenIntersection(n,d,t.arrowShapes[o].spacing(r)),p=e.math.shortenIntersection(n,d,t.arrowShapes[o].gap(r));c.endX=p[0];c.endY=p[1];c.arrowEndX=f[0];c.arrowEndY=f[1];n=t.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),d[0],d[1],u/2);var h=e.math.shortenIntersection(n,d,t.arrowShapes[s].spacing(r)),v=e.math.shortenIntersection(n,d,t.arrowShapes[s].gap(r));c.startX=v[0];c.startY=v[1];c.arrowStartX=h[0];c.arrowStartY=h[1]}else if(c.isArcEdge)return};t.prototype.findEdges=function(e){for(var t=this.getCachedEdges(),r={},n=[],i=0;i<e.length;i++)r[e[i]._private.data.id]=e[i];for(var i=0;i<t.length;i++)(r[t[i]._private.data.source]||r[t[i]._private.data.target])&&n.push(t[i]);return n};t.prototype.getArrowWidth=t.prototype.getArrowHeight=function(e){var t=this.arrowWidthCache=this.arrowWidthCache||{},r=t[e];if(r)return r;r=Math.max(Math.pow(13.37*e,.9),29);t[e]=r;return r}})(n);(function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawEdge=function(e,r,n){var i=r._private.rscratch,a=t.usePaths();if(!i.badBezier&&("bezier"!==i.edgeType&&"straight"!==i.edgeType||!isNaN(i.startX))){var o=r._private.style;if(!(o.width.pxValue<=0)){var s=o["overlay-padding"].pxValue,l=o["overlay-opacity"].value,u=o["overlay-color"].value;if(n){if(0===l)return;this.strokeStyle(e,u[0],u[1],u[2],l);e.lineCap="round";"self"!=r._private.rscratch.edgeType||a||(e.lineCap="butt")}else{var c=o["line-color"].value;this.strokeStyle(e,c[0],c[1],c[2],o.opacity.value);e.lineCap="butt"}var d,f,p,h;p=d=r._private.source;h=f=r._private.target;var v=h._private.position,g=h.width(),y=h.height(),m=p._private.position,w=p.width(),x=p.height(),b=o.width.pxValue+(n?2*s:0),_=n?"solid":o["line-style"].value;e.lineWidth=b;"haystack"!==i.edgeType;if("haystack"===i.edgeType){var k=o["haystack-radius"].value,C=k/2;this.drawStyledEdge(r,e,i.haystackPts=[i.source.x*w*C+m.x,i.source.y*x*C+m.y,i.target.x*g*C+v.x,i.target.y*y*C+v.y],_,b)}else if("self"===i.edgeType||"compound"===i.edgeType){var E=r._private.rscratch,S=[E.startX,E.startY,E.cp2ax,E.cp2ay,E.selfEdgeMidX,E.selfEdgeMidY,E.selfEdgeMidX,E.selfEdgeMidY,E.cp2cx,E.cp2cy,E.endX,E.endY];this.drawStyledEdge(r,e,S,_,b)}else if("straight"===i.edgeType){var T=f._private.position.x-d._private.position.x,D=f._private.position.y-d._private.position.y,P=i.endX-i.startX,N=i.endY-i.startY;if(0>T*P+D*N)i.straightEdgeTooShort=!0;else{var E=i;this.drawStyledEdge(r,e,[E.startX,E.startY,E.endX,E.endY],_,b);i.straightEdgeTooShort=!1}}else{var E=i;this.drawStyledEdge(r,e,[E.startX,E.startY,E.cp2x,E.cp2y,E.endX,E.endY],_,b)}"haystack"===i.edgeType?this.drawArrowheads(e,r,n):i.noArrowPlacement!==!0&&void 0!==i.startX&&this.drawArrowheads(e,r,n)}}};t.prototype.drawStyledEdge=function(e,r,n,i){var a,o=e._private.rscratch,s=r,l=!1,u=t.usePaths();if(u){for(var c=n,d=o.pathCacheKey&&c.length===o.pathCacheKey.length,f=d,p=0;f&&p<c.length;p++)o.pathCacheKey[p]!==c[p]&&(f=!1);if(f){a=r=o.pathCache;l=!0}else{a=r=new Path2D;o.pathCacheKey=c;o.pathCache=a}}if(s.setLineDash)switch(i){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash([6,3]);break;case"solid":s.setLineDash([])}if(!l){r.beginPath&&r.beginPath();r.moveTo(n[0],n[1]);if(6===n.length)r.quadraticCurveTo(n[2],n[3],n[4],n[5]);else if(12===n.length){r.quadraticCurveTo(n[2],n[3],n[4],n[5]);r.quadraticCurveTo(n[8],n[9],n[10],n[11])}else r.lineTo(n[2],n[3])}r=s;u?r.stroke(a):r.stroke();r.setLineDash&&r.setLineDash([])};t.prototype.drawArrowheads=function(e,t,r){function n(r,n,i,a,o){var s=v[r+"-arrow-shape"].value;if("none"!==s){var l=e.globalCompositeOperation;e.globalCompositeOperation="destination-out";d.fillStyle(e,255,255,255,1);var u="hollow"===v[r+"-arrow-fill"].value?"both":"filled",c=v[r+"-arrow-fill"].value;if("half-triangle-overshot"===s){c="hollow";u="hollow"}d.drawArrowShape(t,r,e,u,v.width.pxValue,v[r+"-arrow-shape"].value,n,i,a,o);e.globalCompositeOperation=l;var f=v[r+"-arrow-color"].value;d.fillStyle(e,f[0],f[1],f[2],v.opacity.value);d.drawArrowShape(t,r,e,c,v.width.pxValue,v[r+"-arrow-shape"].value,n,i,a,o)}}if(!r){var i,a,o,s,l,u,c=t._private.rscratch,d=this,f="haystack"===c.edgeType,p=t.source().position(),h=t.target().position();if(f){o=c.haystackPts[0];s=c.haystackPts[1];l=c.haystackPts[2];u=c.haystackPts[3]}else{o=c.arrowStartX;s=c.arrowStartY;l=c.arrowEndX;u=c.arrowEndY}var v=t._private.style;i=o-p.x;a=s-p.y;f||isNaN(o)||isNaN(s)||isNaN(i)||isNaN(a)||n("source",o,s,i,a);var g=c.midX,y=c.midY;if(f){g=(o+l)/2;y=(s+u)/2}i=o-l;a=s-u;if("self"===c.edgeType){i=1;a=-1}isNaN(g)||isNaN(y)||n("mid-target",g,y,i,a);i*=-1;a*=-1;isNaN(g)||isNaN(y)||n("mid-source",g,y,i,a);i=l-h.x;a=u-h.y;f||isNaN(l)||isNaN(u)||isNaN(i)||isNaN(a)||n("target",l,u,i,a)}};t.prototype.drawArrowShape=function(e,r,n,i,a,o,s,l,u,c){var d,f=t.usePaths(),p=e._private.rscratch,h=!1,v=n,g={x:s,y:l},y=Math.asin(c/Math.sqrt(u*u+c*c));0>u?y+=Math.PI/2:y=-(Math.PI/2+y);var m=this.getArrowWidth(a),w=t.arrowShapes[o];if(f){var x=m+"$"+o+"$"+y+"$"+s+"$"+l;p.arrowPathCacheKey=p.arrowPathCacheKey||{};p.arrowPathCache=p.arrowPathCache||{};var b=p.arrowPathCacheKey[r]===x;if(b){d=n=p.arrowPathCache[r];h=!0}else{d=n=new Path2D;p.arrowPathCacheKey[r]=x;p.arrowPathCache[r]=d}}n.beginPath&&n.beginPath();h||w.draw(n,m,y,g);!w.leavePathOpen&&n.closePath&&n.closePath();n=v;("filled"===i||"both"===i)&&(f?n.fill(d):n.fill());if("hollow"===i||"both"===i){n.lineWidth=w.matchEdgeWidth?a:1;n.lineJoin="miter";f?n.stroke(d):n.stroke()}}})(n);(function(e){"use strict";var t=e("renderer","canvas");t.prototype.getCachedImage=function(e,t){var r=this,n=r.imageCache=r.imageCache||{};if(n[e]&&n[e].image)return n[e].image;var i=n[e]=n[e]||{},a=i.image=new Image;a.addEventListener("load",t);a.src=e;return a};t.prototype.drawInscribedImage=function(e,r,n){var i=this,a=n._private.position.x,o=n._private.position.y,s=n._private.style,l=s["background-fit"].value,u=s["background-position-x"],c=s["background-position-y"],d=s["background-repeat"].value,f=n.width(),p=n.height(),h=n._private.rscratch,v=s["background-clip"].value,g="node"===v,y=s["background-image-opacity"].value,m=r.width,w=r.height;if(0!==m&&0!==w){if("contain"===l){var x=Math.min(f/m,p/w);m*=x;w*=x}else if("cover"===l){var x=Math.max(f/m,p/w);m*=x;w*=x}var b=a-f/2;b+="%"===u.units?(f-m)*u.value/100:u.pxValue;var _=o-p/2;_+="%"===c.units?(p-w)*c.value/100:c.pxValue;if(h.pathCache){b-=a;_-=o;a=0;o=0}var k=e.globalAlpha;e.globalAlpha=y;if("no-repeat"===d){if(g){e.save();if(h.pathCache)e.clip(h.pathCache);else{t.nodeShapes[i.getNodeShape(n)].drawPath(e,a,o,f,p);e.clip()}}e.drawImage(r,0,0,r.width,r.height,b,_,m,w);g&&e.restore()}else{var C=e.createPattern(r,d);e.fillStyle=C;t.nodeShapes[i.getNodeShape(n)].drawPath(e,a,o,f,p);e.translate(b,_);e.fill();e.translate(-b,-_)}e.globalAlpha=k}}})(n);(function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawEdgeText=function(e,t){var r=t._private.style.content.strValue;if(!(!r||r.match(/^\s+$/)||this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var n=t._private.style["font-size"].pxValue*t.cy().zoom(),i=t._private.style["min-zoomed-font-size"].pxValue;if(!(i>n)){e.textAlign="center";e.textBaseline="middle";var a=t._private.rscratch;this.drawText(e,t,a.labelX,a.labelY)}}};t.prototype.drawNodeText=function(e,t){var r=t._private.style.content.strValue;if(r&&!r.match(/^\s+$/)){var n=t._private.style["font-size"].pxValue*t.cy().zoom(),i=t._private.style["min-zoomed-font-size"].pxValue;if(!(i>n)){var a=t._private.style["text-halign"].strValue,o=t._private.style["text-valign"].strValue,s=t._private.rscratch;switch(a){case"left":e.textAlign="right";break;case"right":e.textAlign="left";break;default:e.textAlign="center"}switch(o){case"top":e.textBaseline="bottom";break;case"bottom":e.textBaseline="top";break;default:e.textBaseline="middle"}this.drawText(e,t,s.labelX,s.labelY)}}};t.prototype.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++){t=this.fontCaches[r];if(t.context===e)return t}t={context:e};this.fontCaches.push(t);return t};t.prototype.setupTextStyle=function(e,t){var r=t.effectiveOpacity(),n=t._private.style,i=n["font-style"].strValue,a=n["font-size"].pxValue+"px",o=n["font-family"].strValue,s=n["font-weight"].strValue,l=n["text-opacity"].value*n.opacity.value*r,u=n["text-outline-opacity"].value*l,c=n.color.value,d=n["text-outline-color"].value,f=t._private.fontKey,p=this.getFontCache(e);if(p.key!==f){e.font=i+" "+s+" "+a+" "+o;p.key=f}var h=String(n.content.value),v=n["text-transform"].value;"none"==v||("uppercase"==v?h=h.toUpperCase():"lowercase"==v&&(h=h.toLowerCase()));e.lineJoin="round";this.fillStyle(e,c[0],c[1],c[2],l);this.strokeStyle(e,d[0],d[1],d[2],u);return h};t.prototype.drawText=function(e,t,r,n){var i=t._private.style,a=t.effectiveOpacity();if(0!==a){var o=this.setupTextStyle(e,t);if(null!=o&&!isNaN(r)&&!isNaN(n)){var s=2*i["text-outline-width"].value;if(s>0){e.lineWidth=s;e.strokeText(o,r,n)}e.fillText(o,r,n)}}}})(n);(function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawNode=function(e,r,n){var i,a,o,s=this,l=r._private.style,u=r._private.rscratch,c=t.usePaths(),d=e,f=!1,p=l["overlay-padding"].pxValue,h=l["overlay-opacity"].value,v=l["overlay-color"].value;if(!n||0!==h){var g=r.effectiveOpacity();if(0!==g){i=this.getNodeWidth(r);a=this.getNodeHeight(r);e.lineWidth=l["border-width"].pxValue;if(void 0!==n&&n){if(h>0){this.fillStyle(e,v[0],v[1],v[2],h);t.nodeShapes.roundrectangle.drawPath(e,r._private.position.x,r._private.position.y,i+2*p,a+2*p);e.fill()}}else{var y=l["background-color"].value,m=l["border-color"].value,w=l["border-style"].value;this.fillStyle(e,y[0],y[1],y[2],l["background-opacity"].value*l.opacity.value*g);this.strokeStyle(e,m[0],m[1],m[2],l["border-opacity"].value*l.opacity.value*g);e.lineJoin="miter";if(e.setLineDash)switch(w){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var x=l["background-image"].value[2]||l["background-image"].value[1],b=l.shape.strValue,_=r._private.position;if(c){var k=b+"$"+i+"$"+a;e.translate(_.x,_.y);if(u.pathCacheKey===k){o=e=u.pathCache;f=!0}else{o=e=new Path2D;u.pathCacheKey=k;u.pathCache=o}}if(!f){var C=_;c&&(C={x:0,y:0});t.nodeShapes[this.getNodeShape(r)].drawPath(e,C.x,C.y,i,a)}e=d;c?e.fill(o):e.fill();if(void 0!==x){var E=this.getCachedImage(x,function(){s.data.canvasNeedsRedraw[t.NODE]=!0;s.data.canvasNeedsRedraw[t.DRAG]=!0;s.redraw()});E.complete&&this.drawInscribedImage(e,E,r)}var S=l["background-blacken"].value,T=l["border-width"].pxValue;if(this.hasPie(r)){this.drawPie(e,r);(0!==S||0!==T)&&(c||t.nodeShapes[this.getNodeShape(r)].drawPath(e,_.x,_.y,i,a))}if(S>0){this.fillStyle(e,0,0,0,S);c?e.fill(o):e.fill()}else if(0>S){this.fillStyle(e,255,255,255,-S);c?e.fill(o):e.fill()}if(T>0){c?e.stroke(o):e.stroke();if("double"===w){e.lineWidth=l["border-width"].pxValue/3;var D=e.globalCompositeOperation;e.globalCompositeOperation="destination-out";
c?e.stroke(o):e.stroke();e.globalCompositeOperation=D}}c&&e.translate(-_.x,-_.y);e.setLineDash&&e.setLineDash([])}}}};t.prototype.hasPie=function(e){e=e[0];return e._private.hasPie};t.prototype.drawPie=function(r,n){n=n[0];var i=n._private.style["pie-size"],a=this.getNodeWidth(n),o=this.getNodeHeight(n),s=n._private.position.x,l=n._private.position.y,u=Math.min(a,o)/2,c=0,d=t.usePaths();if(d){s=0;l=0}"%"===i.units?u=u*i.value/100:void 0!==i.pxValue&&(u=i.pxValue/2);for(var f=1;f<=e.style.pieBackgroundN;f++){var p=n._private.style["pie-"+f+"-background-size"].value,h=n._private.style["pie-"+f+"-background-color"].value,v=n._private.style["pie-"+f+"-background-opacity"].value,g=p/100,y=1.5*Math.PI+2*Math.PI*c,m=2*Math.PI*g,w=y+m;if(!(0===p||c>=1||c+g>1)){r.beginPath();r.moveTo(s,l);r.arc(s,l,u,y,w);r.closePath();this.fillStyle(r,h[0],h[1],h[2],v);r.fill();c+=g}}}})(n);(function(e){"use strict";var t=e("renderer","canvas");t.prototype.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t};t.prototype.paintCache=function(e){for(var t,r=this.paintCaches=this.paintCaches||[],n=!0,i=0;i<r.length;i++){t=r[i];if(t.context===e){n=!1;break}}if(n){t={context:e};r.push(t)}return t};t.prototype.fillStyle=function(e,t,r,n,i){e.fillStyle="rgba("+t+","+r+","+n+","+i+")"};t.prototype.strokeStyle=function(e,t,r,n,i){e.strokeStyle="rgba("+t+","+r+","+n+","+i+")"};t.prototype.matchCanvasSize=function(e){var r,n=this.data,i=e.clientWidth,a=e.clientHeight,o=this.getPixelRatio(),s=i*o,l=a*o;if(s!==this.canvasWidth||l!==this.canvasHeight){this.fontCaches=null;var u=n.canvasContainer;u.style.width=i+"px";u.style.height=a+"px";for(var c=0;c<t.CANVAS_LAYERS;c++){r=n.canvases[c];if(r.width!==s||r.height!==l){r.width=s;r.height=l;r.style.width=i+"px";r.style.height=a+"px"}}for(var c=0;c<t.BUFFER_COUNT;c++){r=n.bufferCanvases[c];if(r.width!==s||r.height!==l){r.width=s;r.height=l;r.style.width=i+"px";r.style.height=a+"px"}}this.textureMult=1;if(1>=o){r=n.bufferCanvases[t.TEXTURE_BUFFER];this.textureMult=2;r.width=s*this.textureMult;r.height=l*this.textureMult}this.canvasWidth=s;this.canvasHeight=l}};t.prototype.renderTo=function(e,t,r,n){this.redraw({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};t.prototype.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};t.minRedrawLimit=1e3/60;t.maxRedrawLimit=1e3;t.motionBlurDelay=100;t.prototype.redraw=function(r){function n(){function r(e,t){e.setTransform(1,0,0,1,0,0);if("motionBlur"===t){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-out";u.fillStyle(e,255,255,255,.666);e.fillRect(0,0,u.canvasWidth,u.canvasHeight);e.globalCompositeOperation=r}else i||void 0!==t&&!t||e.clearRect(0,0,u.canvasWidth,u.canvasHeight);if(!a){e.translate(x.x,x.y);e.scale(m,m)}l&&e.translate(l.x,l.y);s&&e.scale(s,s)}function n(e,t){for(var r=e.eles,n=0;n<r.length;n++){var i=r[n];if(i.isNode()){u.drawNode(t,i);L||u.drawNodeText(t,i);u.drawNode(t,i,!0)}else if(!j){u.drawEdge(t,i);L||u.drawEdgeText(t,i);u.drawEdge(t,i,!0)}}}var v=u.getCachedEdges(),g=d.style()._private.coreStyle,y=d.zoom(),m=void 0!==s?s:y,w=d.pan(),x={x:w.x,y:w.y};l&&(x=l);m*=c;x.x*=c;x.y*=c;var _={drag:{nodes:[],edges:[],eles:[]},nondrag:{nodes:[],edges:[],eles:[]}},k=u.textureOnViewport&&!i&&(u.pinching||u.hoverData.dragging||u.swipePanning||u.data.wheelZooming);if(k){var C;if(!u.textureCache){u.textureCache={};C=u.textureCache.bb=d.elements().boundingBox();u.textureCache.texture=u.data.bufferCanvases[t.TEXTURE_BUFFER];var E=u.data.bufferContexts[t.TEXTURE_BUFFER];E.setTransform(1,0,0,1,0,0);E.clearRect(0,0,u.canvasWidth*u.textureMult,u.canvasHeight*u.textureMult);u.redraw({forcedContext:E,drawOnlyNodeLayer:!0,forcedPxRatio:c*u.textureMult});var S=u.textureCache.viewport={zoom:d.zoom(),pan:d.pan(),width:u.canvasWidth,height:u.canvasHeight};S.mpan={x:(0-S.pan.x)/S.zoom,y:(0-S.pan.y)/S.zoom}}p[t.DRAG]=!1;p[t.NODE]=!1;var T=f.contexts[t.NODE],D=u.textureCache.texture,S=u.textureCache.viewport;C=u.textureCache.bb;T.setTransform(1,0,0,1,0,0);T.clearRect(0,0,S.width,S.height);var P=g["outside-texture-bg-color"].value,N=g["outside-texture-bg-opacity"].value;u.fillStyle(T,P[0],P[1],P[2],N);T.fillRect(0,0,S.width,S.height);var y=d.zoom();r(T,!1);T.clearRect(S.mpan.x,S.mpan.y,S.width/S.zoom/c,S.height/S.zoom/c);T.drawImage(D,S.mpan.x,S.mpan.y,S.width/S.zoom/c,S.height/S.zoom/c)}else u.textureOnViewport&&!i&&(u.textureCache=null);var M=u.pinching||u.hoverData.dragging||u.swipePanning||u.data.wheelZooming||u.hoverData.draggingEles,j=u.hideEdgesOnViewport&&M,L=u.hideLabelsOnViewport&&M;if(p[t.DRAG]||p[t.NODE]||a||o){j||u.findEdgeControlPoints(v);for(var I=u.getCachedZSortedEles(),R=d.extent(),A=0;A<I.length;A++){var O,z=I[A],C=i?null:z.boundingBox(),B=i?!0:e.math.boundingBoxesIntersect(R,C);if(B){O=z._private.rscratch.inDragLayer?_.drag:_.nondrag;O.eles.push(z)}}}var V=p[t.DRAG]&&!p[t.NODE]&&h&&!u.clearedNodeLayerForMotionBlur;V&&(u.clearedNodeLayerForMotionBlur=!0);if(p[t.NODE]||a||o||V){var T=i||f.contexts[t.NODE];r(T,h&&!V?"motionBlur":void 0);n(_.nondrag,T);a||(p[t.NODE]=!1)}if(!o&&(p[t.DRAG]||a)){var T=i||f.contexts[t.DRAG];r(T,h?"motionBlur":void 0);n(_.drag,T);a||(p[t.DRAG]=!1)}if(u.showFps||!o&&p[t.SELECT_BOX]&&!a){var T=i||f.contexts[t.SELECT_BOX];r(T);if(1==f.select[4]&&u.hoverData.selecting){var y=f.cy.zoom(),q=g["selection-box-border-width"].value/y;T.lineWidth=q;T.fillStyle="rgba("+g["selection-box-color"].value[0]+","+g["selection-box-color"].value[1]+","+g["selection-box-color"].value[2]+","+g["selection-box-opacity"].value+")";T.fillRect(f.select[0],f.select[1],f.select[2]-f.select[0],f.select[3]-f.select[1]);if(q>0){T.strokeStyle="rgba("+g["selection-box-border-color"].value[0]+","+g["selection-box-border-color"].value[1]+","+g["selection-box-border-color"].value[2]+","+g["selection-box-opacity"].value+")";T.strokeRect(f.select[0],f.select[1],f.select[2]-f.select[0],f.select[3]-f.select[1])}}if(f.bgActivePosistion&&!u.hoverData.selecting){var y=f.cy.zoom(),X=f.bgActivePosistion;T.fillStyle="rgba("+g["active-bg-color"].value[0]+","+g["active-bg-color"].value[1]+","+g["active-bg-color"].value[2]+","+g["active-bg-opacity"].value+")";T.beginPath();T.arc(X.x,X.y,g["active-bg-size"].pxValue/y,0,2*Math.PI);T.fill()}var F=u.averageRedrawTime;if(u.showFps&&F){F=Math.round(F);var Y=Math.round(1e3/F);T.setTransform(1,0,0,1,0,0);T.fillStyle="rgba(255, 0, 0, 0.75)";T.strokeStyle="rgba(255, 0, 0, 0.75)";T.lineWidth=1;T.fillText("1 frame = "+F+" ms = "+Y+" fps",0,20);var W=60;T.strokeRect(0,30,250,20);T.fillRect(0,30,250*Math.min(Y/W,1),20)}a||(p[t.SELECT_BOX]=!1)}var U=+new Date;void 0===u.averageRedrawTime&&(u.averageRedrawTime=U-b);void 0===u.redrawCount&&(u.redrawCount=0);u.redrawCount++;void 0===u.redrawTotalTime&&(u.redrawTotalTime=0);u.redrawTotalTime+=U-b;u.lastRedrawTime=U-b;u.averageRedrawTime=u.averageRedrawTime/2+(U-b)/2;u.currentlyDrawing=!1;if(u.clearingMotionBlur){u.clearingMotionBlur=!1;u.motionBlurCleared=!0;u.motionBlur=!0}h&&(u.motionBlurTimeout=setTimeout(function(){u.motionBlurTimeout=null;u.clearedNodeLayerForMotionBlur=!1;u.motionBlur=!1;u.clearingMotionBlur=!0;p[t.NODE]=!0;p[t.DRAG]=!0;u.redraw()},t.motionBlurDelay))}r=r||{};var i=r.forcedContext,a=r.drawAllLayers,o=r.drawOnlyNodeLayer,s=r.forcedZoom,l=r.forcedPan,u=this,c=void 0===r.forcedPxRatio?this.getPixelRatio():r.forcedPxRatio,d=u.data.cy,f=u.data,p=f.canvasNeedsRedraw,h=void 0!==r.motionBlur?r.motionBlur:u.motionBlur;h=h&&!i&&u.motionBlurEnabled;h&&u.motionBlurTimeout&&clearTimeout(u.motionBlurTimeout);!i&&this.redrawTimeout&&clearTimeout(this.redrawTimeout);this.redrawTimeout=null;void 0===this.averageRedrawTime&&(this.averageRedrawTime=0);var v=t.minRedrawLimit,g=t.maxRedrawLimit,y=this.averageRedrawTime;y=v>y?v:y;y=g>y?y:g;void 0===this.lastDrawTime&&(this.lastDrawTime=0);var m=+new Date,w=m-this.lastDrawTime,x=w>=y;if(!i){if(!x||this.currentlyDrawing){this.redrawTimeout=setTimeout(function(){u.redraw()},y);return}this.lastDrawTime=m;this.currentlyDrawing=!0}var b=+new Date;i?n():e.util.requestAnimationFrame(n);if(!i&&!u.initrender){u.initrender=!0;d.trigger("initrender")}}})(n);(function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawPolygonPath=function(e,t,r,n,i,a){var o=n/2,s=i/2;e.beginPath&&e.beginPath();e.moveTo(t+o*a[0],r+s*a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(t+o*a[2*l],r+s*a[2*l+1]);e.closePath()};t.prototype.drawPolygon=function(e,t,r,n,i,a){this.drawPolygonPath(e,t,r,n,i,a);e.fill()};t.prototype.drawRoundRectanglePath=function(t,r,n,i,a){var o=i/2,s=a/2,l=e.math.getRoundRectangleRadius(i,a);t.beginPath&&t.beginPath();t.moveTo(r,n-s);t.arcTo(r+o,n-s,r+o,n,l);t.arcTo(r+o,n+s,r,n+s,l);t.arcTo(r-o,n+s,r-o,n,l);t.arcTo(r-o,n-s,r,n-s,l);t.lineTo(r,n-s);t.closePath()};t.prototype.drawRoundRectangle=function(e,t,r,n,i,a){this.drawRoundRectanglePath(e,t,r,n,i,a);e.fill()}})(n);(function(e){"use strict";var t=e("renderer","canvas");t.prototype.createBuffer=function(e,t){var r=document.createElement("canvas");r.width=e;r.height=t;return[r,r.getContext("2d")]};t.prototype.bufferCanvasImage=function(e){var t=this.data,r=t.cy,n=r.elements().boundingBox(),i=e.full?Math.ceil(n.w):this.data.container.clientWidth,a=e.full?Math.ceil(n.h):this.data.container.clientHeight,o=1;if(void 0!==e.scale){i*=e.scale;a*=e.scale;o=e.scale}var s=document.createElement("canvas");s.width=i;s.height=a;s.style.width=i+"px";s.style.height=a+"px";var l=s.getContext("2d");if(i>0&&a>0){l.clearRect(0,0,i,a);if(e.bg){l.fillStyle=e.bg;l.rect(0,0,i,a);l.fill()}l.globalCompositeOperation="source-over";if(e.full)this.redraw({forcedContext:l,drawAllLayers:!0,forcedZoom:o,forcedPan:{x:-n.x1*o,y:-n.y1*o},forcedPxRatio:1});else{var u=r.pan(),c={x:u.x*o,y:u.y*o},d=r.zoom()*o;this.redraw({forcedContext:l,drawAllLayers:!0,forcedZoom:d,forcedPan:c,forcedPxRatio:1})}}return s};t.prototype.png=function(e){return this.bufferCanvasImage(e).toDataURL("image/png")}})(n);(function(e){"use strict";var t=e("renderer","canvas");t.prototype.registerBinding=function(e,t,r,n){this.bindings.push({target:e,event:t,handler:r,useCapture:n});e.addEventListener(t,r,n)};t.prototype.nodeIsDraggable=function(e){return 0!==e._private.style.opacity.value&&"visible"==e._private.style.visibility.value&&"element"==e._private.style.display.value&&!e.locked()&&e.grabbable()?!0:!1};t.prototype.load=function(){var r=this,n=function(e){var t;if(e.addToList&&r.data.cy.hasCompoundNodes()){if(!e.addToList.hasId){e.addToList.hasId={};for(var n=0;n<e.addToList.length;n++){var i=e.addToList[n];e.addToList.hasId[i.id()]=!0}}t=e.addToList.hasId}return t||{}},i=function(e,t){if(e._private.cy.hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList))for(var r=n(t),i=e.descendants(),a=0;a<i.size();a++){var o=i[a],s=o._private;t.inDragLayer&&(s.rscratch.inDragLayer=!0);if(t.addToList&&!r[o.id()]){t.addToList.push(o);r[o.id()]=!0;s.grabbed=!0}for(var l=s.edges,u=0;t.inDragLayer&&u<l.length;u++)l[u]._private.rscratch.inDragLayer=!0}},a=function(e,t){var r=e._private,a=n(t);t.inDragLayer&&(r.rscratch.inDragLayer=!0);if(t.addToList&&!a[e.id()]){t.addToList.push(e);a[e.id()]=!0;r.grabbed=!0}for(var s=r.edges,l=0;t.inDragLayer&&l<s.length;l++)s[l]._private.rscratch.inDragLayer=!0;i(e,t);o(e,{inDragLayer:t.inDragLayer})},o=function(e,t){if(null!=t.inDragLayer||null!=t.addToList){var r=e;if(e._private.cy.hasCompoundNodes()){for(;r.parent().nonempty();)r=r.parent()[0];if(r!=e){for(var i=r.descendants().add(r).not(e).not(e.descendants()),a=i.connectedEdges(),o=n(t),s=0;s<i.size();s++){void 0!==t.inDragLayer&&(i[s]._private.rscratch.inDragLayer=t.inDragLayer);if(t.addToList&&!o[i[s].id()]){t.addToList.push(i[s]);o[i[s].id()]=!0;i[s]._private.grabbed=!0}}for(var l=0;void 0!==t.inDragLayer&&l<a.length;l++)a[l]._private.rscratch.inDragLayer=t.inDragLayer}}}};if("undefined"!=typeof MutationObserver){r.removeObserver=new MutationObserver(function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.removedNodes;if(i)for(var a=0;a<i.length;a++){var o=i[a];if(o===r.data.container){r.destroy();break}}}});r.removeObserver.observe(r.data.container.parentNode,{childList:!0})}else r.registerBinding(r.data.container,"DOMNodeRemoved",function(){r.destroy()});r.registerBinding(window,"resize",e.util.debounce(function(){r.invalidateContainerClientCoordsCache();r.matchCanvasSize(r.data.container);r.data.canvasNeedsRedraw[t.NODE]=!0;r.redraw()},100));for(var s=function(e){r.registerBinding(e,"scroll",function(){r.invalidateContainerClientCoordsCache()})},l=r.data.cy.container();;){s(l);if(!l.parentNode)break;l=l.parentNode}r.registerBinding(r.data.container,"contextmenu",function(e){e.preventDefault()});var u=function(){return 0!==r.data.select[4]};r.registerBinding(r.data.container,"mousedown",function(n){n.preventDefault();r.hoverData.capture=!0;r.hoverData.which=n.which;var i=r.data.cy,o=r.projectIntoViewport(n.clientX,n.clientY),s=r.data.select,l=r.findNearestElement(o[0],o[1],!0),u=r.dragData.possibleDragElements;r.hoverData.mdownPos=o;var c=function(){r.hoverData.tapholdCancelled=!1;clearTimeout(r.hoverData.tapholdTimeout);r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var t=r.hoverData.down;t?t.trigger(new e.Event(n,{type:"taphold",cyPosition:{x:o[0],y:o[1]}})):i.trigger(new e.Event(n,{type:"taphold",cyPosition:{x:o[0],y:o[1]}}))}},r.tapholdDuration)};if(3==n.which){r.hoverData.cxtStarted=!0;var d=new e.Event(n,{type:"cxttapstart",cyPosition:{x:o[0],y:o[1]}});if(l){l.activate();l.trigger(d);r.hoverData.down=l}else i.trigger(d);r.hoverData.downTime=(new Date).getTime();r.hoverData.cxtDragged=!1}else if(1==n.which){l&&l.activate();if(null!=l){if(r.nodeIsDraggable(l)){var f=new e.Event(n,{type:"grab",cyPosition:{x:o[0],y:o[1]}});if(l.isNode()&&!l.selected()){u=r.dragData.possibleDragElements=[];a(l,{addToList:u});l.trigger(f)}else if(l.isNode()&&l.selected()){u=r.dragData.possibleDragElements=[];for(var p=i.$(function(){return this.isNode()&&this.selected()}),h=0;h<p.length;h++)r.nodeIsDraggable(p[h])&&a(p[h],{addToList:u});l.trigger(f)}r.data.canvasNeedsRedraw[t.NODE]=!0;r.data.canvasNeedsRedraw[t.DRAG]=!0}l.trigger(new e.Event(n,{type:"mousedown",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(n,{type:"tapstart",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(n,{type:"vmousedown",cyPosition:{x:o[0],y:o[1]}}))}else null==l&&i.trigger(new e.Event(n,{type:"mousedown",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(n,{type:"tapstart",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(n,{type:"vmousedown",cyPosition:{x:o[0],y:o[1]}}));r.hoverData.down=l;r.hoverData.downTime=(new Date).getTime();if(null==l||l.isEdge()){s[4]=1;var v=Math.max(0,t.panOrBoxSelectDelay-(+new Date-r.hoverData.downTime));clearTimeout(r.bgActiveTimeout);if(i.boxSelectionEnabled()||l&&l.isEdge())r.bgActiveTimeout=setTimeout(function(){l&&l.unactivate();r.data.bgActivePosistion={x:o[0],y:o[1]};r.hoverData.dragging=!0;r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;r.redraw()},v);else{r.data.bgActivePosistion={x:o[0],y:o[1]};r.hoverData.dragging=!0;r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;r.redraw()}}c()}s[0]=s[2]=o[0];s[1]=s[3]=o[1]},!1);r.registerBinding(window,"mousemove",e.util.throttle(function(n){var i=!1,o=r.hoverData.capture;if(!o){var s=r.findContainerClientCoords();if(!(n.clientX>s[0]&&n.clientX<s[0]+r.canvasWidth&&n.clientY>s[1]&&n.clientY<s[1]+r.canvasHeight))return;for(var l=r.data.container,u=n.target,c=u.parentNode,d=!1;c;){if(c===l){d=!0;break}c=c.parentNode}if(!d)return}var f=r.data.cy,p=f.zoom(),h=r.projectIntoViewport(n.clientX,n.clientY),v=r.data.select,g=null;r.hoverData.draggingEles||(g=r.findNearestElement(h[0],h[1],!0));var y=r.hoverData.last,m=r.hoverData.down,w=[h[0]-v[2],h[1]-v[3]],x=r.dragData.possibleDragElements,b=v[2]-v[0],_=b*b,k=v[3]-v[1],C=k*k,E=_+C,S=E*p*p;r.hoverData.tapholdCancelled=!0;var T=function(){var e=r.hoverData.dragDelta=r.hoverData.dragDelta||[];if(0===e.length){e.push(0);e.push(0)}else{e[0]+=w[0];e[1]+=w[1]}};i=!0;null!=g?g.trigger(new e.Event(n,{type:"mousemove",cyPosition:{x:h[0],y:h[1]}})).trigger(new e.Event(n,{type:"vmousemove",cyPosition:{x:h[0],y:h[1]}})).trigger(new e.Event(n,{type:"tapdrag",cyPosition:{x:h[0],y:h[1]}})):null==g&&f.trigger(new e.Event(n,{type:"mousemove",cyPosition:{x:h[0],y:h[1]}})).trigger(new e.Event(n,{type:"vmousemove",cyPosition:{x:h[0],y:h[1]}})).trigger(new e.Event(n,{type:"tapdrag",cyPosition:{x:h[0],y:h[1]}}));if(3===r.hoverData.which){var D=new e.Event(n,{type:"cxtdrag",cyPosition:{x:h[0],y:h[1]}});m?m.trigger(D):f.trigger(D);r.hoverData.cxtDragged=!0;if(!r.hoverData.cxtOver||g!==r.hoverData.cxtOver){r.hoverData.cxtOver&&r.hoverData.cxtOver.trigger(new e.Event(n,{type:"cxtdragout",cyPosition:{x:h[0],y:h[1]}}));r.hoverData.cxtOver=g;g&&g.trigger(new e.Event(n,{type:"cxtdragover",cyPosition:{x:h[0],y:h[1]}}))}}else if(r.hoverData.dragging){i=!0;if(f.panningEnabled()&&f.userPanningEnabled()){var P;if(r.hoverData.justStartedPan){var N=r.hoverData.mdownPos;P={x:(h[0]-N[0])*p,y:(h[1]-N[1])*p};r.hoverData.justStartedPan=!1}else P={x:w[0]*p,y:w[1]*p};f.panBy(P)}h=r.projectIntoViewport(n.clientX,n.clientY)}else if(1==v[4]&&(null==m||m.isEdge())&&(!f.boxSelectionEnabled()||+new Date-r.hoverData.downTime>=t.panOrBoxSelectDelay)&&!r.hoverData.selecting&&S>=r.tapThreshold2&&f.panningEnabled()&&f.userPanningEnabled()){r.hoverData.dragging=!0;r.hoverData.selecting=!1;r.hoverData.justStartedPan=!0;v[4]=0}else{if(f.boxSelectionEnabled()&&!r.hoverData.dragging&&Math.pow(v[2]-v[0],2)+Math.pow(v[3]-v[1],2)>7&&v[4]){clearTimeout(r.bgActiveTimeout);r.data.bgActivePosistion=void 0;r.hoverData.selecting=!0;r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;r.redraw()}m&&m.isEdge()&&m.active()&&m.unactivate();if(g!=y){if(y){y.trigger(new e.Event(n,{type:"mouseout",cyPosition:{x:h[0],y:h[1]}}));y.trigger(new e.Event(n,{type:"tapdragout",cyPosition:{x:h[0],y:h[1]}}))}if(g){g.trigger(new e.Event(n,{type:"mouseover",cyPosition:{x:h[0],y:h[1]}}));g.trigger(new e.Event(n,{type:"tapdragover",cyPosition:{x:h[0],y:h[1]}}))}r.hoverData.last=g}if(m&&m.isNode()&&r.nodeIsDraggable(m))if(S>=r.tapThreshold2){var M=!r.dragData.didDrag;M&&(r.data.canvasNeedsRedraw[t.NODE]=!0);r.dragData.didDrag=!0;for(var j=[],L=0;L<x.length;L++){var I=x[L];r.hoverData.draggingEles||a(I,{inDragLayer:!0});if(I.isNode()&&r.nodeIsDraggable(I)&&I.grabbed()){var R=I._private.position;j.push(I);if(e.is.number(w[0])&&e.is.number(w[1])){R.x+=w[0];R.y+=w[1];if(M){var A=r.hoverData.dragDelta;if(e.is.number(A[0])&&e.is.number(A[1])){R.x+=A[0];R.y+=A[1]}}}}}r.hoverData.draggingEles=!0;var O=new e.Collection(f,j);O.updateCompoundBounds();O.trigger("position drag");r.data.canvasNeedsRedraw[t.DRAG]=!0;r.redraw()}else T();i=!0}v[2]=h[0];v[3]=h[1];if(i){n.stopPropagation&&n.stopPropagation();n.preventDefault&&n.preventDefault();return!1}},1e3/30,{trailing:!0}),!1);r.registerBinding(window,"mouseup",function(n){var i=r.hoverData.capture;if(i){r.hoverData.capture=!1;var a=r.data.cy,s=r.projectIntoViewport(n.clientX,n.clientY),l=r.data.select,u=r.findNearestElement(s[0],s[1],!0),c=r.dragData.possibleDragElements,d=r.hoverData.down,f=n.shiftKey;if(r.data.bgActivePosistion){r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;r.redraw()}r.data.bgActivePosistion=void 0;clearTimeout(r.bgActiveTimeout);r.hoverData.cxtStarted=!1;r.hoverData.draggingEles=!1;r.hoverData.selecting=!1;d&&d.unactivate();if(3===r.hoverData.which){var p=new e.Event(n,{type:"cxttapend",cyPosition:{x:s[0],y:s[1]}});d?d.trigger(p):a.trigger(p);if(!r.hoverData.cxtDragged){var h=new e.Event(n,{type:"cxttap",cyPosition:{x:s[0],y:s[1]}});d?d.trigger(h):a.trigger(h)}r.hoverData.cxtDragged=!1;r.hoverData.which=null}else{if(!(null!=d||r.dragData.didDrag||Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]||r.hoverData.dragging)){a.$(function(){return this.selected()}).unselect();c.length>0&&(r.data.canvasNeedsRedraw[t.NODE]=!0);r.dragData.possibleDragElements=c=[]}null!=u?u.trigger(new e.Event(n,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})):null==u&&a.trigger(new e.Event(n,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}}));Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)===0&&(null!=u?u.trigger(new e.Event(n,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"vclick",cyPosition:{x:s[0],y:s[1]}})):null==u&&a.trigger(new e.Event(n,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"vclick",cyPosition:{x:s[0],y:s[1]}})));if(u==d&&!r.dragData.didDrag&&null!=u&&u._private.selectable){if(r.hoverData.dragging);else if("additive"===a.selectionType()||f)u.selected()?u.unselect():u.select();else if(!f){a.$(":selected").not(u).unselect();u.select()}r.data.canvasNeedsRedraw[t.NODE]=!0}if(a.boxSelectionEnabled()&&Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]){var v=[],g=r.getAllInBox(l[0],l[1],l[2],l[3]);r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;g.length>0&&(r.data.canvasNeedsRedraw[t.NODE]=!0);for(var y=0;y<g.length;y++)g[y]._private.selectable&&v.push(g[y]);var m=new e.Collection(a,v);if("additive"===a.selectionType())m.select();else{f||a.$(":selected").not(m).unselect();m.select()}r.redraw()}if(r.hoverData.dragging){r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;r.redraw()}r.hoverData.dragging=!1;if(!l[4]){r.data.canvasNeedsRedraw[t.DRAG]=!0;r.data.canvasNeedsRedraw[t.NODE]=!0;for(var y=0;y<c.length;y++)if("nodes"===c[y]._private.group){c[y]._private.rscratch.inDragLayer=!1;c[y]._private.grabbed=!1;for(var w=c[y]._private.edges,x=0;x<w.length;x++)w[x]._private.rscratch.inDragLayer=!1;o(c[y],{inDragLayer:!1})}else"edges"===c[y]._private.group&&(c[y]._private.rscratch.inDragLayer=!1);d&&d.trigger("free")}}l[4]=0;r.hoverData.down=null;r.dragData.didDrag=!1;r.hoverData.dragDelta=[]}},!1);var c=function(e){if(!r.scrollingPage){var n=r.data.cy,i=r.projectIntoViewport(e.clientX,e.clientY),a=[i[0]*n.zoom()+n.pan().x,i[1]*n.zoom()+n.pan().y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||u())e.preventDefault();else if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){e.preventDefault();r.data.wheelZooming=!0;clearTimeout(r.data.wheelTimeout);r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1;r.data.canvasNeedsRedraw[t.NODE]=!0;r.redraw()},150);var o=e.deltaY/-250||e.wheelDeltaY/1e3||e.wheelDelta/1e3;o*=r.wheelSensitivity;var s=1===e.deltaMode;s&&(o*=33);n.zoom({level:n.zoom()*Math.pow(10,o),renderedPosition:{x:a[0],y:a[1]}})}}};r.registerBinding(r.data.container,"wheel",c,!0);r.registerBinding(window,"scroll",function(){r.scrollingPage=!0;clearTimeout(r.scrollingPageTimeout);r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0);r.registerBinding(r.data.container,"mouseout",function(t){var n=r.projectIntoViewport(t.clientX,t.clientY);r.data.cy.trigger(new e.Event(t,{type:"mouseout",cyPosition:{x:n[0],y:n[1]}}))},!1);r.registerBinding(r.data.container,"mouseover",function(t){var n=r.projectIntoViewport(t.clientX,t.clientY);r.data.cy.trigger(new e.Event(t,{type:"mouseover",cyPosition:{x:n[0],y:n[1]}}))},!1);var d,f,p,h,v,g,y,m,w,x,b,_,k,C=function(e,t,r,n){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))},E=function(e,t,r,n){return(r-e)*(r-e)+(n-t)*(n-t)};r.registerBinding(r.data.container,"touchstart",function(n){clearTimeout(this.threeFingerSelectTimeout);n.target!==r.data.link&&n.preventDefault();r.touchData.capture=!0;r.data.bgActivePosistion=void 0;var i=r.data.cy,o=r.getCachedNodes(),s=r.getCachedEdges(),l=r.touchData.now,u=r.touchData.earlier;if(n.touches[0]){var c=r.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);l[0]=c[0];l[1]=c[1]}if(n.touches[1]){var c=r.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);l[2]=c[0];l[3]=c[1]}if(n.touches[2]){var c=r.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);l[4]=c[0];l[5]=c[1]}if(n.touches[1]){var S=function(e){for(var t=0;t<e.length;t++){e[t]._private.grabbed=!1;e[t]._private.rscratch.inDragLayer=!1;e[t].active()&&e[t].unactivate()}};S(o);S(s);var T=r.findContainerClientCoords();w=T[0];x=T[1];b=T[2];_=T[3];d=n.touches[0].clientX-w;f=n.touches[0].clientY-x;p=n.touches[1].clientX-w;h=n.touches[1].clientY-x;k=d>=0&&b>=d&&p>=0&&b>=p&&f>=0&&_>=f&&h>=0&&_>=h;var D=i.pan(),P=i.zoom();v=C(d,f,p,h);g=E(d,f,p,h);y=[(d+p)/2,(f+h)/2];m=[(y[0]-D.x)/P,(y[1]-D.y)/P];var N=200,M=N*N;if(M>g&&!n.touches[2]){var j=r.findNearestElement(l[0],l[1],!0),L=r.findNearestElement(l[2],l[3],!0);if(j&&j.isNode()){j.activate().trigger(new e.Event(n,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}}));r.touchData.start=j}else if(L&&L.isNode()){L.activate().trigger(new e.Event(n,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}}));r.touchData.start=L}else{i.trigger(new e.Event(n,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}}));r.touchData.start=null}r.touchData.start&&(r.touchData.start._private.grabbed=!1);r.touchData.cxt=!0;r.touchData.cxtDragged=!1;r.data.bgActivePosistion=void 0;r.redraw();return}}if(n.touches[2]);else if(n.touches[1]);else if(n.touches[0]){var I=r.findNearestElement(l[0],l[1],!0);if(null!=I){I.activate();r.touchData.start=I;if(I.isNode()&&r.nodeIsDraggable(I)){var R=r.dragData.touchDragEles=[];r.data.canvasNeedsRedraw[t.NODE]=!0;r.data.canvasNeedsRedraw[t.DRAG]=!0;if(I.selected())for(var A=i.$(function(){return this.isNode()&&this.selected()}),O=0;O<A.length;O++){var z=A[O];r.nodeIsDraggable(z)&&a(z,{addToList:R})}else a(I,{addToList:R});I.trigger(new e.Event(n,{type:"grab",cyPosition:{x:l[0],y:l[1]}}))}I.trigger(new e.Event(n,{type:"touchstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(n,{type:"tapstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(n,{type:"vmousdown",cyPosition:{x:l[0],y:l[1]}}))}if(null==I){i.trigger(new e.Event(n,{type:"touchstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(n,{type:"tapstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(n,{type:"vmousedown",cyPosition:{x:l[0],y:l[1]}}));r.data.bgActivePosistion={x:c[0],y:c[1]};r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;r.redraw()}for(var B=0;B<l.length;B++){u[B]=l[B];r.touchData.startPosition[B]=l[B]}r.touchData.singleTouchMoved=!1;r.touchData.singleTouchStartTime=+new Date;clearTimeout(r.touchData.tapholdTimeout);r.touchData.tapholdTimeout=setTimeout(function(){if(r.touchData.singleTouchMoved===!1&&!r.pinching)if(r.touchData.start)r.touchData.start.trigger(new e.Event(n,{type:"taphold",cyPosition:{x:l[0],y:l[1]}}));else{r.data.cy.trigger(new e.Event(n,{type:"taphold",cyPosition:{x:l[0],y:l[1]}}));i.$(":selected").unselect()}},r.tapholdDuration)}},!1);r.registerBinding(window,"touchmove",e.util.throttle(function(n){var i=r.data.select,o=r.touchData.capture;o&&n.preventDefault();var s=r.data.cy,l=r.touchData.now,u=r.touchData.earlier,c=s.zoom();if(n.touches[0]){var y=r.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);l[0]=y[0];l[1]=y[1]}if(n.touches[1]){var y=r.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);l[2]=y[0];l[3]=y[1]}if(n.touches[2]){var y=r.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);l[4]=y[0];l[5]=y[1]}for(var b=[],_=0;_<l.length;_++)b[_]=l[_]-u[_];var S=r.touchData.startPosition,T=l[0]-S[0],D=T*T,P=l[1]-S[1],N=P*P,M=D+N,j=M*c*c;if(o&&r.touchData.cxt){var L=n.touches[0].clientX-w,I=n.touches[0].clientY-x,R=n.touches[1].clientX-w,A=n.touches[1].clientY-x,O=E(L,I,R,A),z=O/g,B=150,V=B*B,q=1.5,X=q*q;if(z>=X||O>=V){r.touchData.cxt=!1;if(r.touchData.start){r.touchData.start.unactivate();r.touchData.start=null}r.data.bgActivePosistion=void 0;r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;var F=new e.Event(n,{type:"cxttapend",cyPosition:{x:l[0],y:l[1]}});r.touchData.start?r.touchData.start.trigger(F):s.trigger(F)}}if(o&&r.touchData.cxt){var F=new e.Event(n,{type:"cxtdrag",cyPosition:{x:l[0],y:l[1]}});r.data.bgActivePosistion=void 0;r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;r.touchData.start?r.touchData.start.trigger(F):s.trigger(F);r.touchData.start&&(r.touchData.start._private.grabbed=!1);r.touchData.cxtDragged=!0;var Y=r.findNearestElement(l[0],l[1],!0);if(!r.touchData.cxtOver||Y!==r.touchData.cxtOver){r.touchData.cxtOver&&r.touchData.cxtOver.trigger(new e.Event(n,{type:"cxtdragout",cyPosition:{x:l[0],y:l[1]}}));r.touchData.cxtOver=Y;Y&&Y.trigger(new e.Event(n,{type:"cxtdragover",cyPosition:{x:l[0],y:l[1]}}))}}else if(o&&n.touches[2]&&s.boxSelectionEnabled()){r.data.bgActivePosistion=void 0;clearTimeout(this.threeFingerSelectTimeout);this.lastThreeTouch=+new Date;r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;if(i&&0!==i.length&&void 0!==i[0]){i[2]=(l[0]+l[2]+l[4])/3;i[3]=(l[1]+l[3]+l[5])/3}else{i[0]=(l[0]+l[2]+l[4])/3;i[1]=(l[1]+l[3]+l[5])/3;i[2]=(l[0]+l[2]+l[4])/3+1;i[3]=(l[1]+l[3]+l[5])/3+1}i[4]=1;r.redraw()}else if(o&&n.touches[1]&&s.zoomingEnabled()&&s.panningEnabled()&&s.userZoomingEnabled()&&s.userPanningEnabled()){r.data.bgActivePosistion=void 0;r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;var W=r.dragData.touchDragEles;if(W){r.data.canvasNeedsRedraw[t.DRAG]=!0;for(var U=0;U<W.length;U++){W[U]._private.grabbed=!1;W[U]._private.rscratch.inDragLayer=!1}}var L=n.touches[0].clientX-w,I=n.touches[0].clientY-x,R=n.touches[1].clientX-w,A=n.touches[1].clientY-x,H=C(L,I,R,A),$=H/v;if(1!=$&&k){var G=L-d,Z=I-f,Q=R-p,J=A-h,K=(G+Q)/2,et=(Z+J)/2,tt=s.zoom(),rt=tt*$,nt=s.pan(),it=m[0]*tt+nt.x,at=m[1]*tt+nt.y,ot={x:-rt/tt*(it-nt.x-K)+it,y:-rt/tt*(at-nt.y-et)+at};if(r.touchData.start){var W=r.dragData.touchDragEles;if(W)for(var U=0;U<W.length;U++){W[U]._private.grabbed=!1;W[U]._private.rscratch.inDragLayer=!1}r.touchData.start._private.active=!1;r.touchData.start._private.grabbed=!1;r.touchData.start._private.rscratch.inDragLayer=!1;r.data.canvasNeedsRedraw[t.DRAG]=!0;r.touchData.start.trigger("free").trigger("unactivate")}s.viewport({zoom:rt,pan:ot,cancelOnFailedZoom:!0});v=H;d=L;f=I;p=R;h=A;r.pinching=!0}if(n.touches[0]){var y=r.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);l[0]=y[0];l[1]=y[1]}if(n.touches[1]){var y=r.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);l[2]=y[0];l[3]=y[1]}if(n.touches[2]){var y=r.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);l[4]=y[0];l[5]=y[1]}}else if(n.touches[0]){var st=r.touchData.start,lt=r.touchData.last,Y=Y||r.findNearestElement(l[0],l[1],!0);if(null!=st&&"nodes"==st._private.group&&r.nodeIsDraggable(st))if(j>=r.tapThreshold2){for(var W=r.dragData.touchDragEles,ut=0;ut<W.length;ut++){var ct=W[ut];if(r.nodeIsDraggable(ct)&&ct.isNode()&&ct.grabbed()){r.dragData.didDrag=!0;var dt=ct._private.position,ft=!r.hoverData.draggingEles;if(e.is.number(b[0])&&e.is.number(b[1])){dt.x+=b[0];dt.y+=b[1]}if(ft){a(ct,{inDragLayer:!0});var pt=r.touchData.dragDelta;if(e.is.number(pt[0])&&e.is.number(pt[1])){dt.x+=pt[0];dt.y+=pt[1]}}}}var ht=new e.Collection(s,ct);ht.updateCompoundBounds();ht.trigger("position drag");r.hoverData.draggingEles=!0;r.data.canvasNeedsRedraw[t.DRAG]=!0;r.touchData.startPosition[0]==u[0]&&r.touchData.startPosition[1]==u[1]&&(r.data.canvasNeedsRedraw[t.NODE]=!0);r.redraw()}else{var pt=r.touchData.dragDelta=r.touchData.dragDelta||[];if(0===pt.length){pt.push(0);pt.push(0)}else{pt[0]+=b[0];pt[1]+=b[1]}}if(null!=st){st.trigger(new e.Event(n,{type:"touchmove",cyPosition:{x:l[0],y:l[1]}}));st.trigger(new e.Event(n,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}}));st.trigger(new e.Event(n,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}}))}if(null==st){if(null!=Y){Y.trigger(new e.Event(n,{type:"touchmove",cyPosition:{x:l[0],y:l[1]}}));
Y.trigger(new e.Event(n,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}}));Y.trigger(new e.Event(n,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}}))}if(null==Y){s.trigger(new e.Event(n,{type:"touchmove",cyPosition:{x:l[0],y:l[1]}}));s.trigger(new e.Event(n,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}}));s.trigger(new e.Event(n,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}}))}}if(Y!=lt){lt&&lt.trigger(new e.Event(n,{type:"tapdragout",cyPosition:{x:l[0],y:l[1]}}));Y&&Y.trigger(new e.Event(n,{type:"tapdragover",cyPosition:{x:l[0],y:l[1]}}))}r.touchData.last=Y;for(var U=0;U<l.length;U++)l[U]&&r.touchData.startPosition[U]&&Math.abs(l[U]-r.touchData.startPosition[U])>4&&(r.touchData.singleTouchMoved=!0);if(o&&(null==st||st.isEdge())&&s.panningEnabled()&&s.userPanningEnabled()){if(r.swipePanning)s.panBy({x:b[0]*c,y:b[1]*c});else if(j>=r.tapThreshold2){r.swipePanning=!0;s.panBy({x:T*c,y:P*c})}if(st){st.unactivate();r.data.bgActivePosistion||(r.data.bgActivePosistion={x:l[0],y:l[1]});r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;r.touchData.start=null}var y=r.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);l[0]=y[0];l[1]=y[1]}}for(var _=0;_<l.length;_++)u[_]=l[_]},1e3/30,{trailing:!0}),!1);r.registerBinding(window,"touchcancel",function(){var e=r.touchData.start;r.touchData.capture=!1;e&&e.unactivate()});r.registerBinding(window,"touchend",function(n){var i=r.touchData.start,a=r.touchData.capture;if(a){r.touchData.capture=!1;n.preventDefault();var s=r.data.select;r.swipePanning=!1;r.hoverData.draggingEles=!1;var l=r.data.cy,u=l.zoom(),c=r.touchData.now,d=r.touchData.earlier;if(n.touches[0]){var f=r.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=f[0];c[1]=f[1]}if(n.touches[1]){var f=r.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=f[0];c[3]=f[1]}if(n.touches[2]){var f=r.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=f[0];c[5]=f[1]}i&&i.unactivate();var p;if(r.touchData.cxt){p=new e.Event(n,{type:"cxttapend",cyPosition:{x:c[0],y:c[1]}});i?i.trigger(p):l.trigger(p);if(!r.touchData.cxtDragged){var h=new e.Event(n,{type:"cxttap",cyPosition:{x:c[0],y:c[1]}});i?i.trigger(h):l.trigger(h)}r.touchData.start&&(r.touchData.start._private.grabbed=!1);r.touchData.cxt=!1;r.touchData.start=null;r.redraw()}else{if(!n.touches[2]&&l.boxSelectionEnabled()){clearTimeout(this.threeFingerSelectTimeout);var v=[],g=r.getAllInBox(s[0],s[1],s[2],s[3]);s[0]=void 0;s[1]=void 0;s[2]=void 0;s[3]=void 0;s[4]=0;r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;for(var y=0;y<g.length;y++)g[y]._private.selectable&&v.push(g[y]);var m=new e.Collection(l,v);"single"===l.selectionType()&&l.$(":selected").not(m).unselect();m.select();m.length>0?r.data.canvasNeedsRedraw[t.NODE]=!0:r.redraw()}var w=!1;if(null!=i){i._private.active=!1;w=!0;i.unactivate()}if(n.touches[2]){r.data.bgActivePosistion=void 0;r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0}else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){r.data.bgActivePosistion=void 0;r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;if(null!=i){if(i._private.grabbed){i._private.grabbed=!1;i.trigger("free");i._private.rscratch.inDragLayer=!1}for(var x=i._private.edges,b=0;b<x.length;b++)x[b]._private.rscratch.inDragLayer=!1;o(i,!1);if(i.selected())for(var _=l.$("node:selected"),k=0;k<_.length;k++){var C=_[k];C._private.rscratch.inDragLayer=!1;C._private.grabbed=!1;for(var x=C._private.edges,b=0;b<x.length;b++)x[b]._private.rscratch.inDragLayer=!1;o(C,!1)}r.data.canvasNeedsRedraw[t.DRAG]=!0;r.data.canvasNeedsRedraw[t.NODE]=!0;i.trigger(new e.Event(n,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}}));i.unactivate();r.touchData.start=null}else{var E=r.findNearestElement(c[0],c[1],!0);null!=E&&E.trigger(new e.Event(n,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}}));null==E&&l.trigger(new e.Event(n,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}}))}var S=r.touchData.startPosition[0]-c[0],T=S*S,D=r.touchData.startPosition[1]-c[1],P=D*D,N=T+P,M=N*u*u;if(null!=i&&!r.dragData.didDrag&&i._private.selectable&&M<r.tapThreshold2&&!r.pinching){if("single"===l.selectionType()){l.$(":selected").not(i).unselect();i.select()}else i.selected()?i.unselect():i.select();w=!0;r.data.canvasNeedsRedraw[t.NODE]=!0}r.touchData.singleTouchMoved===!1&&(i?i.trigger(new e.Event(n,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"vclick",cyPosition:{x:c[0],y:c[1]}})):l.trigger(new e.Event(n,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"vclick",cyPosition:{x:c[0],y:c[1]}})));r.touchData.singleTouchMoved=!0}for(var b=0;b<c.length;b++)d[b]=c[b];r.dragData.didDrag=!1;n.touches[0]&&(r.touchData.dragDelta=[]);w&&i&&i.updateStyle(!1);if(n.touches.length<2){r.pinching=!1;r.data.canvasNeedsRedraw[t.NODE]=!0;r.redraw()}}}},!1)}})(n);(function(e){"use strict";for(var t=e("renderer","canvas"),r=t.prototype,n=t.usePaths(),i=t.nodeShapes={},a=Math.sin(0),o=Math.cos(0),s={},l={},u=.1,c=0*Math.PI;c<2*Math.PI;c+=u){s[c]=Math.sin(c);l[c]=Math.cos(c)}i.ellipse={draw:function(e,t,r,n,a){i.ellipse.drawPath(e,t,r,n,a);e.fill()},drawPath:function(e,t,r,i,c){if(n){e.beginPath&&e.beginPath();for(var d,f,p=i/2,h=c/2,v=0*Math.PI;v<2*Math.PI;v+=u){d=t-p*s[v]*a+p*l[v]*o;f=r+h*l[v]*a+h*s[v]*o;0===v?e.moveTo(d,f):e.lineTo(d,f)}e.closePath()}else{e.beginPath&&e.beginPath();e.translate(t,r);e.scale(i/2,c/2);e.arc(0,0,1,0,2*Math.PI*.999,!1);e.closePath();e.scale(2/i,2/c);e.translate(-t,-r)}},intersectLine:function(t,r,n,i,a,o,s){var l=e.math.intersectLineEllipse(a,o,t,r,n/2+s,i/2+s);return l},intersectBox:function(t,r,n,i,a,o,s,l,u){return e.math.boxIntersectEllipse(t,r,n,i,u,a,o,s,l)},checkPoint:function(e,t,r,n,i,a,o){e-=a;t-=o;e/=n/2+r;t/=i/2+r;return Math.pow(e,2)+Math.pow(t,2)<=1}};i.triangle={points:e.math.generateUnitNgonPointsFitToSquare(3,0),draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.triangle.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.triangle.points)},intersectLine:function(t,r,n,a,o,s,l){return e.math.polygonIntersectLine(o,s,i.triangle.points,t,r,n/2,a/2,l)},intersectBox:function(t,r,n,a,o,s,l,u,c){var d=i.triangle.points;return e.math.boxIntersectPolygon(t,r,n,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.triangle.points,s,l,a,o,[0,-1],n)}};i.square={points:e.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.square.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.square.points)},intersectLine:function(t,r,n,a,o,s,l){return e.math.polygonIntersectLine(o,s,i.square.points,t,r,n/2,a/2,l)},intersectBox:function(t,r,n,a,o,s,l,u,c){var d=i.square.points;return e.math.boxIntersectPolygon(t,r,n,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.square.points,s,l,a,o,[0,-1],n)}};i.rectangle=i.square;i.octogon={};i.roundrectangle={points:e.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,i,a){r.drawRoundRectangle(e,t,n,i,a,10)},drawPath:function(e,t,n,i,a){r.drawRoundRectanglePath(e,t,n,i,a,10)},intersectLine:function(t,r,n,i,a,o,s){return e.math.roundRectangleIntersectLine(a,o,t,r,n,i,s)},intersectBox:function(t,r,n,i,a,o,s,l,u){return e.math.roundRectangleIntersectBox(t,r,n,i,a,o,s,l,u)},checkPoint:function(t,r,n,a,o,s,l){var u=e.math.getRoundRectangleRadius(a,o);if(e.math.pointInsidePolygon(t,r,i.roundrectangle.points,s,l,a,o-2*u,[0,-1],n))return!0;if(e.math.pointInsidePolygon(t,r,i.roundrectangle.points,s,l,a-2*u,o,[0,-1],n))return!0;var c=function(e,t,r,n,i,a,o){e-=r;t-=n;e/=i/2+o;t/=a/2+o;return Math.pow(e,2)+Math.pow(t,2)<=1};return c(t,r,s-a/2+u,l-o/2+u,2*u,2*u,n)?!0:c(t,r,s+a/2-u,l-o/2+u,2*u,2*u,n)?!0:c(t,r,s+a/2-u,l+o/2-u,2*u,2*u,n)?!0:c(t,r,s-a/2+u,l+o/2-u,2*u,2*u,n)?!0:!1}};i.pentagon={points:e.math.generateUnitNgonPointsFitToSquare(5,0),draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.pentagon.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.pentagon.points)},intersectLine:function(e,t,n,a,o,s,l){return r.polygonIntersectLine(o,s,i.pentagon.points,e,t,n/2,a/2,l)},intersectBox:function(t,r,n,a,o,s,l,u,c){var d=i.pentagon.points;return e.math.boxIntersectPolygon(t,r,n,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.pentagon.points,s,l,a,o,[0,-1],n)}};i.hexagon={points:e.math.generateUnitNgonPointsFitToSquare(6,0),draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.hexagon.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.hexagon.points)},intersectLine:function(t,r,n,a,o,s,l){return e.math.polygonIntersectLine(o,s,i.hexagon.points,t,r,n/2,a/2,l)},intersectBox:function(t,r,n,a,o,s,l,u,c){var d=i.hexagon.points;return e.math.boxIntersectPolygon(t,r,n,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.hexagon.points,s,l,a,o,[0,-1],n)}};i.heptagon={points:e.math.generateUnitNgonPointsFitToSquare(7,0),draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.heptagon.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.heptagon.points)},intersectLine:function(e,t,n,a,o,s,l){return r.polygonIntersectLine(o,s,i.heptagon.points,e,t,n/2,a/2,l)},intersectBox:function(e,t,n,a,o,s,l,u,c){var d=i.heptagon.points;return r.boxIntersectPolygon(e,t,n,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.heptagon.points,s,l,a,o,[0,-1],n)}};i.octagon={points:e.math.generateUnitNgonPointsFitToSquare(8,0),draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.octagon.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.octagon.points)},intersectLine:function(e,t,n,a,o,s,l){return r.polygonIntersectLine(o,s,i.octagon.points,e,t,n/2,a/2,l)},intersectBox:function(e,t,n,a,o,s,l,u,c){var d=i.octagon.points;return r.boxIntersectPolygon(e,t,n,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.octagon.points,s,l,a,o,[0,-1],n)}};var d=new Array(20),f=e.math.generateUnitNgonPoints(5,0),p=e.math.generateUnitNgonPoints(5,Math.PI/5),h=.5*(3-Math.sqrt(5));h*=1.57;for(var c=0;c<p.length/2;c++){p[2*c]*=h;p[2*c+1]*=h}for(var c=0;5>c;c++){d[4*c]=f[2*c];d[4*c+1]=f[2*c+1];d[4*c+2]=p[2*c];d[4*c+3]=p[2*c+1]}d=e.math.fitPolygonToSquare(d);i.star5=i.star={points:d,draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.star5.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.star5.points)},intersectLine:function(e,t,n,a,o,s,l){return r.polygonIntersectLine(o,s,i.star5.points,e,t,n/2,a/2,l)},intersectBox:function(e,t,n,a,o,s,l,u,c){var d=i.star5.points;return r.boxIntersectPolygon(e,t,n,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.star5.points,s,l,a,o,[0,-1],n)}}})(n);(function(e){"use strict";function t(t){this._private={};this._private.options=e.util.extend({},r,t)}var r={animate:!0,maxSimulationTime:4e3,fit:!0,padding:30,boundingBox:void 0,ungrabifyWhileSimulating:!1,ready:void 0,stop:void 0,repulsion:void 0,stiffness:void 0,friction:void 0,gravity:!0,fps:void 0,precision:void 0,nodeMass:void 0,edgeLength:void 0,stepSize:.1,stableEnergy:function(e){var t=e;return t.max<=.5||t.mean<=.3},infinite:!1};t.prototype.run=function(){var t=this,r=this._private.options;e.util.require("arbor",function(n){function i(e,t){return null==t?void 0:"function"==typeof t?t.apply(e,[e._private.data,{nodes:u.length,edges:c.length,element:e}]):t}function a(e){if(!e.isFullAutoParent()){var t=e._private.data.id,n=i(e,r.nodeMass),a=e._private.locked,o=e.position(),s=p.fromScreen({x:o.x,y:o.y});e.scratch().arbor=p.addNode(t,{element:e,mass:n,fixed:a,x:a?s.x:void 0,y:a?s.y:void 0})}}function o(e){var t=e.source().id(),n=e.target().id(),a=i(e,r.edgeLength);e.scratch().arbor=p.addEdge(t,n,{length:a})}var s=r.cy,l=r.eles,u=l.nodes().not(":parent"),c=l.edges(),d=e.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:s.width(),h:s.height()}),f=!1;t.trigger({type:"layoutstart",layout:t});void 0!==r.liveUpdate&&(r.animate=r.liveUpdate);if(s.nodes().size()<=1){r.fit&&s.reset();s.nodes().position({x:Math.round((d.x1+d.x2)/2),y:Math.round((d.y1+d.y2)/2)});t.one("layoutready",r.ready);t.trigger({type:"layoutready",layout:t});t.one("layoutstop",r.stop);t.trigger({type:"layoutstop",layout:t})}else{var p=t._private.system=n.ParticleSystem();p.parameters({repulsion:r.repulsion,stiffness:r.stiffness,friction:r.friction,gravity:r.gravity,fps:r.fps,dt:r.dt,precision:r.precision});r.animate&&r.fit&&s.fit(d,r.padding);var h,v=250,g=!1,y=+new Date,m={init:function(){},redraw:function(){var e=p.energy();if(!r.infinite&&null!=r.stableEnergy&&null!=e&&e.n>0&&r.stableEnergy(e))t.stop();else{if(!r.infinite&&1/0!=v){clearTimeout(h);h=setTimeout(E,v)}var n=s.collection();p.eachNode(function(e,t){var r=e.data,i=r.element;if(null!=i&&!i.locked()&&!i.grabbed()){i.silentPosition({x:d.x1+t.x,y:d.y1+t.y});n.merge(i)}});if(r.animate&&n.length>0){f=!0;n.rtrigger("position");r.fit&&s.fit(r.padding);y=+new Date;f=!1}if(!g){g=!0;t.one("layoutready",r.ready);t.trigger({type:"layoutready",layout:t})}}}};p.renderer=m;p.screenSize(d.w,d.h);p.screenPadding(r.padding,r.padding,r.padding,r.padding);p.screenStep(r.stepSize);var w;u.on("grab free position",w=function(e){if(!f){var t=this.position(),i=p.fromScreen(t);if(i){var a=n.Point(i.x,i.y),o=r.padding;d.x1+o<=t.x&&t.x<=d.x2-o&&d.y1+o<=t.y&&t.y<=d.y2-o&&(this.scratch().arbor.p=a);switch(e.type){case"grab":this.scratch().arbor.fixed=!0;break;case"free":this.scratch().arbor.fixed=!1}}}});var x;u.on("lock unlock",x=function(){node.scratch().arbor.fixed=node.locked()});var b;l.on("remove",b=function(){});var _;s.on("add","*",_=function(){});var k;s.on("resize",k=function(){if(null==r.boundingBox&&null!=t._private.system){var e=s.width(),n=s.height();p.screenSize(e,n)}});u.each(function(e,t){a(t)});c.each(function(e,t){o(t)});var C=u.filter(":grabbable");r.ungrabifyWhileSimulating&&C.ungrabify();var E=t._private.doneHandler=function(){t._private.doneHandler=null;if(!r.animate){r.fit&&s.reset();u.rtrigger("position")}u.off("grab free position",w);u.off("lock unlock",x);l.off("remove",b);s.off("add","*",_);s.off("resize",k);r.ungrabifyWhileSimulating&&C.grabify();t.one("layoutstop",r.stop);t.trigger({type:"layoutstop",layout:t})};p.start();!r.infinite&&null!=r.maxSimulationTime&&r.maxSimulationTime>0&&1/0!==r.maxSimulationTime&&setTimeout(function(){t.stop()},r.maxSimulationTime)}});return this};t.prototype.stop=function(){null!=this._private.system&&this._private.system.stop();this._private.doneHandler&&this._private.doneHandler();return this};e("layout","arbor",t)})(n);(function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,directed:!1,padding:30,circle:!1,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){var t,r=this.options,n=r,i=r.cy,a=n.eles,o=a.nodes().not(":parent"),s=a,l=e.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()});if(e.is.elementOrCollection(n.roots))t=n.roots;else if(e.is.array(n.roots)){for(var u=[],c=0;c<n.roots.length;c++){var d=n.roots[c],f=i.getElementById(d);u.push(f)}t=new e.Collection(i,u)}else if(e.is.string(n.roots))t=i.$(n.roots);else if(n.directed)t=o.roots();else{for(var p=[],h=o;h.length>0;){var v=i.collection();a.bfs({roots:h[0],visit:function(e,t,r){v=v.add(r)},directed:!1});h=h.not(v);p.push(v)}t=i.collection();for(var c=0;c<p.length;c++){var g=p[c],y=g.maxDegree(!1),m=g.filter(function(){return this.degree(!1)===y});t=t.add(m)}}var w=[],x={},b={},_={},k={},C={};s.bfs({roots:t,directed:n.directed,visit:function(e,t,r,n,i){var a=this[0],o=a.id();w[t]||(w[t]=[]);w[t].push(a);x[o]=!0;b[o]=t;_[o]=i;k[o]=n;if(i){var s=i.id(),l=C[s]=C[s]||[];l.push(r)}}});for(var E=[],c=0;c<o.length;c++){var f=o[c];x[f.id()]||E.push(f)}for(var S=3*E.length,T=0;0!==E.length&&S>T;){for(var D=E.shift(),P=D.neighborhood().nodes(),N=!1,c=0;c<P.length;c++){var M=b[P[c].id()];if(void 0!==M){w[M].push(D);N=!0;break}}N||E.push(D);T++}for(;0!==E.length;){var D=E.shift(),N=!1;if(!N){0===w.length&&w.push([]);w[0].push(D)}}var j=function(){for(var e=0;e<w.length;e++)for(var t=w[e],r=0;r<t.length;r++){var n=t[r];n._private.scratch.breadthfirst={depth:e,index:r}}};j();for(var L=function(e){for(var t,r=e.connectedEdges(function(){return this.data("target")===e.id()}),n=e._private.scratch.breadthfirst,i=0,a=0;a<r.length;a++){var o=r[a],s=o.source()[0],l=s._private.scratch.breadthfirst;if(n.depth<=l.depth&&i<l.depth){i=l.depth;t=s}}return t},I=0;I<n.maximalAdjustments;I++){for(var R=w.length,A=[],c=0;R>c;c++)for(var M=w[c],O=M.length,z=0;O>z;z++){var f=M[z],B=f._private.scratch.breadthfirst,V=L(f);if(V){B.intEle=V;A.push(f)}}for(var c=0;c<A.length;c++){var f=A[c],B=f._private.scratch.breadthfirst,V=B.intEle,q=V._private.scratch.breadthfirst;w[B.depth].splice(B.index,1);for(var X=q.depth+1;X>w.length-1;)w.push([]);w[X].push(f);B.depth=X;B.index=w[X].length-1}j()}var F=0;if(n.avoidOverlap){for(var c=0;c<o.length;c++){var Y=o[c].outerWidth(),W=o[c].outerHeight();F=Math.max(F,Y,W)}F*=1.75}for(var U={},H=function(e){if(U[e.id()])return U[e.id()];for(var t=e._private.scratch.breadthfirst.depth,r=e.neighborhood().nodes(),n=0,i=0,a=0;a<r.length;a++){var o=r[a],s=o._private.scratch.breadthfirst.index,l=o._private.scratch.breadthfirst.depth,u=w[l].length;if(t>l||0===t){n+=s/u;i++}}i=Math.max(1,i);n/=i;0===i&&(n=void 0);U[e.id()]=n;return n},$=function(e,t){var r=H(e),n=H(t);return r-n},G=0;3>G;G++){for(var c=0;c<w.length;c++)w[c]=w[c].sort($);j()}for(var Z=0,c=0;c<w.length;c++)Z=Math.max(w[c].length,Z);for(var Q={x:l.x1+l.w/2,y:l.x1+l.h/2},J=function(e,t){var r=e._private.scratch.breadthfirst,i=r.depth,a=r.index,o=w[i].length;n.strictHierarchy&&(o=Z);var s=Math.max(l.w/(o+1),F),u=Math.max(l.h/(w.length+1),F),c=Math.min(l.w/2/w.length,l.h/2/w.length);c=Math.max(c,F);if(n.strictHierarchy&&!n.circle){var d={x:Q.x+(a+1-(o+1)/2)*s,y:(i+1)*u};if(t)return d;var f=C[e.id()];if(f){d.x=0;for(var p=0;p<f.length;p++){var h=K[f[p].id()];d.x+=h.x}d.x/=f.length}return d}if(n.circle){var v=c*i+c-(w.length>0&&w[0].length<=3?c/2:0),g=2*Math.PI/w[i].length*a;0===i&&1===w[0].length&&(v=1);return{x:Q.x+v*Math.cos(g),y:Q.y+v*Math.sin(g)}}return{x:Q.x+(a+1-(o+1)/2)*s,y:(i+1)*u}},K={},c=w.length-1;c>=0;c--)for(var M=w[c],z=0;z<M.length;z++){var D=M[z];K[D.id()]=J(D,c===w.length-1)}o.layoutPositions(this,n,function(){return K[this.id()]});return this};e("layout","breadthfirst",t)})(n);(function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,counterclockwise:!1,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){for(var t,r=this.options,n=r,i=r.cy,a=n.eles,o=a.nodes().not(":parent"),s=e.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),l={x:s.x1+s.w/2,y:s.y1+s.h/2},u=n.startAngle,c=2*Math.PI/o.length,d=0,f=0;f<o.length;f++){var p=o[f].outerWidth(),h=o[f].outerHeight();d=Math.max(d,p,h)}t=e.is.number(n.radius)?n.radius:o.length<=1?0:Math.min(s.h,s.w)/2-d;if(o.length>1&&n.avoidOverlap){d*=1.75;var c=2*Math.PI/o.length,v=Math.cos(c)-Math.cos(0),g=Math.sin(c)-Math.sin(0),y=Math.sqrt(d*d/(v*v+g*g));t=Math.max(y,t)}var m=function(){var e=t*Math.cos(u),r=t*Math.sin(u),i={x:l.x+e,y:l.y+r};u=n.counterclockwise?u-c:u+c;return i};o.layoutPositions(this,n,m);return this};e("layout","circle",t)})(n);(function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={animate:!1,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(){return 10},flow:void 0,alignment:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};t.prototype.run=function(){var t=this,r=this.options;e.util.require("cola",function(n){var i=r.cy,a=r.eles,o=a.nodes(),s=a.edges(),l=!1,u=e.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),c=function(t,r){if(e.is.fn(t)){var n=t;return n.apply(r,[r])}return t},d=function(){for(var t={min:1/0,max:-1/0},n={min:1/0,max:-1/0},a=0;a<o.length;a++){var s=o[a],c=s._private.scratch.cola;t.min=Math.min(t.min,c.x||0);t.max=Math.max(t.max,c.x||0);n.min=Math.min(n.min,c.y||0);n.max=Math.max(n.max,c.y||0)}o.positions(function(r,i){var a,o=i._private.scratch.cola;if(!i.grabbed()&&!i.isParent()){a={x:u.x1+o.x-t.min,y:u.y1+o.y-n.min};e.is.number(a.x)&&e.is.number(a.y)||(a=void 0)}return a});o.updateCompoundBounds();if(!l){p();l=!0}r.fit&&i.fit(r.padding)},f=function(){t.manuallyStopped=!1;r.ungrabifyWhileSimulating&&y.grabify();o.off("grab free position",m);o.off("lock unlock",w);t.one("layoutstop",r.stop);t.trigger({type:"layoutstop",layout:t})},p=function(){t.one("layoutready",r.ready);t.trigger({type:"layoutready",layout:t})},h=r.refresh,v=1;if(r.refresh<0){v=Math.abs(r.refresh);h=1}else h=Math.max(1,h);var g=n.adaptor({trigger:function(e){switch(e.type){case"tick":r.animate&&d();break;case"end":d();(!r.infinite||t.manuallyStopped)&&f()}},kick:function(t){var n=0,i=function(){var e=t();e&&r.infinite&&g.resume();return e},a=function(){var e,t=n;n=(n+1)%v;if(0!==t)return!1;for(var r=0;h>r&&!e;r++)e=e||i();return e};if(r.animate){var o=function(){a()||e.util.requestAnimationFrame(o)};e.util.requestAnimationFrame(o)}else for(;!i(););},on:function(){},drag:function(){}});t.adaptor=g;var y=o.filter(":grabbable");r.ungrabifyWhileSimulating&&y.ungrabify();var m;o.on("grab free position",m=function(t){var r=this,n=r._private.scratch.cola,i=r._private.position;if(r.grabbed()){n.x=i.x-u.x1;n.y=i.y-u.y1;g.dragstart(n)}else if(e.is.number(n.x)&&e.is.number(n.y)){i.x=n.x+u.x1;i.y=n.y+u.y1}switch(t.type){case"grab":g.dragstart(n);g.resume();break;case"free":g.dragend(n)}});var w;o.on("lock unlock",w=function(){var e=this,t=e._private.scratch.cola;e.locked()?g.dragstart(t):g.dragend(t)});var x=o.stdFilter(function(e){return!e.isParent()});g.nodes(x.map(function(e,t){var n=c(r.nodeSpacing,e),i=e.position(),a=e._private.scratch.cola={x:r.randomize?Math.round(Math.random()*u.w):i.x,y:r.randomize?Math.round(Math.random()*u.h):i.y,width:e.outerWidth()+2*n,height:e.outerHeight()+2*n,index:t};return a}));if(r.alignment){var b=[],_=[];x.forEach(function(e){var t=c(r.alignment,e),n=e._private.scratch.cola,i=n.index;if(t){null!=t.x&&b.push({node:i,offset:t.x});null!=t.y&&_.push({node:i,offset:t.y})}});var k=[];b.length>0&&k.push({type:"alignment",axis:"x",offsets:b});_.length>0&&k.push({type:"alignment",axis:"y",offsets:_});g.constraints(k)}g.groups(o.stdFilter(function(e){return e.isParent()}).map(function(e,t){e._private.scratch.cola={index:t,leaves:e.descendants().stdFilter(function(e){return!e.isParent()}).map(function(e){return e[0]._private.scratch.cola.index})};return e}).map(function(e){e._private.scratch.cola.groups=e.descendants().stdFilter(function(e){return e.isParent()}).map(function(e){return e._private.scratch.cola.index});return e._private.scratch.cola}));var C,E;if(null!=r.edgeLength){C=r.edgeLength;E="linkDistance"}else if(null!=r.edgeSymDiffLength){C=r.edgeSymDiffLength;E="symmetricDiffLinkLengths"}else if(null!=r.edgeJaccardLength){C=r.edgeJaccardLength;E="jaccardLinkLengths"}else{C=100;E="linkDistance"}var S=function(e){return e.calcLength};g.links(s.stdFilter(function(e){return!e.source().isParent()&&!e.target().isParent()}).map(function(e){var t=e._private.scratch.cola={source:e.source()[0]._private.scratch.cola.index,target:e.target()[0]._private.scratch.cola.index};null!=C&&(t.calcLength=c(C,e));return t}));g.size([u.w,u.h]);null!=C&&g[E](S);if(r.flow){var T,D="y",P=50;if(e.is.string(r.flow))T={axis:r.flow,minSeparation:P};else if(e.is.number(r.flow))T={axis:D,minSeparation:r.flow};else if(e.is.plainObject(r.flow)){T=r.flow;T.axis=T.axis||D;T.minSeparation=null!=T.minSeparation?T.minSeparation:P}else T={axis:D,minSeparation:P};g.flowLayout(T.axis,T.minSeparation)}g.avoidOverlaps(r.avoidOverlap).handleDisconnected(r.handleDisconnected).start(r.unconstrIter,r.userConstIter,r.allConstIter);t.trigger({type:"layoutstart",layout:t});r.infinite||setTimeout(function(){g.stop()},r.maxSimulationTime)});return this};t.prototype.stop=function(){if(this.adaptor){this.manuallyStopped=!0;this.adaptor.stop()}return this};e("layout","cola",t)})(n);(function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(){return this.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){for(var t=this.options,r=t,n=t.cy,i=r.eles,a=i.nodes().not(":parent"),o=e.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=r.startAngle,c=0,d=0;d<a.length;d++){var f,p=a[d];f=r.concentric.call(p);l.push({value:f,node:p});p._private.layoutData.concentric=f}a.updateStyle();for(var d=0;d<a.length;d++){var p=a[d];c=Math.max(c,p.outerWidth(),p.outerHeight())}l.sort(function(e,t){return t.value-e.value});for(var h=r.levelWidth(a),v=[[]],g=v[0],d=0;d<l.length;d++){var y=l[d];if(g.length>0){var m=Math.abs(g[0].value-y.value);if(m>=h){g=[];v.push(g)}}g.push(y)}var w={},x=0,b=c+r.minNodeSpacing;if(!r.avoidOverlap){var _=v.length>0&&v[0].length>1,k=Math.min(o.w,o.h)/2-b,C=k/(v.length+_?1:0);b=Math.min(b,C)}for(var d=0;d<v.length;d++){var E=v[d],S=2*Math.PI/E.length;if(E.length>1&&r.avoidOverlap){var T=Math.cos(S)-Math.cos(0),D=Math.sin(S)-Math.sin(0),P=Math.sqrt(b*b/(T*T+D*D));x=Math.max(P,x)}for(var N=0;N<E.length;N++){var y=E[N],u=r.startAngle+(r.counterclockwise?1:-1)*S*N,M={x:s.x+x*Math.cos(u),y:s.y+x*Math.sin(u)};w[y.node.id()]=M}x+=b}a.layoutPositions(this,r,function(){var e=this.id();return w[e]});return this};e("layout","concentric",t)})(n);(function(e){"use strict";function t(t){this.options=e.util.extend({},n,t)}var r,n={ready:function(){},stop:function(){},animate:!0,refresh:4,fit:!0,padding:30,boundingBox:void 0,randomize:!0,debug:!1,nodeRepulsion:4e5,nodeOverlap:10,idealEdgeLength:10,edgeElasticity:100,nestingFactor:5,gravity:250,numIter:100,initialTemp:200,coolingFactor:.95,minTemp:1};t.prototype.run=function(){var t=this.options,n=t.cy,a=this;a.stopped=!1;a.trigger({type:"layoutstart",layout:a});r=!0===t.debug?!0:!1;var o=new Date,d=i(n,a,t);r&&s(d);!0===t.randomize&&l(d,n);m(d,n,t);var f=function(e){if(a.stopped){b("Layout manually stopped. Stopping computation in step "+e);return!1}c(d,n,t,e);d.temperature=d.temperature*t.coolingFactor;b("New temperature: "+d.temperature);if(d.temperature<t.minTemp){b("Temperature drop below minimum threshold. Stopping computation in step "+e);return!1}return!0},p=function(){u(d,n,t);!0===t.fit&&n.fit(t.padding);var e=new Date;console.info("Layout took "+(e-o)+" ms");a.one("layoutstop",t.stop);a.trigger({type:"layoutstop",layout:a})};if(t.animate){var h=0,v=function(){for(var r,i=0;i<t.refresh&&h<t.numIter;){var r=f(h);if(r===!1)break;i++;h++}u(d,n,t);t.fit&&n.fit(t.padding);r!==!1&&h+1<t.numIter?e.util.requestAnimationFrame(v):p()};e.util.requestAnimationFrame(v)}else{for(var h=0;h<t.numIter&&f(h)!==!1;h++);p()}return this};t.prototype.stop=function(){this.stopped=!0;return this};var i=function(t,r,n){for(var i=n.eles.edges(),o=n.eles.nodes(),s={layout:r,layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:e.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},l=0;l<s.nodeSize;l++){var u={};u.id=o[l].data("id");u.parentId=o[l].data("parent");u.children=[];u.positionX=o[l].position("x");u.positionY=o[l].position("y");u.offsetX=0;u.offsetY=0;u.height=o[l].height();u.width=o[l].width();u.maxX=u.positionX+u.width/2;u.minX=u.positionX-u.width/2;u.maxY=u.positionY+u.height/2;u.minY=u.positionY-u.height/2;u.padLeft=o[l]._private.style["padding-left"].pxValue;u.padRight=o[l]._private.style["padding-right"].pxValue;u.padTop=o[l]._private.style["padding-top"].pxValue;u.padBottom=o[l]._private.style["padding-bottom"].pxValue;s.layoutNodes.push(u);s.idToIndex[u.id]=l}for(var c=[],d=0,f=-1,p=[],l=0;l<s.nodeSize;l++){var h=s.layoutNodes[l],v=h.parentId;if(null!=v)s.layoutNodes[s.idToIndex[v]].children.push(h.id);else{c[++f]=h.id;p.push(h.id)}}s.graphSet.push(p);for(;f>=d;){var g=c[d++],y=s.idToIndex[g],m=s.layoutNodes[y],w=m.children;if(w.length>0){s.graphSet.push(w);for(var l=0;l<w.length;l++)c[++f]=w[l]}}for(var l=0;l<s.graphSet.length;l++)for(var x=s.graphSet[l],_=0;_<x.length;_++){var k=s.idToIndex[x[_]];s.indexToGraph[k]=l}for(var l=0;l<s.edgeSize;l++){var C=i[l],E={};E.id=C.data("id");E.sourceId=C.data("source");E.targetId=C.data("target");var S=n.idealEdgeLength,T=s.idToIndex[E.sourceId],D=s.idToIndex[E.targetId],P=s.indexToGraph[T],N=s.indexToGraph[D];if(P!=N){for(var M=a(E.sourceId,E.targetId,s),j=s.graphSet[M],L=0,u=s.layoutNodes[T];-1===$.inArray(u.id,j);){u=s.layoutNodes[s.idToIndex[u.parentId]];L++}u=s.layoutNodes[D];for(;-1===$.inArray(u.id,j);){u=s.layoutNodes[s.idToIndex[u.parentId]];L++}b("LCA of nodes "+E.sourceId+" and "+E.targetId+". Index: "+M+" Contents: "+j.toString()+". Depth: "+L);S*=L*n.nestingFactor}E.idealLength=S;s.layoutEdges.push(E)}return s},a=function(e,t,r){var n=o(e,t,0,r);return 2>n.count?0:n.graph},o=function(e,t,r,n){var i=n.graphSet[r];if(-1<$.inArray(e,i)&&-1<$.inArray(t,i))return{count:2,graph:r};for(var a=0,s=0;s<i.length;s++){var l=i[s],u=n.idToIndex[l],c=n.layoutNodes[u].children;if(0!==c.length){var d=n.indexToGraph[n.idToIndex[c[0]]],f=o(e,t,d,n);if(0!==f.count){if(1!==f.count)return f;a++;if(2===a)break}}}return{count:a,graph:r}},s=function(e){if(r){console.debug("layoutNodes:");for(var t=0;t<e.nodeSize;t++){var n=e.layoutNodes[t],i="\nindex: "+t+"\nId: "+n.id+"\nChildren: "+n.children.toString()+"\nparentId: "+n.parentId+"\npositionX: "+n.positionX+"\npositionY: "+n.positionY+"\nOffsetX: "+n.offsetX+"\nOffsetY: "+n.offsetY+"\npadLeft: "+n.padLeft+"\npadRight: "+n.padRight+"\npadTop: "+n.padTop+"\npadBottom: "+n.padBottom;console.debug(i)}console.debug("idToIndex");for(var t in e.idToIndex)console.debug("Id: "+t+"\nIndex: "+e.idToIndex[t]);console.debug("Graph Set");for(var a=e.graphSet,t=0;t<a.length;t++)console.debug("Set : "+t+": "+a[t].toString());for(var i="IndexToGraph",t=0;t<e.indexToGraph.length;t++)i+="\nIndex : "+t+" Graph: "+e.indexToGraph[t];console.debug(i);i="Layout Edges";for(var t=0;t<e.layoutEdges.length;t++){var o=e.layoutEdges[t];i+="\nEdge Index: "+t+" ID: "+o.id+" SouceID: "+o.sourceId+" TargetId: "+o.targetId+" Ideal Length: "+o.idealLength}console.debug(i);i="nodeSize: "+e.nodeSize;i+="\nedgeSize: "+e.edgeSize;i+="\ntemperature: "+e.temperature;console.debug(i)}},l=function(e){for(var t=e.clientWidth,r=e.clientHeight,n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];i.positionX=Math.random()*t;i.positionY=Math.random()*r}},u=function(e,t,r){var n="Refreshing positions";b(n);var i=e.layout,a=r.eles.nodes(),o=e.boundingBox,s={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};if(r.boundingBox){a.forEach(function(t){var r=e.layoutNodes[e.idToIndex[t.data("id")]];s.x1=Math.min(s.x1,r.positionX);
s.x2=Math.max(s.x2,r.positionX);s.y1=Math.min(s.y1,r.positionY);s.y2=Math.max(s.y2,r.positionY)});s.w=s.x2-s.x1;s.h=s.y2-s.y1}a.positions(function(t,i){var a=e.layoutNodes[e.idToIndex[i.data("id")]];n="Node: "+a.id+". Refreshed position: ("+a.positionX+", "+a.positionY+").";b(n);if(r.boundingBox){var l=(a.positionX-s.x1)/s.w,u=(a.positionY-s.y1)/s.h;return{x:o.x1+l*o.w,y:o.y1+u*o.h}}return{x:a.positionX,y:a.positionY}});if(!0!==e.ready){n="Triggering layoutready";b(n);e.ready=!0;i.one("layoutready",r.ready);i.trigger({type:"layoutready",layout:this})}},c=function(e,t,r,n){var i="\n\n###############################";i+="\nSTEP: "+n;i+="\n###############################\n";b(i);d(e,t,r);v(e,t,r);g(e,t,r);y(e,t,r);m(e,t,r)},d=function(e,t,r){var n="calculateNodeForces";b(n);for(var i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],o=a.length;n="Set: "+a.toString();b(n);for(var s=0;o>s;s++)for(var l=e.layoutNodes[e.idToIndex[a[s]]],u=s+1;o>u;u++){var c=e.layoutNodes[e.idToIndex[a[u]]];f(l,c,e,t,r)}}},f=function(e,t,r,n,i){var a="Node repulsion. Node1: "+e.id+" Node2: "+t.id,o=t.positionX-e.positionX,s=t.positionY-e.positionY;a+="\ndirectionX: "+o+", directionY: "+s;if(0!==o||0!==s){var l=h(e,t,o,s);if(l>0){a+="\nNodes DO overlap.";a+="\nOverlap: "+l;var u=i.nodeOverlap*l,c=Math.sqrt(o*o+s*s);a+="\nDistance: "+c;var d=u*o/c,f=u*s/c}else{a+="\nNodes do NOT overlap.";var v=p(e,o,s),g=p(t,-1*o,-1*s),y=g.x-v.x,m=g.y-v.y,w=y*y+m*m,c=Math.sqrt(w);a+="\nDistance: "+c;var u=i.nodeRepulsion/w,d=u*y/c,f=u*m/c}e.offsetX-=d;e.offsetY-=f;t.offsetX+=d;t.offsetY+=f;a+="\nForceX: "+d+" ForceY: "+f;b(a)}else a+="\nNodes have the same position."},p=function(e,t,r){var n=e.positionX,i=e.positionY,a=e.height,o=e.width,s=r/t,l=a/o,u="Computing clipping point of node "+e.id+" . Height:  "+a+", Width: "+o+"\nDirection "+t+", "+r,c={};do{if(0===t&&r>0){c.x=n;u+="\nUp direction";c.y=i+a/2;break}if(0===t&&0>r){c.x=n;c.y=i+a/2;u+="\nDown direction";break}if(t>0&&s>=-1*l&&l>=s){c.x=n+o/2;c.y=i+o*r/2/t;u+="\nRightborder";break}if(0>t&&s>=-1*l&&l>=s){c.x=n-o/2;c.y=i-o*r/2/t;u+="\nLeftborder";break}if(r>0&&(-1*l>=s||s>=l)){c.x=n+a*t/2/r;c.y=i+a/2;u+="\nTop border";break}if(0>r&&(-1*l>=s||s>=l)){c.x=n-a*t/2/r;c.y=i-a/2;u+="\nBottom border";break}}while(!1);u+="\nClipping point found at "+c.x+", "+c.y;b(u);return c},h=function(e,t,r,n){if(r>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(n>0)var a=e.maxY-t.minY;else var a=t.maxY-e.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0},v=function(e,t,r){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],a=e.idToIndex[i.sourceId],o=e.layoutNodes[a],s=e.idToIndex[i.targetId],l=e.layoutNodes[s],u=l.positionX-o.positionX,c=l.positionY-o.positionY;if(0===u&&0===c)return;var d=p(o,u,c),f=p(l,-1*u,-1*c),h=f.x-d.x,v=f.y-d.y,g=Math.sqrt(h*h+v*v),y=Math.pow(i.idealLength-g,2)/r.edgeElasticity;if(0!==g)var m=y*h/g,w=y*v/g;else var m=0,w=0;o.offsetX+=m;o.offsetY+=w;l.offsetX-=m;l.offsetY-=w;var x="Edge force between nodes "+o.id+" and "+l.id;x+="\nDistance: "+g+" Force: ("+m+", "+w+")";b(x)}},g=function(e,t,r){var n="calculateGravityForces";b(n);for(var i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],o=a.length;n="Set: "+a.toString();b(n);if(0===i)var s=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[a[0]]],c=e.layoutNodes[e.idToIndex[u.parentId]],s=c.positionX,l=c.positionY;n="Center found at: "+s+", "+l;b(n);for(var d=0;o>d;d++){var f=e.layoutNodes[e.idToIndex[a[d]]];n="Node: "+f.id;var p=s-f.positionX,h=l-f.positionY,v=Math.sqrt(p*p+h*h);if(v>1){var g=r.gravity*p/v,y=r.gravity*h/v;f.offsetX+=g;f.offsetY+=y;n+=": Applied force: "+g+", "+y}else n+=": skypped since it's too close to center";b(n)}}},y=function(e){var t=[],r=0,n=-1;b("propagateForces");t.push.apply(t,e.graphSet[0]);n+=e.graphSet[0].length;for(;n>=r;){var i=t[r++],a=e.idToIndex[i],o=e.layoutNodes[a],s=o.children;if(0<s.length){var l=o.offsetX,u=o.offsetY,c="Propagating offset from parent node : "+o.id+". OffsetX: "+l+". OffsetY: "+u;c+="\n Children: "+s.toString();b(c);for(var d=0;d<s.length;d++){var f=e.layoutNodes[e.idToIndex[s[d]]];f.offsetX+=l;f.offsetY+=u;t[++n]=s[d]}o.offsetX=0;o.offsetY=0}}},m=function(e){var t="Updating positions";b(t);for(var r=0;r<e.nodeSize;r++){var n=e.layoutNodes[r];if(0<n.children.length){b("Resetting boundaries of compound node: "+n.id);n.maxX=void 0;n.minX=void 0;n.maxY=void 0;n.minY=void 0}}for(var r=0;r<e.nodeSize;r++){var n=e.layoutNodes[r];if(0<n.children.length)b("Skipping position update of node: "+n.id);else{t="Node: "+n.id+" Previous position: ("+n.positionX+", "+n.positionY+").";var i=w(n.offsetX,n.offsetY,e.temperature);n.positionX+=i.x;n.positionY+=i.y;n.offsetX=0;n.offsetY=0;n.minX=n.positionX-n.width;n.maxX=n.positionX+n.width;n.minY=n.positionY-n.height;n.maxY=n.positionY+n.height;t+=" New Position: ("+n.positionX+", "+n.positionY+").";b(t);x(n,e)}}for(var r=0;r<e.nodeSize;r++){var n=e.layoutNodes[r];if(0<n.children.length){n.positionX=(n.maxX+n.minX)/2;n.positionY=(n.maxY+n.minY)/2;n.width=n.maxX-n.minX;n.height=n.maxY-n.minY;t="Updating position, size of compound node "+n.id;t+="\nPositionX: "+n.positionX+", PositionY: "+n.positionY;t+="\nWidth: "+n.width+", Height: "+n.height;b(t)}}},w=function(e,t,r){var n="Limiting force: ("+e+", "+t+"). Max: "+r,i=Math.sqrt(e*e+t*t);if(i>r)var a={x:r*e/i,y:r*t/i};else var a={x:e,y:t};n+=".\nResult: ("+a.x+", "+a.y+")";b(n);return a},x=function(e,t){var r="Propagating new position/size of node "+e.id,n=e.parentId;if(null!=n){var i=t.layoutNodes[t.idToIndex[n]],a=!1;if(null==i.maxX||e.maxX+i.padRight>i.maxX){i.maxX=e.maxX+i.padRight;a=!0;r+="\nNew maxX for parent node "+i.id+": "+i.maxX}if(null==i.minX||e.minX-i.padLeft<i.minX){i.minX=e.minX-i.padLeft;a=!0;r+="\nNew minX for parent node "+i.id+": "+i.minX}if(null==i.maxY||e.maxY+i.padBottom>i.maxY){i.maxY=e.maxY+i.padBottom;a=!0;r+="\nNew maxY for parent node "+i.id+": "+i.maxY}if(null==i.minY||e.minY-i.padTop<i.minY){i.minY=e.minY-i.padTop;a=!0;r+="\nNew minY for parent node "+i.id+": "+i.minY}if(a){b(r);return x(i,t)}r+=". No changes in boundaries/position of parent node "+i.id;b(r)}else{r+=". No parent node.";b(r)}},b=function(e){r&&console.debug(e)};e("layout","cose",t)})(n);(function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,minLen:function(){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,boundingBox:void 0,ready:function(){},stop:function(){}};t.prototype.run=function(){var t=this.options,r=this;e.util.require("dagre",function(n){for(var i=t.cy,a=t.eles,o=e.util.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),s=new n.Digraph,l=a.nodes().not(":parent"),u=0;u<l.length;u++){var c=l[u];s.addNode(c.id(),{width:c.width(),height:c.height()})}for(var d=a.edges().stdFilter(function(e){return!e.source().is(":parent")&&!e.target().is(":parent")}),u=0;u<d.length;u++){var f=d[u];s.addEdge(f.id(),f.source().id(),f.target().id(),{minLen:e.is.fn(t.minLen)?t.minLen.apply(f,[f]):t.minLen})}var p=n.layout();t.nodeSep&&p.nodeSep(t.nodeSep);t.edgeSep&&p.edgeSep(t.edgeSep);t.rankSep&&p.rankSep(t.rankSep);t.rankDir&&p.rankDir(t.rankDir);p=p.run(s);p.eachNode(function(e,t){i.getElementById(e).scratch().dagre=t});var h;if(t.boundingBox){h={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};l.forEach(function(e){var t=e.scratch().dagre;h.x1=Math.min(h.x1,t.x);h.x2=Math.max(h.x2,t.x);h.y1=Math.min(h.y1,t.y);h.y2=Math.max(h.y2,t.y)});h.w=h.x2-h.x1;h.h=h.y2-h.y1}else h=o;var v=function(e){if(t.boundingBox){var r=(e.x-h.x1)/h.w,n=(e.y-h.y1)/h.h;return{x:o.x1+r*o.w,y:o.y1+n*o.h}}return e};l.layoutPositions(r,t,function(){var e=this.scratch().dagre;return v({x:e.x,y:e.y})})});return this};e("layout","dagre",t)})(n);(function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,rows:void 0,columns:void 0,position:function(){},animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){var t=this.options,r=t,n=t.cy,i=r.eles,a=i.nodes().not(":parent"),o=e.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===o.h||0===o.w)a.layoutPositions(this,r,function(){return{x:o.x1,y:o.y1}});else{var s=a.size(),l=Math.sqrt(s*o.h/o.w),u=Math.round(l),c=Math.round(o.w/o.h*l),d=function(e){if(null==e)return Math.min(u,c);var t=Math.min(u,c);t==u?u=e:c=e},f=function(e){if(null==e)return Math.max(u,c);var t=Math.max(u,c);t==u?u=e:c=e};if(null!=r.rows&&null!=r.columns){u=r.rows;c=r.columns}else if(null!=r.rows&&null==r.columns){u=r.rows;c=Math.ceil(s/u)}else if(null==r.rows&&null!=r.columns){c=r.columns;u=Math.ceil(s/c)}else if(c*u>s){var p=d(),h=f();(p-1)*h>=s?d(p-1):(h-1)*p>=s&&f(h-1)}else for(;s>c*u;){var p=d(),h=f();(h+1)*p>=s?f(h+1):d(p+1)}var v=o.w/c,g=o.h/u;if(r.avoidOverlap)for(var y=0;y<a.length;y++){var m=a[y],w=m.outerWidth(),x=m.outerHeight();v=Math.max(v,w);g=Math.max(g,x)}for(var b={},_=function(e,t){return b["c-"+e+"-"+t]?!0:!1},k=function(e,t){b["c-"+e+"-"+t]=!0},C=0,E=0,S=function(){E++;if(E>=c){E=0;C++}},T={},y=0;y<a.length;y++){var m=a[y],D=r.position(m);if(D&&(void 0!==D.row||void 0!==D.col)){var P={row:D.row,col:D.col};if(void 0===P.col){P.col=0;for(;_(P.row,P.col);)P.col++}else if(void 0===P.row){P.row=0;for(;_(P.row,P.col);)P.row++}T[m.id()]=P;k(P.row,P.col)}}var N=function(e,t){var r,n;if(t.locked()||t.isFullAutoParent())return!1;var i=T[t.id()];if(i){r=i.col*v+v/2+o.x1;n=i.row*g+g/2+o.y1}else{for(;_(C,E);)S();r=E*v+v/2+o.x1;n=C*g+g/2+o.y1;k(C,E);S()}return{x:r,y:n}};a.layoutPositions(this,r,N)}return this};e("layout","grid",t)})(n);(function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={ready:function(){},stop:function(){}};t.prototype.run=function(){{var e=this.options,t=e.eles,r=this;e.cy}r.trigger("layoutstart");t.nodes().positions(function(){return{x:0,y:0}});r.one("layoutready",e.ready);r.trigger("layoutready");r.one("layoutstop",e.stop);r.trigger("layoutstop");return this};t.prototype.stop=function(){return this};e("layout","null",t)})(n);(function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){function t(e){if(null==r.positions)return null;if(a)return r.positions.apply(e,[e]);var t=r.positions[e._private.data.id];return null==t?null:t}var r=this.options,n=r.eles,i=n.nodes(),a=e.is.fn(r.positions);i.layoutPositions(this,r,function(e,r){var n=t(r);return r.locked()||null==n?!1:n});return this};e("layout","preset",t)})(n);(function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){var t=this.options,r=t.cy,n=t.eles,i=n.nodes().not(":parent"),a=e.util.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o=function(){return{x:a.x1+Math.round(Math.random()*a.w),y:a.y1+Math.round(Math.random()*a.h)}};i.layoutPositions(this,t,o);return this};e("layout","random",t)})(n);(function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={animate:!0,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,random:!1,infinite:!1,ready:void 0,stop:void 0,stiffness:400,repulsion:400,damping:.5};t.prototype.run=function(){var t=this,r=this,n=this.options;e.util.require("Springy",function(i){function a(e){var t=e.scratch("springy").model.id,r=b.layout.nodePoints[t].p,n=e.position(),i=null!=n.x&&null!=n.y?y(e.position()):{x:4*Math.random()-2,y:4*Math.random()-2};r.x=i.x;r.y=i.y}function o(){r.stopped=!1;n.ungrabifyWhileSimulating&&k.ungrabify();b.start()}var s=!1,l=n.cy;t.trigger({type:"layoutstart",layout:t});var u=n.eles,c=u.nodes().not(":parent"),d=u.edges(),f=e.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:l.width(),h:l.height()}),p=new i.Graph;c.each(function(e,t){t.scratch("springy",{model:p.newNode({element:t})})});d.each(function(e,t){var r=t.source().scratch("springy").model,n=t.target().scratch("springy").model;t.scratch("springy",{model:p.newEdge(r,n,{element:t})})});var h=window.sim=new i.Layout.ForceDirected(p,n.stiffness,n.repulsion,n.damping);n.infinite&&(h.minEnergyThreshold=-1/0);var v=h.getBoundingBox(),g=function(e){v=h.getBoundingBox();var t=v.topright.subtract(v.bottomleft),r=e.subtract(v.bottomleft).divide(t.x).x*f.w+f.x1,n=e.subtract(v.bottomleft).divide(t.y).y*f.h+f.x1;return new i.Vector(r,n)},y=function(e){v=h.getBoundingBox();var t=v.topright.subtract(v.bottomleft),r=(e.x-f.x1)/f.w*t.x+v.bottomleft.x,n=(e.y-f.y1)/f.h*t.y+v.bottomleft.y;return new i.Vector(r,n)},m=l.collection(),w=l.nodes().size(),x=1,b=new i.Renderer(h,function(){if(!r.stopped&&m.length>0&&n.animate){s=!0;m.rtrigger("position");n.fit&&l.fit(n.padding);m=l.collection();s=!1}},function(){},function(e,i){if(!r.stopped){var a=g(i),o=e.data.element;if(!o.locked()&&!o.grabbed()){o._private.position={x:a.x,y:a.y};m.merge(o)}if(x==w){t.one("layoutready",n.ready);t.trigger({type:"layoutready",layout:t})}x++}});c.each(function(e,t){n.random||a(t)});var _;c.on("position",_=function(){s||a(this)});var k=c.filter(":grabbable");r.stopSystem=function(){r.stopped=!0;p.filterNodes(function(){return!1});n.ungrabifyWhileSimulating&&k.grabify();n.fit&&l.fit(n.padding);c.off("drag position",_);t.one("layoutstop",n.stop);t.trigger({type:"layoutstop",layout:t});r.stopSystem=null};o();n.infinite||setTimeout(function(){r.stop()},n.maxSimulationTime)});return this};t.prototype.stop=function(){null!=this.stopSystem&&this.stopSystem();return this};e("layout","springy",t)})(n);(function(e){"use strict";function t(e){this.options=e}t.prototype.recalculateRenderedStyle=function(){};t.prototype.notify=function(){};e("renderer","null",t)})(n)},{}],13:[function(t,r,n){(function(t){(function(){function i(e,t){if(e!==t){var r=e===e,n=t===t;if(e>t||!r||"undefined"==typeof e&&n)return 1;if(t>e||!n||"undefined"==typeof t&&r)return-1}return 0}function a(e,t,r){for(var n=e.length,i=r?n:-1;r?i--:++i<n;)if(t(e[i],i,e))return i;return-1}function o(e,t,r){if(t!==t)return y(e,r);for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function s(e){return"function"==typeof e||!1}function l(e){return"string"==typeof e?e:null==e?"":e+""}function u(e){return e.charCodeAt(0)}function c(e,t){for(var r=-1,n=e.length;++r<n&&t.indexOf(e.charAt(r))>-1;);return r}function d(e,t){for(var r=e.length;r--&&t.indexOf(e.charAt(r))>-1;);return r}function f(e,t){return i(e.criteria,t.criteria)||e.index-t.index}function p(e,t,r){for(var n=-1,a=e.criteria,o=t.criteria,s=a.length,l=r.length;++n<s;){var u=i(a[n],o[n]);if(u)return n>=l?u:u*(r[n]?1:-1)}return e.index-t.index}function h(e){return Xt[e]}function v(e){return Ft[e]}function g(e){return"\\"+Ut[e]}function y(e,t,r){for(var n=e.length,i=t+(r?0:-1);r?i--:++i<n;){var a=e[i];if(a!==a)return i}return-1}function m(e){return!!e&&"object"==typeof e}function w(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function x(e,t){for(var r=-1,n=e.length,i=-1,a=[];++r<n;)if(e[r]===t){e[r]=W;a[++i]=r}return a}function b(e,t){for(var r,n=-1,i=e.length,a=-1,o=[];++n<i;){var s=e[n],l=t?t(s,n,e):s;if(!n||r!==l){r=l;o[++a]=s}}return o}function _(e){for(var t=-1,r=e.length;++t<r&&w(e.charCodeAt(t)););return t}function k(e){for(var t=e.length;t--&&w(e.charCodeAt(t)););return t}function C(e){return Yt[e]}function E(e){function t(e){if(m(e)&&!ol(e)&&!(e instanceof w)){if(e instanceof n)return e;if(Mo.call(e,"__chain__")&&Mo.call(e,"__wrapped__"))return $n(e)}return new n(e)}function r(){}function n(e,t,r){this.__wrapped__=e;this.__actions__=r||[];this.__chain__=!!t}function w(e){this.__wrapped__=e;this.__actions__=null;this.__dir__=1;this.__dropCount__=0;this.__filtered__=!1;this.__iteratees__=null;this.__takeCount__=ss;this.__views__=null}function J(){var e=this.__actions__,t=this.__iteratees__,r=this.__views__,n=new w(this.__wrapped__);n.__actions__=e?Zt(e):null;n.__dir__=this.__dir__;n.__filtered__=this.__filtered__;n.__iteratees__=t?Zt(t):null;n.__takeCount__=this.__takeCount__;n.__views__=r?Zt(r):null;return n}function rt(){if(this.__filtered__){var e=new w(this);e.__dir__=-1;e.__filtered__=!0}else{e=this.clone();e.__dir__*=-1}return e}function it(){var e=this.__wrapped__.value();if(!ol(e))return Hr(e,this.__actions__);var t=this.__dir__,r=0>t,n=Mn(0,e.length,this.__views__),i=n.start,a=n.end,o=a-i,s=r?a:i-1,l=ts(o,this.__takeCount__),u=this.__iteratees__,c=u?u.length:0,d=0,f=[];e:for(;o--&&l>d;){s+=t;for(var p=-1,h=e[s];++p<c;){var v=u[p],g=v.iteratee,y=v.type;if(y==q){if(v.done&&(r?s>v.index:s<v.index)){v.count=0;v.done=!1}v.index=s;if(!v.done){var m=v.limit;if(!(v.done=m>-1?v.count++>=m:!g(h)))continue e}}else{var w=g(h);if(y==F)h=w;else if(!w){if(y==X)continue e;break e}}}f[d++]=h}return f}function Xt(){this.__data__={}}function Ft(e){return this.has(e)&&delete this.__data__[e]}function Yt(e){return"__proto__"==e?S:this.__data__[e]}function Wt(e){return"__proto__"!=e&&Mo.call(this.__data__,e)}function Ut(e,t){"__proto__"!=e&&(this.__data__[e]=t);return this}function Ht(e){var t=e?e.length:0;this.data={hash:Qo(null),set:new Yo};for(;t--;)this.push(e[t])}function $t(e,t){var r=e.data,n="string"==typeof t||fa(t)?r.set.has(t):r.hash[t];return n?0:-1}function Gt(e){var t=this.data;"string"==typeof e||fa(e)?t.set.add(e):t.hash[e]=!0}function Zt(e,t){var r=-1,n=e.length;t||(t=vo(n));for(;++r<n;)t[r]=e[r];return t}function Qt(e,t){for(var r=-1,n=e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function Jt(e,t){for(var r=e.length;r--&&t(e[r],r,e)!==!1;);return e}function tr(e,t){for(var r=-1,n=e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function rr(e,t){for(var r=-1,n=e.length,i=-1,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[++i]=o)}return a}function nr(e,t){for(var r=-1,n=e.length,i=vo(n);++r<n;)i[r]=t(e[r],r,e);return i}function ir(e){for(var t=-1,r=e.length,n=os;++t<r;){var i=e[t];i>n&&(n=i)}return n}function ar(e){for(var t=-1,r=e.length,n=ss;++t<r;){var i=e[t];n>i&&(n=i)}return n}function or(e,t,r,n){var i=-1,a=e.length;n&&a&&(r=e[++i]);for(;++i<a;)r=t(r,e[i],i,e);return r}function sr(e,t,r,n){var i=e.length;n&&i&&(r=e[--i]);for(;i--;)r=t(r,e[i],i,e);return r}function lr(e,t){for(var r=-1,n=e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function ur(e){for(var t=e.length,r=0;t--;)r+=+e[t]||0;return r}function cr(e,t){return"undefined"==typeof e?t:e}function dr(e,t,r,n){return"undefined"!=typeof e&&Mo.call(n,r)?e:t}function fr(e,t,r){var n=ml(t);if(!r)return hr(t,e,n);for(var i=-1,a=n.length;++i<a;){var o=n[i],s=e[o],l=r(s,t[o],o,e,t);(l===l?l===s:s!==s)&&("undefined"!=typeof s||o in e)||(e[o]=l)}return e}function pr(e,t){for(var r=-1,n=e.length,i=zn(n),a=t.length,o=vo(a);++r<a;){var s=t[r];if(i){s=parseFloat(s);o[r]=Rn(s,n)?e[s]:S}else o[r]=e[s]}return o}function hr(e,t,r){if(!r){r=t;t={}}for(var n=-1,i=r.length;++n<i;){var a=r[n];t[a]=e[a]}return t}function vr(e,t,r){var n=typeof e;return"function"==n?"undefined"==typeof t?e:Zr(e,t,r):null==e?to:"object"==n?jr(e):"undefined"==typeof t?Ar(e+""):Lr(e+"",t)}function gr(e,t,r,n,i,a,o){var s;r&&(s=i?r(e,n,i):r(e));if("undefined"!=typeof s)return s;if(!fa(e))return e;var l=ol(e);if(l){s=jn(e);if(!t)return Zt(e,s)}else{var u=Lo.call(e),c=u==Q;if(u!=et&&u!=U&&(!c||i))return Vt[u]?In(e,u,t):i?e:{};s=Ln(c?{}:e);if(!t)return hr(e,s,ml(e))}a||(a=[]);o||(o=[]);for(var d=a.length;d--;)if(a[d]==e)return o[d];a.push(e);o.push(s);(l?Qt:Er)(e,function(n,i){s[i]=gr(n,t,r,i,e,a,o)});return s}function yr(e,t,r){if("function"!=typeof e)throw new Co(Y);return Wo(function(){e.apply(S,r)},t)}function mr(e,t){var r=e?e.length:0,n=[];if(!r)return n;var i=-1,a=Nn(),s=a==o,l=s&&t.length>=200?_s(t):null,u=t.length;if(l){a=$t;s=!1;t=l}e:for(;++i<r;){var c=e[i];if(s&&c===c){for(var d=u;d--;)if(t[d]===c)continue e;n.push(c)}else a(t,c,0)<0&&n.push(c)}return n}function wr(e,t){var r=!0;ys(e,function(e,n,i){r=!!t(e,n,i);return r});return r}function xr(e,t,r,n){var i=e.length;r=null==r?0:+r||0;0>r&&(r=-r>i?0:i+r);n="undefined"==typeof n||n>i?i:+n||0;0>n&&(n+=i);i=r>n?0:n>>>0;r>>>=0;for(;i>r;)e[r++]=t;return e}function br(e,t){var r=[];ys(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function _r(e,t,r,n){var i;r(e,function(e,r,a){if(t(e,r,a)){i=n?r:e;return!1}});return i}function kr(e,t,r){for(var n=-1,i=e.length,a=-1,o=[];++n<i;){var s=e[n];if(m(s)&&zn(s.length)&&(ol(s)||aa(s))){t&&(s=kr(s,t,r));var l=-1,u=s.length;o.length+=u;for(;++l<u;)o[++a]=s[l]}else r||(o[++a]=s)}return o}function Cr(e,t){return ws(e,t,Da)}function Er(e,t){return ws(e,t,ml)}function Sr(e,t){return xs(e,t,ml)}function Tr(e,t){for(var r=-1,n=t.length,i=-1,a=[];++r<n;){var o=t[r];ll(e[o])&&(a[++i]=o)}return a}function Dr(e,t,r,n,i,a){if(e===t)return 0!==e||1/e==1/t;var o=typeof e,s=typeof t;return"function"!=o&&"object"!=o&&"function"!=s&&"object"!=s||null==e||null==t?e!==e&&t!==t:Pr(e,t,Dr,r,n,i,a)}function Pr(e,t,r,n,i,a,o){var s=ol(e),l=ol(t),u=H,c=H;if(!s){u=Lo.call(e);u==U?u=et:u!=et&&(s=xa(e))}if(!l){c=Lo.call(t);c==U?c=et:c!=et&&(l=xa(t))}var d=u==et||i&&u==Q,f=c==et||i&&c==Q,p=u==c;if(p&&!s&&!d)return Sn(e,t,u);if(i){if(!(p||d&&f))return!1}else{var h=d&&Mo.call(e,"__wrapped__"),v=f&&Mo.call(t,"__wrapped__");if(h||v)return r(h?e.value():e,v?t.value():t,n,i,a,o);if(!p)return!1}a||(a=[]);o||(o=[]);for(var g=a.length;g--;)if(a[g]==e)return o[g]==t;a.push(e);o.push(t);var y=(s?En:Tn)(e,t,r,n,i,a,o);a.pop();o.pop();return y}function Nr(e,t,r,n,i){for(var a=-1,o=t.length,s=!i;++a<o;)if(s&&n[a]?r[a]!==e[t[a]]:!(t[a]in e))return!1;a=-1;for(;++a<o;){var l=t[a],u=e[l],c=r[a];if(s&&n[a])var d="undefined"!=typeof u||l in e;else{d=i?i(u,c,l):S;"undefined"==typeof d&&(d=Dr(c,u,i,!0))}if(!d)return!1}return!0}function Mr(e,t){var r=[];ys(e,function(e,n,i){r.push(t(e,n,i))});return r}function jr(e){var t=ml(e),r=t.length;if(!r)return eo(!0);if(1==r){var n=t[0],i=e[n];if(Bn(i))return function(e){return null!=e&&e[n]===i&&("undefined"!=typeof i||n in Hn(e))}}for(var a=vo(r),o=vo(r);r--;){i=e[t[r]];a[r]=i;o[r]=Bn(i)}return function(e){return null!=e&&Nr(Hn(e),t,a,o)}}function Lr(e,t){return Bn(t)?function(r){return null!=r&&r[e]===t&&("undefined"!=typeof t||e in Hn(r))}:function(r){return null!=r&&Dr(t,r[e],null,!0)}}function Ir(e,t,r,n,i){if(!fa(e))return e;var a=zn(t.length)&&(ol(t)||xa(t));(a?Qt:Er)(t,function(t,o,s){if(m(t)){n||(n=[]);i||(i=[]);return Rr(e,s,o,Ir,r,n,i)}var l=e[o],u=r?r(l,t,o,e,s):S,c="undefined"==typeof u;c&&(u=t);!a&&"undefined"==typeof u||!c&&(u===u?u===l:l!==l)||(e[o]=u)});return e}function Rr(e,t,r,n,i,a,o){for(var s=a.length,l=t[r];s--;)if(a[s]==l){e[r]=o[s];return}var u=e[r],c=i?i(u,l,r,e,t):S,d="undefined"==typeof c;if(d){c=l;zn(l.length)&&(ol(l)||xa(l))?c=ol(u)?u:u&&u.length?Zt(u):[]:ul(l)||aa(l)?c=aa(u)?ka(u):ul(u)?u:{}:d=!1}a.push(l);o.push(c);d?e[r]=n(c,l,i,a,o):(c===c?c!==u:u===u)&&(e[r]=c)}function Ar(e){return function(t){return null==t?S:t[e]}}function Or(e,t){return e+Vo(as()*(t-e+1))}function zr(e,t,r,n,i){i(e,function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)});return r}function Br(e,t,r){var n=-1,i=e.length;t=null==t?0:+t||0;0>t&&(t=-t>i?0:i+t);r="undefined"==typeof r||r>i?i:+r||0;0>r&&(r+=i);i=t>r?0:r-t>>>0;t>>>=0;for(var a=vo(i);++n<i;)a[n]=e[n+t];return a}function Vr(e,t){var r;ys(e,function(e,n,i){r=t(e,n,i);return!r});return!!r}function qr(e,t){var r=e.length;e.sort(t);for(;r--;)e[r]=e[r].value;return e}function Xr(e,t,r){var n=-1,i=e.length,a=zn(i)?vo(i):[];ys(e,function(e){for(var r=t.length,i=vo(r);r--;)i[r]=null==e?S:e[t[r]];a[++n]={criteria:i,index:n,value:e}});return qr(a,function(e,t){return p(e,t,r)})}function Fr(e,t){var r=0;ys(e,function(e,n,i){r+=+t(e,n,i)||0});return r}function Yr(e,t){var r=-1,n=Nn(),i=e.length,a=n==o,s=a&&i>=200,l=s?_s():null,u=[];if(l){n=$t;a=!1}else{s=!1;l=t?[]:u}e:for(;++r<i;){var c=e[r],d=t?t(c,r,e):c;if(a&&c===c){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d);u.push(c)}else if(n(l,d,0)<0){(t||s)&&l.push(d);u.push(c)}}return u}function Wr(e,t){for(var r=-1,n=t.length,i=vo(n);++r<n;)i[r]=e[t[r]];return i}function Ur(e,t,r,n){for(var i=e.length,a=n?i:-1;(n?a--:++a<i)&&t(e[a],a,e););return r?Br(e,n?0:a,n?a+1:i):Br(e,n?a+1:0,n?i:a)}function Hr(e,t){var r=e;r instanceof w&&(r=r.value());for(var n=-1,i=t.length;++n<i;){var a=[r],o=t[n];Xo.apply(a,o.args);r=o.func.apply(o.thisArg,a)}return r}function $r(e,t,r){var n=0,i=e?e.length:n;if("number"==typeof t&&t===t&&cs>=i){for(;i>n;){var a=n+i>>>1,o=e[a];(r?t>=o:t>o)?n=a+1:i=a}return i}return Gr(e,t,to,r)}function Gr(e,t,r,n){t=r(t);for(var i=0,a=e?e.length:0,o=t!==t,s="undefined"==typeof t;a>i;){var l=Vo((i+a)/2),u=r(e[l]),c=u===u;if(o)var d=c||n;else d=s?c&&(n||"undefined"!=typeof u):n?t>=u:t>u;d?i=l+1:a=l}return ts(a,us)}function Zr(e,t,r){if("function"!=typeof e)return to;if("undefined"==typeof t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,a){return e.call(t,r,n,i,a)};case 5:return function(r,n,i,a,o){return e.call(t,r,n,i,a,o)}}return function(){return e.apply(t,arguments)}}function Qr(e){return Oo.call(e,0)}function Jr(e,t,r){for(var n=r.length,i=-1,a=es(e.length-n,0),o=-1,s=t.length,l=vo(a+s);++o<s;)l[o]=t[o];for(;++i<n;)l[r[i]]=e[i];for(;a--;)l[o++]=e[i++];return l}function Kr(e,t,r){for(var n=-1,i=r.length,a=-1,o=es(e.length-i,0),s=-1,l=t.length,u=vo(o+l);++a<o;)u[a]=e[a];for(var c=a;++s<l;)u[c+s]=t[s];for(;++n<i;)u[c+r[n]]=e[a++];return u}function en(e,t){return function(r,n,i){var a=t?t():{};n=Pn(n,i,3);if(ol(r))for(var o=-1,s=r.length;++o<s;){var l=r[o];e(a,l,n(l,o,r),r)}else ys(r,function(t,r,i){e(a,t,n(t,r,i),i)});return a}}function tn(e){return function(){var t=arguments,r=t.length,n=t[0];if(2>r||null==n)return n;var i=t[r-2],a=t[r-1],o=t[3];if(r>3&&"function"==typeof i){i=Zr(i,a,5);r-=2}else{i=r>2&&"function"==typeof a?a:null;r-=i?1:0}if(o&&An(t[1],t[2],o)){i=3==r?null:i;r=2}for(var s=0;++s<r;){var l=t[s];l&&e(n,l,i)}return n}}function rn(e,t){return function(r,n){var i=r?r.length:0;if(!zn(i))return e(r,n);for(var a=t?i:-1,o=Hn(r);(t?a--:++a<i)&&n(o[a],a,o)!==!1;);return r}}function nn(e){return function(t,r,n){for(var i=Hn(t),a=n(t),o=a.length,s=e?o:-1;e?s--:++s<o;){var l=a[s];if(r(i[l],l,i)===!1)break}return t}}function an(e,t){function r(){var i=this&&this!==Kt&&this instanceof r?n:e;return i.apply(t,arguments)}var n=sn(e);return r}function on(e){return function(t){for(var r=-1,n=Ja(za(t)),i=n.length,a="";++r<i;)a=e(a,n[r],r);return a}}function sn(e){return function(){var t=gs(e.prototype),r=e.apply(t,arguments);return fa(r)?r:t}}function ln(e){function t(r,n,i){i&&An(r,n,i)&&(n=null);var a=Cn(r,e,null,null,null,null,null,n);a.placeholder=t.placeholder;return a}return t}function un(e,t){return function(r,n,i){i&&An(r,n,i)&&(n=null);var a=Pn(),o=null==n;if(a!==vr||!o){o=!1;n=a(n,i,3)}if(o){var s=ol(r);if(s||!wa(r))return e(s?r:Un(r));n=u}return Dn(r,n,t)}}function cn(e,t){return function(r,n,i){n=Pn(n,i,3);if(ol(r)){var o=a(r,n,t);return o>-1?r[o]:S}return _r(r,n,e)}}function dn(e){return function(t,r,n){if(!t||!t.length)return-1;r=Pn(r,n,3);return a(t,r,e)}}function fn(e){return function(t,r,n){r=Pn(r,n,3);return _r(t,r,e,!0)}}function pn(e){return function(){var t=arguments.length;if(!t)return function(){return arguments[0]};for(var r,i=e?t:-1,a=0,o=vo(t);e?i--:++i<t;){var s=o[a++]=arguments[i];if("function"!=typeof s)throw new Co(Y);var l=r?"":Cs(s);r="wrapper"==l?new n([]):r}i=r?-1:t;for(;++i<t;){s=o[i];l=Cs(s);var u="wrapper"==l?ks(s):null;r=u&&On(u[0])?r[Cs(u[0])].apply(r,u[3]):1==s.length&&On(s)?r[l]():r.thru(s)}return function(){var e=arguments;if(r&&1==e.length&&ol(e[0]))return r.plant(e[0]).value();for(var n=0,i=o[n].apply(this,e);++n<t;)i=o[n].call(this,i);return i}}}function hn(e,t){return function(r,n,i){return"function"==typeof n&&"undefined"==typeof i&&ol(r)?e(r,n):t(r,Zr(n,i,3))}}function vn(e){return function(t,r,n){("function"!=typeof r||"undefined"!=typeof n)&&(r=Zr(r,n,3));return e(t,r,Da)}}function gn(e){return function(t,r,n){("function"!=typeof r||"undefined"!=typeof n)&&(r=Zr(r,n,3));return e(t,r)}}function yn(e){return function(t,r,n){t=l(t);return t&&(e?t:"")+bn(t,r,n)+(e?"":t)}}function mn(e){var t=Ki(function(r,n){var i=x(n,t.placeholder);return Cn(r,e,null,n,i)});return t}function wn(e,t){return function(r,n,i,a){var o=arguments.length<3;return"function"==typeof n&&"undefined"==typeof a&&ol(r)?e(r,n,i,o):zr(r,Pn(n,a,4),i,o,t)}}function xn(e,t,r,n,i,a,o,s,l,u){function c(){for(var w=arguments.length,b=w,_=vo(w);b--;)_[b]=arguments[b];n&&(_=Jr(_,n,i));a&&(_=Kr(_,a,o));if(h||g){var k=c.placeholder,C=x(_,k);w-=C.length;if(u>w){var E=s?Zt(s):null,T=es(u-w,0),N=h?C:null,M=h?null:C,j=h?_:null,R=h?null:_;t|=h?L:I;t&=~(h?I:L);v||(t&=~(D|P));var A=[e,t,r,j,N,R,M,E,l,T],O=xn.apply(S,A);On(e)&&Es(O,A);O.placeholder=k;return O}}var z=f?r:this;p&&(e=z[m]);s&&(_=Fn(_,s));d&&l<_.length&&(_.length=l);var B=this&&this!==Kt&&this instanceof c?y||sn(e):e;return B.apply(z,_)}var d=t&R,f=t&D,p=t&P,h=t&M,v=t&N,g=t&j,y=!p&&sn(e),m=e;return c}function bn(e,t,r){var n=e.length;t=+t;if(n>=t||!Jo(t))return"";var i=t-n;r=null==r?" ":r+"";return Ya(r,zo(i/r.length)).slice(0,i)}function _n(e,t,r,n){function i(){for(var t=-1,s=arguments.length,l=-1,u=n.length,c=vo(s+u);++l<u;)c[l]=n[l];for(;s--;)c[l++]=arguments[++t];var d=this&&this!==Kt&&this instanceof i?o:e;return d.apply(a?r:this,c)}var a=t&D,o=sn(e);return i}function kn(e){return function(t,r,n,i){var a=Pn(n);return a===vr&&null==n?$r(t,r,e):Gr(t,r,a(n,i,1),e)}}function Cn(e,t,r,n,i,a,o,s){var l=t&P;if(!l&&"function"!=typeof e)throw new Co(Y);var u=n?n.length:0;if(!u){t&=~(L|I);n=i=null}u-=i?i.length:0;if(t&I){var c=n,d=i;n=i=null}var f=l?null:ks(e),p=[e,t,r,n,i,c,d,a,o,s];if(f){Vn(p,f);t=p[1];s=p[9]}p[9]=null==s?l?0:e.length:es(s-u,0)||0;if(t==D)var h=an(p[0],p[2]);else h=t!=L&&t!=(D|L)||p[4].length?xn.apply(S,p):_n.apply(S,p);var v=f?bs:Es;return v(h,p)}function En(e,t,r,n,i,a,o){var s=-1,l=e.length,u=t.length,c=!0;if(l!=u&&!(i&&u>l))return!1;for(;c&&++s<l;){var d=e[s],f=t[s];c=S;n&&(c=i?n(f,d,s):n(d,f,s));if("undefined"==typeof c)if(i)for(var p=u;p--;){f=t[p];c=d&&d===f||r(d,f,n,i,a,o);if(c)break}else c=d&&d===f||r(d,f,n,i,a,o)}return!!c}function Sn(e,t,r){switch(r){case $:case G:return+e==+t;case Z:return e.name==t.name&&e.message==t.message;case K:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case tt:case nt:return e==t+""}return!1}function Tn(e,t,r,n,i,a,o){var s=ml(e),l=s.length,u=ml(t),c=u.length;if(l!=c&&!i)return!1;for(var d=i,f=-1;++f<l;){var p=s[f],h=i?p in t:Mo.call(t,p);if(h){var v=e[p],g=t[p];h=S;n&&(h=i?n(g,v,p):n(v,g,p));"undefined"==typeof h&&(h=v&&v===g||r(v,g,n,i,a,o))}if(!h)return!1;d||(d="constructor"==p)}if(!d){var y=e.constructor,m=t.constructor;if(y!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m))return!1}return!0}function Dn(e,t,r){var n=r?ss:os,i=n,a=i;ys(e,function(e,o,s){var l=t(e,o,s);if((r?i>l:l>i)||l===n&&l===a){i=l;a=e}});return a}function Pn(e,r,n){var i=t.callback||Ka;i=i===Ka?vr:i;return n?i(e,r,n):i}function Nn(e,r,n){var i=t.indexOf||ai;i=i===ai?o:i;return e?i(e,r,n):i}function Mn(e,t,r){for(var n=-1,i=r?r.length:0;++n<i;){var a=r[n],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=ts(t,e+o);break;case"takeRight":e=es(e,t-o)}}return{start:e,end:t}}function jn(e){var t=e.length,r=new e.constructor(t);if(t&&"string"==typeof e[0]&&Mo.call(e,"index")){r.index=e.index;r.input=e.input}return r}function Ln(e){var t=e.constructor;"function"==typeof t&&t instanceof t||(t=bo);return new t}function In(e,t,r){var n=e.constructor;switch(t){case at:return Qr(e);case $:case G:return new n(+e);case ot:case st:case lt:case ut:case ct:case dt:case ft:case pt:case ht:var i=e.buffer;
return new n(r?Qr(i):i,e.byteOffset,e.length);case K:case nt:return new n(e);case tt:var a=new n(e.source,Tt.exec(e));a.lastIndex=e.lastIndex}return a}function Rn(e,t){e=+e;t=null==t?fs:t;return e>-1&&e%1==0&&t>e}function An(e,t,r){if(!fa(r))return!1;var n=typeof t;if("number"==n)var i=r.length,a=zn(i)&&Rn(t,i);else a="string"==n&&t in r;if(a){var o=r[t];return e===e?e===o:o!==o}return!1}function On(e){var r=Cs(e);return!!r&&e===t[r]&&r in w.prototype}function zn(e){return"number"==typeof e&&e>-1&&e%1==0&&fs>=e}function Bn(e){return e===e&&(0===e?1/e>0:!fa(e))}function Vn(e,t){var r=e[1],n=t[1],i=r|n,a=R>i,o=n==R&&r==M||n==R&&r==A&&e[7].length<=t[8]||n==(R|A)&&r==M;if(!a&&!o)return e;if(n&D){e[2]=t[2];i|=r&D?0:N}var s=t[3];if(s){var l=e[3];e[3]=l?Jr(l,s,t[4]):Zt(s);e[4]=l?x(e[3],W):Zt(t[4])}s=t[5];if(s){l=e[5];e[5]=l?Kr(l,s,t[6]):Zt(s);e[6]=l?x(e[5],W):Zt(t[6])}s=t[7];s&&(e[7]=Zt(s));n&R&&(e[8]=null==e[8]?t[8]:ts(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0];e[1]=i;return e}function qn(e,t){e=Hn(e);for(var r=-1,n=t.length,i={};++r<n;){var a=t[r];a in e&&(i[a]=e[a])}return i}function Xn(e,t){var r={};Cr(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r}function Fn(e,t){for(var r=e.length,n=ts(t.length,r),i=Zt(e);n--;){var a=t[n];e[n]=Rn(a,r)?i[a]:S}return e}function Yn(e){{var r;t.support}if(!m(e)||Lo.call(e)!=et||!Mo.call(e,"constructor")&&(r=e.constructor,"function"==typeof r&&!(r instanceof r)))return!1;var n;Cr(e,function(e,t){n=t});return"undefined"==typeof n||Mo.call(e,n)}function Wn(e){for(var r=Da(e),n=r.length,i=n&&e.length,a=t.support,o=i&&zn(i)&&(ol(e)||a.nonEnumArgs&&aa(e)),s=-1,l=[];++s<n;){var u=r[s];(o&&Rn(u,i)||Mo.call(e,u))&&l.push(u)}return l}function Un(e){return null==e?[]:zn(e.length)?fa(e)?e:bo(e):La(e)}function Hn(e){return fa(e)?e:bo(e)}function $n(e){return e instanceof w?e.clone():new n(e.__wrapped__,e.__chain__,Zt(e.__actions__))}function Gn(e,t,r){t=(r?An(e,t,r):null==t)?1:es(+t||1,1);for(var n=0,i=e?e.length:0,a=-1,o=vo(zo(i/t));i>n;)o[++a]=Br(e,n,n+=t);return o}function Zn(e){for(var t=-1,r=e?e.length:0,n=-1,i=[];++t<r;){var a=e[t];a&&(i[++n]=a)}return i}function Qn(e,t,r){var n=e?e.length:0;if(!n)return[];(r?An(e,t,r):null==t)&&(t=1);return Br(e,0>t?0:t)}function Jn(e,t,r){var n=e?e.length:0;if(!n)return[];(r?An(e,t,r):null==t)&&(t=1);t=n-(+t||0);return Br(e,0,0>t?0:t)}function Kn(e,t,r){return e&&e.length?Ur(e,Pn(t,r,3),!0,!0):[]}function ei(e,t,r){return e&&e.length?Ur(e,Pn(t,r,3),!0):[]}function ti(e,t,r,n){var i=e?e.length:0;if(!i)return[];if(r&&"number"!=typeof r&&An(e,t,r)){r=0;n=i}return xr(e,t,r,n)}function ri(e){return e?e[0]:S}function ni(e,t,r){var n=e?e.length:0;r&&An(e,t,r)&&(t=!1);return n?kr(e,t):[]}function ii(e){var t=e?e.length:0;return t?kr(e,!0):[]}function ai(e,t,r){var n=e?e.length:0;if(!n)return-1;if("number"==typeof r)r=0>r?es(n+r,0):r;else if(r){var i=$r(e,t),a=e[i];return(t===t?t===a:a!==a)?i:-1}return o(e,t,r||0)}function oi(e){return Jn(e,1)}function si(){for(var e=[],t=-1,r=arguments.length,n=[],i=Nn(),a=i==o;++t<r;){var s=arguments[t];if(ol(s)||aa(s)){e.push(s);n.push(a&&s.length>=120?_s(t&&s):null)}}r=e.length;var l=e[0],u=-1,c=l?l.length:0,d=[],f=n[0];e:for(;++u<c;){s=l[u];if((f?$t(f,s):i(d,s,0))<0){t=r;for(;--t;){var p=n[t];if((p?$t(p,s):i(e[t],s,0))<0)continue e}f&&f.push(s);d.push(s)}}return d}function li(e){var t=e?e.length:0;return t?e[t-1]:S}function ui(e,t,r){var n=e?e.length:0;if(!n)return-1;var i=n;if("number"==typeof r)i=(0>r?es(n+r,0):ts(r||0,n-1))+1;else if(r){i=$r(e,t,!0)-1;var a=e[i];return(t===t?t===a:a!==a)?i:-1}if(t!==t)return y(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1}function ci(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var r=0,n=Nn(),i=e.length;++r<i;)for(var a=0,o=e[r];(a=n(t,o,a))>-1;)Uo.call(t,a,1);return t}function di(e,t,r){var n=-1,i=e?e.length:0,a=[];t=Pn(t,r,3);for(;++n<i;){var o=e[n];if(t(o,n,e)){a.push(o);Uo.call(e,n--,1);i--}}return a}function fi(e){return Qn(e,1)}function pi(e,t,r){var n=e?e.length:0;if(!n)return[];if(r&&"number"!=typeof r&&An(e,t,r)){t=0;r=n}return Br(e,t,r)}function hi(e,t,r){var n=e?e.length:0;if(!n)return[];(r?An(e,t,r):null==t)&&(t=1);return Br(e,0,0>t?0:t)}function vi(e,t,r){var n=e?e.length:0;if(!n)return[];(r?An(e,t,r):null==t)&&(t=1);t=n-(+t||0);return Br(e,0>t?0:t)}function gi(e,t,r){return e&&e.length?Ur(e,Pn(t,r,3),!1,!0):[]}function yi(e,t,r){return e&&e.length?Ur(e,Pn(t,r,3)):[]}function mi(e,t,r,n){var i=e?e.length:0;if(!i)return[];if(null!=t&&"boolean"!=typeof t){n=r;r=An(e,t,n)?null:t;t=!1}var a=Pn();(a!==vr||null!=r)&&(r=a(r,n,3));return t&&Nn()==o?b(e,r):Yr(e,r)}function wi(e){for(var t=-1,r=(e&&e.length&&ir(nr(e,No)))>>>0,n=vo(r);++t<r;)n[t]=nr(e,Ar(t));return n}function xi(){for(var e=-1,t=arguments.length;++e<t;){var r=arguments[e];if(ol(r)||aa(r))var n=n?mr(n,r).concat(mr(r,n)):r}return n?Yr(n):[]}function bi(e,t){var r=-1,n=e?e.length:0,i={};!n||t||ol(e[0])||(t=[]);for(;++r<n;){var a=e[r];t?i[a]=t[r]:a&&(i[a[0]]=a[1])}return i}function _i(e){var r=t(e);r.__chain__=!0;return r}function ki(e,t,r){t.call(r,e);return e}function Ci(e,t,r){return t.call(r,e)}function Ei(){return _i(this)}function Si(){return new n(this.value(),this.__chain__)}function Ti(e){for(var t,n=this;n instanceof r;){var i=$n(n);t?a.__wrapped__=i:t=i;var a=i;n=n.__wrapped__}a.__wrapped__=e;return t}function Di(){var e=this.__wrapped__;if(e instanceof w){this.__actions__.length&&(e=new w(this));return new n(e.reverse(),this.__chain__)}return this.thru(function(e){return e.reverse()})}function Pi(){return this.value()+""}function Ni(){return Hr(this.__wrapped__,this.__actions__)}function Mi(e,t,r){var n=ol(e)?tr:wr;r&&An(e,t,r)&&(t=null);("function"!=typeof t||"undefined"!=typeof r)&&(t=Pn(t,r,3));return n(e,t)}function ji(e,t,r){var n=ol(e)?rr:br;t=Pn(t,r,3);return n(e,t)}function Li(e,t){return Os(e,jr(t))}function Ii(e,t,r,n){var i=e?e.length:0;if(!zn(i)){e=La(e);i=e.length}if(!i)return!1;r="number"!=typeof r||n&&An(t,r,n)?0:0>r?es(i+r,0):r||0;return"string"==typeof e||!ol(e)&&wa(e)?i>r&&e.indexOf(t,r)>-1:Nn(e,t,r)>-1}function Ri(e,t,r){var n=ol(e)?nr:Mr;t=Pn(t,r,3);return n(e,t)}function Ai(e,t){return Ri(e,Ar(t))}function Oi(e,t,r){var n=ol(e)?rr:br;t=Pn(t,r,3);return n(e,function(e,r,n){return!t(e,r,n)})}function zi(e,t,r){if(r?An(e,t,r):null==t){e=Un(e);var n=e.length;return n>0?e[Or(0,n-1)]:S}var i=Bi(e);i.length=ts(0>t?0:+t||0,i.length);return i}function Bi(e){e=Un(e);for(var t=-1,r=e.length,n=vo(r);++t<r;){var i=Or(0,t);t!=i&&(n[t]=n[i]);n[i]=e[t]}return n}function Vi(e){var t=e?e.length:0;return zn(t)?t:ml(e).length}function qi(e,t,r){var n=ol(e)?lr:Vr;r&&An(e,t,r)&&(t=null);("function"!=typeof t||"undefined"!=typeof r)&&(t=Pn(t,r,3));return n(e,t)}function Xi(e,t,r){if(null==e)return[];var n=-1,i=e.length,a=zn(i)?vo(i):[];r&&An(e,t,r)&&(t=null);t=Pn(t,r,3);ys(e,function(e,r,i){a[++n]={criteria:t(e,r,i),index:n,value:e}});return qr(a,f)}function Fi(){var e=arguments,t=e[0],r=e[3],n=0,i=e.length-1;if(null==t)return[];for(var a=vo(i);i>n;)a[n]=e[++n];r&&An(e[1],e[2],r)&&(a=e[1]);return Xr(t,kr(a),[])}function Yi(e,t,r,n){if(null==e)return[];n&&An(t,r,n)&&(r=null);ol(t)||(t=null==t?[]:[t]);ol(r)||(r=null==r?[]:[r]);return Xr(e,t,r)}function Wi(e,t){return ji(e,jr(t))}function Ui(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Co(Y);var r=e;e=t;t=r}e=Jo(e=+e)?e:0;return function(){return--e<1?t.apply(this,arguments):void 0}}function Hi(e,t,r){r&&An(e,t,r)&&(t=null);t=e&&null==t?e.length:es(+t||0,0);return Cn(e,R,null,null,null,null,t)}function $i(e,t){var r;if("function"!=typeof t){if("function"!=typeof e)throw new Co(Y);var n=e;e=t;t=n}return function(){--e>0?r=t.apply(this,arguments):t=null;return r}}function Gi(e,t,r){function n(){f&&Bo(f);l&&Bo(l);l=f=p=S}function i(){var r=t-(Hs()-c);if(0>=r||r>t){l&&Bo(l);var n=p;l=f=p=S;if(n){h=Hs();u=e.apply(d,s);f||l||(s=d=null)}}else f=Wo(i,r)}function a(){f&&Bo(f);l=f=p=S;if(g||v!==t){h=Hs();u=e.apply(d,s);f||l||(s=d=null)}}function o(){s=arguments;c=Hs();d=this;p=g&&(f||!y);if(v===!1)var r=y&&!f;else{l||y||(h=c);var n=v-(c-h),o=0>=n||n>v;if(o){l&&(l=Bo(l));h=c;u=e.apply(d,s)}else l||(l=Wo(a,n))}o&&f?f=Bo(f):f||t===v||(f=Wo(i,t));if(r){o=!0;u=e.apply(d,s)}!o||f||l||(s=d=null);return u}var s,l,u,c,d,f,p,h=0,v=!1,g=!0;if("function"!=typeof e)throw new Co(Y);t=0>t?0:+t||0;if(r===!0){var y=!0;g=!1}else if(fa(r)){y=r.leading;v="maxWait"in r&&es(+r.maxWait||0,t);g="trailing"in r?r.trailing:g}o.cancel=n;return o}function Zi(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Co(Y);var r=function(){var n=arguments,i=r.cache,a=t?t.apply(this,n):n[0];if(i.has(a))return i.get(a);var o=e.apply(this,n);i.set(a,o);return o};r.cache=new Zi.Cache;return r}function Qi(e){if("function"!=typeof e)throw new Co(Y);return function(){return!e.apply(this,arguments)}}function Ji(e){return $i(e,2)}function Ki(e,t){if("function"!=typeof e)throw new Co(Y);t=es("undefined"==typeof t?e.length-1:+t||0,0);return function(){for(var r=arguments,n=-1,i=es(r.length-t,0),a=vo(i);++n<i;)a[n]=r[t+n];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,r[0],a);case 2:return e.call(this,r[0],r[1],a)}var o=vo(t+1);n=-1;for(;++n<t;)o[n]=r[n];o[t]=a;return e.apply(this,o)}}function ea(e){if("function"!=typeof e)throw new Co(Y);return function(t){return e.apply(this,t)}}function ta(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new Co(Y);if(r===!1)n=!1;else if(fa(r)){n="leading"in r?!!r.leading:n;i="trailing"in r?!!r.trailing:i}qt.leading=n;qt.maxWait=+t;qt.trailing=i;return Gi(e,t,qt)}function ra(e,t){t=null==t?to:t;return Cn(t,L,null,[e],[])}function na(e,t,r,n){if(t&&"boolean"!=typeof t&&An(e,t,r))t=!1;else if("function"==typeof t){n=r;r=t;t=!1}r="function"==typeof r&&Zr(r,n,1);return gr(e,t,r)}function ia(e,t,r){t="function"==typeof t&&Zr(t,r,1);return gr(e,!0,t)}function aa(e){var t=m(e)?e.length:S;return zn(t)&&Lo.call(e)==U}function oa(e){return e===!0||e===!1||m(e)&&Lo.call(e)==$}function sa(e){return m(e)&&Lo.call(e)==G}function la(e){return!!e&&1===e.nodeType&&m(e)&&Lo.call(e).indexOf("Element")>-1}function ua(e){if(null==e)return!0;var t=e.length;return zn(t)&&(ol(e)||wa(e)||aa(e)||m(e)&&ll(e.splice))?!t:!ml(e).length}function ca(e,t,r,n){r="function"==typeof r&&Zr(r,n,3);if(!r&&Bn(e)&&Bn(t))return e===t;var i=r?r(e,t):S;return"undefined"==typeof i?Dr(e,t,r):!!i}function da(e){return m(e)&&"string"==typeof e.message&&Lo.call(e)==Z}function fa(e){var t=typeof e;return"function"==t||!!e&&"object"==t}function pa(e,t,r,n){var i=ml(t),a=i.length;if(!a)return!0;if(null==e)return!1;r="function"==typeof r&&Zr(r,n,3);if(!r&&1==a){var o=i[0],s=t[o];if(Bn(s))return s===e[o]&&("undefined"!=typeof s||o in Hn(e))}for(var l=vo(a),u=vo(a);a--;){s=l[a]=t[i[a]];u[a]=Bn(s)}return Nr(Hn(e),i,l,u,r)}function ha(e){return ya(e)&&e!=+e}function va(e){return null==e?!1:Lo.call(e)==Q?Ro.test(Po.call(e)):m(e)&&Pt.test(e)}function ga(e){return null===e}function ya(e){return"number"==typeof e||m(e)&&Lo.call(e)==K}function ma(e){return m(e)&&Lo.call(e)==tt||!1}function wa(e){return"string"==typeof e||m(e)&&Lo.call(e)==nt}function xa(e){return m(e)&&zn(e.length)&&!!Bt[Lo.call(e)]}function ba(e){return"undefined"==typeof e}function _a(e){var t=e?e.length:0;return zn(t)?t?Zt(e):[]:La(e)}function ka(e){return hr(e,Da(e))}function Ca(e,t,r){var n=gs(e);r&&An(e,t,r)&&(t=null);return t?hr(t,n,ml(t)):n}function Ea(e){return Tr(e,Da(e))}function Sa(e,t){return e?Mo.call(e,t):!1}function Ta(e,t,r){r&&An(e,t,r)&&(t=null);for(var n=-1,i=ml(e),a=i.length,o={};++n<a;){var s=i[n],l=e[s];t?Mo.call(o,l)?o[l].push(s):o[l]=[s]:o[l]=s}return o}function Da(e){if(null==e)return[];fa(e)||(e=bo(e));var t=e.length;t=t&&zn(t)&&(ol(e)||vs.nonEnumArgs&&aa(e))&&t||0;for(var r=e.constructor,n=-1,i="function"==typeof r&&r.prototype===e,a=vo(t),o=t>0;++n<t;)a[n]=n+"";for(var s in e)o&&Rn(s,t)||"constructor"==s&&(i||!Mo.call(e,s))||a.push(s);return a}function Pa(e,t,r){var n={};t=Pn(t,r,3);Er(e,function(e,r,i){n[r]=t(e,r,i)});return n}function Na(e){for(var t=-1,r=ml(e),n=r.length,i=vo(n);++t<n;){var a=r[t];i[t]=[a,e[a]]}return i}function Ma(e,t,r){var n=null==e?S:e[t];"undefined"==typeof n&&(n=r);return ll(n)?n.call(e):n}function ja(e,t,r,n){var i=ol(e)||xa(e);t=Pn(t,n,4);if(null==r)if(i||fa(e)){var a=e.constructor;r=i?ol(e)?new a:[]:gs(ll(a)&&a.prototype)}else r={};(i?Qt:Er)(e,function(e,n,i){return t(r,e,n,i)});return r}function La(e){return Wr(e,ml(e))}function Ia(e){return Wr(e,Da(e))}function Ra(e,t,r){t=+t||0;if("undefined"==typeof r){r=t;t=0}else r=+r||0;return e>=t&&r>e}function Aa(e,t,r){r&&An(e,t,r)&&(t=r=null);var n=null==e,i=null==t;if(null==r)if(i&&"boolean"==typeof e){r=e;e=1}else if("boolean"==typeof t){r=t;i=!0}if(n&&i){t=1;i=!1}e=+e||0;if(i){t=e;e=0}else t=+t||0;if(r||e%1||t%1){var a=as();return ts(e+a*(t-e+parseFloat("1e-"+((a+"").length-1))),t)}return Or(e,t)}function Oa(e){e=l(e);return e&&e.charAt(0).toUpperCase()+e.slice(1)}function za(e){e=l(e);return e&&e.replace(Nt,h).replace(Et,"")}function Ba(e,t,r){e=l(e);t+="";var n=e.length;r="undefined"==typeof r?n:ts(0>r?0:+r||0,n);r-=t.length;return r>=0&&e.indexOf(t,r)==r}function Va(e){e=l(e);return e&&bt.test(e)?e.replace(wt,v):e}function qa(e){e=l(e);return e&&Lt.test(e)?e.replace(jt,"\\$&"):e}function Xa(e,t,r){e=l(e);t=+t;var n=e.length;if(n>=t||!Jo(t))return e;var i=(t-n)/2,a=Vo(i),o=zo(i);r=bn("",o,r);return r.slice(0,a)+e+r}function Fa(e,t,r){r&&An(e,t,r)&&(t=0);return is(e,t)}function Ya(e,t){var r="";e=l(e);t=+t;if(1>t||!e||!Jo(t))return r;do{t%2&&(r+=e);t=Vo(t/2);e+=e}while(t);return r}function Wa(e,t,r){e=l(e);r=null==r?0:ts(0>r?0:+r||0,e.length);return e.lastIndexOf(t,r)==r}function Ua(e,r,n){var i=t.templateSettings;n&&An(e,r,n)&&(r=n=null);e=l(e);r=fr(fr({},n||r),i,dr);var a,o,s=fr(fr({},r.imports),i.imports,dr),u=ml(s),c=Wr(s,u),d=0,f=r.interpolate||Mt,p="__p += '",h=_o((r.escape||Mt).source+"|"+f.source+"|"+(f===Ct?St:Mt).source+"|"+(r.evaluate||Mt).source+"|$","g"),v="//# sourceURL="+("sourceURL"in r?r.sourceURL:"lodash.templateSources["+ ++zt+"]")+"\n";e.replace(h,function(t,r,n,i,s,l){n||(n=i);p+=e.slice(d,l).replace(It,g);if(r){a=!0;p+="' +\n__e("+r+") +\n'"}if(s){o=!0;p+="';\n"+s+";\n__p += '"}n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'");d=l+t.length;return t});p+="';\n";var y=r.variable;y||(p="with (obj) {\n"+p+"\n}\n");p=(o?p.replace(vt,""):p).replace(gt,"$1").replace(yt,"$1;");p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Dl(function(){return mo(u,v+"return "+p).apply(S,c)});m.source=p;if(da(m))throw m;return m}function Ha(e,t,r){var n=e;e=l(e);if(!e)return e;if(r?An(n,t,r):null==t)return e.slice(_(e),k(e)+1);t+="";return e.slice(c(e,t),d(e,t)+1)}function $a(e,t,r){var n=e;e=l(e);return e?e.slice((r?An(n,t,r):null==t)?_(e):c(e,t+"")):e}function Ga(e,t,r){var n=e;e=l(e);return e?(r?An(n,t,r):null==t)?e.slice(0,k(e)+1):e.slice(0,d(e,t+"")+1):e}function Za(e,t,r){r&&An(e,t,r)&&(t=null);var n=O,i=z;if(null!=t)if(fa(t)){var a="separator"in t?t.separator:a;n="length"in t?+t.length||0:n;i="omission"in t?l(t.omission):i}else n=+t||0;e=l(e);if(n>=e.length)return e;var o=n-i.length;if(1>o)return i;var s=e.slice(0,o);if(null==a)return s+i;if(ma(a)){if(e.slice(o).search(a)){var u,c,d=e.slice(0,o);a.global||(a=_o(a.source,(Tt.exec(a)||"")+"g"));a.lastIndex=0;for(;u=a.exec(d);)c=u.index;s=s.slice(0,null==c?o:c)}}else if(e.indexOf(a,o)!=o){var f=s.lastIndexOf(a);f>-1&&(s=s.slice(0,f))}return s+i}function Qa(e){e=l(e);return e&&xt.test(e)?e.replace(mt,C):e}function Ja(e,t,r){r&&An(e,t,r)&&(t=null);e=l(e);return e.match(t||Rt)||[]}function Ka(e,t,r){r&&An(e,t,r)&&(t=null);return m(e)?ro(e):vr(e,t)}function eo(e){return function(){return e}}function to(e){return e}function ro(e){return jr(gr(e,!0))}function no(e,t){return Lr(e+"",gr(t,!0))}function io(e,t,r){if(null==r){var n=fa(t),i=n&&ml(t),a=i&&i.length&&Tr(t,i);if(!(a?a.length:n)){a=!1;r=t;t=e;e=this}}a||(a=Tr(t,ml(t)));var o=!0,s=-1,l=ll(e),u=a.length;r===!1?o=!1:fa(r)&&"chain"in r&&(o=r.chain);for(;++s<u;){var c=a[s],d=t[c];e[c]=d;l&&(e.prototype[c]=function(t){return function(){var r=this.__chain__;if(o||r){var n=e(this.__wrapped__),i=n.__actions__=Zt(this.__actions__);i.push({func:t,args:arguments,thisArg:e});n.__chain__=r;return n}var a=[this.value()];Xo.apply(a,arguments);return t.apply(e,a)}}(d))}return e}function ao(){e._=Io;return this}function oo(){}function so(e){return Ar(e+"")}function lo(e){return function(t){return null==e?S:e[t]}}function uo(e,t,r){r&&An(e,t,r)&&(t=r=null);e=+e||0;r=null==r?1:+r||0;if(null==t){t=e;e=0}else t=+t||0;for(var n=-1,i=es(zo((t-e)/(r||1)),0),a=vo(i);++n<i;){a[n]=e;e+=r}return a}function co(e,t,r){e=+e;if(1>e||!Jo(e))return[];var n=-1,i=vo(ts(e,ls));t=Zr(t,r,1);for(;++n<e;)ls>n?i[n]=t(n):t(n);return i}function fo(e){var t=++jo;return l(e)+t}function po(e,t){return e+t}function ho(e,t,r){r&&An(e,t,r)&&(t=null);var n=Pn(),i=null==t;if(n!==vr||!i){i=!1;t=n(t,r,3)}return i?ur(ol(e)?e:Un(e)):Fr(e,t)}e=e?er.defaults(Kt.Object(),e,er.pick(Kt,Ot)):Kt;var vo=e.Array,go=e.Date,yo=e.Error,mo=e.Function,wo=e.Math,xo=e.Number,bo=e.Object,_o=e.RegExp,ko=e.String,Co=e.TypeError,Eo=vo.prototype,So=bo.prototype,To=ko.prototype,Do=(Do=e.window)&&Do.document,Po=mo.prototype.toString,No=Ar("length"),Mo=So.hasOwnProperty,jo=0,Lo=So.toString,Io=e._,Ro=_o("^"+qa(Lo).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ao=va(Ao=e.ArrayBuffer)&&Ao,Oo=va(Oo=Ao&&new Ao(0).slice)&&Oo,zo=wo.ceil,Bo=e.clearTimeout,Vo=wo.floor,qo=va(qo=bo.getPrototypeOf)&&qo,Xo=Eo.push,Fo=So.propertyIsEnumerable,Yo=va(Yo=e.Set)&&Yo,Wo=e.setTimeout,Uo=Eo.splice,Ho=va(Ho=e.Uint8Array)&&Ho,$o=va($o=e.WeakMap)&&$o,Go=function(){try{var t=va(t=e.Float64Array)&&t,r=new t(new Ao(10),0,1)&&t}catch(n){}return r}(),Zo=va(Zo=vo.isArray)&&Zo,Qo=va(Qo=bo.create)&&Qo,Jo=e.isFinite,Ko=va(Ko=bo.keys)&&Ko,es=wo.max,ts=wo.min,rs=va(rs=go.now)&&rs,ns=va(ns=xo.isFinite)&&ns,is=e.parseInt,as=wo.random,os=xo.NEGATIVE_INFINITY,ss=xo.POSITIVE_INFINITY,ls=wo.pow(2,32)-1,us=ls-1,cs=ls>>>1,ds=Go?Go.BYTES_PER_ELEMENT:0,fs=wo.pow(2,53)-1,ps=$o&&new $o,hs={},vs=t.support={};(function(){vs.funcDecomp=/\bthis\b/.test(function(){return this});vs.funcNames="string"==typeof mo.name;try{vs.dom=11===Do.createDocumentFragment().nodeType}catch(e){vs.dom=!1}try{vs.nonEnumArgs=!Fo.call(arguments,1)}catch(e){vs.nonEnumArgs=!0}})(0,0);t.templateSettings={escape:_t,evaluate:kt,interpolate:Ct,variable:"",imports:{_:t}};var gs=function(){function t(){}return function(r){if(fa(r)){t.prototype=r;var n=new t;t.prototype=null}return n||e.Object()}}(),ys=rn(Er),ms=rn(Sr,!0),ws=nn(),xs=nn(!0),bs=ps?function(e,t){ps.set(e,t);return e}:to;Oo||(Qr=Ao&&Ho?function(e){var t=e.byteLength,r=Go?Vo(t/ds):0,n=r*ds,i=new Ao(t);if(r){var a=new Go(i,0,r);a.set(new Go(e,0,r))}if(t!=n){a=new Ho(i,n);a.set(new Ho(e,n))}return i}:eo(null));var _s=Qo&&Yo?function(e){return new Ht(e)}:eo(null),ks=ps?function(e){return ps.get(e)}:oo,Cs=function(){return vs.funcNames?"constant"==eo.name?Ar("name"):function(e){for(var t=e.name,r=hs[t],n=r?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t}:eo("")}(),Es=function(){var e=0,t=0;return function(r,n){var i=Hs(),a=V-(i-t);t=i;if(a>0){if(++e>=B)return r}else e=0;return bs(r,n)}}(),Ss=Ki(function(e,t){return ol(e)||aa(e)?mr(e,kr(t,!1,!0)):[]}),Ts=dn(),Ds=dn(!0),Ps=Ki(function(e,t){e||(e=[]);t=kr(t);var r=t.length,n=pr(e,t);t.sort(i);for(;r--;){var a=parseFloat(t[r]);if(a!=o&&Rn(a)){var o=a;Uo.call(e,a,1)}}return n}),Ns=kn(),Ms=kn(!0),js=Ki(function(e){return Yr(kr(e,!1,!0))}),Ls=Ki(function(e,t){return ol(e)||aa(e)?mr(e,t):[]}),Is=Ki(wi),Rs=Ki(function(e,t){var r=e?e.length:0;zn(r)&&(e=Un(e));return pr(e,kr(t))}),As=en(function(e,t,r){Mo.call(e,r)?++e[r]:e[r]=1}),Os=cn(ys),zs=cn(ms,!0),Bs=hn(Qt,ys),Vs=hn(Jt,ms),qs=en(function(e,t,r){Mo.call(e,r)?e[r].push(t):e[r]=[t]}),Xs=en(function(e,t,r){e[r]=t}),Fs=Ki(function(e,t,r){var n=-1,i="function"==typeof t,a=e?e.length:0,o=zn(a)?vo(a):[];ys(e,function(e){var a=i?t:null!=e&&e[t];o[++n]=a?a.apply(e,r):S});return o}),Ys=en(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),Ws=wn(or,ys),Us=wn(sr,ms),Hs=rs||function(){return(new go).getTime()},$s=Ki(function(e,t,r){var n=D;if(r.length){var i=x(r,$s.placeholder);n|=L}return Cn(e,n,t,r,i)}),Gs=Ki(function(e,t){t=t.length?kr(t):Ea(e);for(var r=-1,n=t.length;++r<n;){var i=t[r];e[i]=Cn(e[i],D,e)}return e}),Zs=Ki(function(e,t,r){var n=D|P;if(r.length){var i=x(r,Zs.placeholder);n|=L}return Cn(t,n,e,r,i)}),Qs=ln(M),Js=ln(j),Ks=Ki(function(e,t){return yr(e,1,t)}),el=Ki(function(e,t,r){return yr(e,t,r)}),tl=pn(),rl=pn(!0),nl=mn(L),il=mn(I),al=Ki(function(e,t){return Cn(e,A,null,null,null,kr(t))}),ol=Zo||function(e){return m(e)&&zn(e.length)&&Lo.call(e)==H};vs.dom||(la=function(e){return!!e&&1===e.nodeType&&m(e)&&!ul(e)});var sl=ns||function(e){return"number"==typeof e&&Jo(e)},ll=s(/x/)||Ho&&!s(Ho)?function(e){return Lo.call(e)==Q}:s,ul=qo?function(e){if(!e||Lo.call(e)!=et)return!1;var t=e.valueOf,r=va(t)&&(r=qo(t))&&qo(r);return r?e==r||qo(e)==r:Yn(e)}:Yn,cl=tn(fr),dl=Ki(function(e){var t=e[0];if(null==t)return t;e.push(cr);return cl.apply(S,e)}),fl=fn(Er),pl=fn(Sr),hl=vn(ws),vl=vn(xs),gl=gn(Er),yl=gn(Sr),ml=Ko?function(e){if(e)var t=e.constructor,r=e.length;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r&&zn(r)?Wn(e):fa(e)?Ko(e):[]}:Wn,wl=tn(Ir),xl=Ki(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=nr(kr(t),ko);return qn(e,mr(Da(e),t))}var r=Zr(t[0],t[1],3);return Xn(e,function(e,t,n){return!r(e,t,n)})}),bl=Ki(function(e,t){return null==e?{}:"function"==typeof t[0]?Xn(e,Zr(t[0],t[1],3)):qn(e,kr(t))}),_l=on(function(e,t,r){t=t.toLowerCase();return e+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),kl=on(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),Cl=yn(),El=yn(!0);8!=is(At+"08")&&(Fa=function(e,t,r){(r?An(e,t,r):null==t)?t=0:t&&(t=+t);e=Ha(e);return is(e,t||(Dt.test(e)?16:10))});var Sl=on(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),Tl=on(function(e,t,r){return e+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Dl=Ki(function(e,t){try{return e.apply(S,t)}catch(r){return da(r)?r:new yo(r)}}),Pl=un(ir),Nl=un(ar,!0);t.prototype=r.prototype;n.prototype=gs(r.prototype);n.prototype.constructor=n;w.prototype=gs(r.prototype);w.prototype.constructor=w;Xt.prototype["delete"]=Ft;Xt.prototype.get=Yt;Xt.prototype.has=Wt;Xt.prototype.set=Ut;Ht.prototype.push=Gt;Zi.Cache=Xt;t.after=Ui;t.ary=Hi;t.assign=cl;t.at=Rs;t.before=$i;t.bind=$s;t.bindAll=Gs;t.bindKey=Zs;t.callback=Ka;t.chain=_i;t.chunk=Gn;t.compact=Zn;t.constant=eo;t.countBy=As;t.create=Ca;t.curry=Qs;t.curryRight=Js;t.debounce=Gi;t.defaults=dl;t.defer=Ks;t.delay=el;t.difference=Ss;t.drop=Qn;t.dropRight=Jn;t.dropRightWhile=Kn;t.dropWhile=ei;t.fill=ti;t.filter=ji;t.flatten=ni;t.flattenDeep=ii;t.flow=tl;t.flowRight=rl;t.forEach=Bs;t.forEachRight=Vs;t.forIn=hl;t.forInRight=vl;t.forOwn=gl;t.forOwnRight=yl;t.functions=Ea;t.groupBy=qs;t.indexBy=Xs;t.initial=oi;t.intersection=si;t.invert=Ta;t.invoke=Fs;t.keys=ml;t.keysIn=Da;t.map=Ri;t.mapValues=Pa;t.matches=ro;t.matchesProperty=no;t.memoize=Zi;t.merge=wl;t.mixin=io;t.negate=Qi;t.omit=xl;t.once=Ji;t.pairs=Na;t.partial=nl;t.partialRight=il;t.partition=Ys;t.pick=bl;t.pluck=Ai;t.property=so;t.propertyOf=lo;t.pull=ci;t.pullAt=Ps;t.range=uo;t.rearg=al;t.reject=Oi;t.remove=di;t.rest=fi;t.restParam=Ki;t.shuffle=Bi;t.slice=pi;t.sortBy=Xi;t.sortByAll=Fi;t.sortByOrder=Yi;t.spread=ea;t.take=hi;t.takeRight=vi;t.takeRightWhile=gi;t.takeWhile=yi;t.tap=ki;t.throttle=ta;t.thru=Ci;t.times=co;t.toArray=_a;t.toPlainObject=ka;t.transform=ja;t.union=js;t.uniq=mi;t.unzip=wi;t.values=La;t.valuesIn=Ia;t.where=Wi;t.without=Ls;t.wrap=ra;t.xor=xi;t.zip=Is;t.zipObject=bi;t.backflow=rl;t.collect=Ri;t.compose=rl;t.each=Bs;t.eachRight=Vs;t.extend=cl;t.iteratee=Ka;t.methods=Ea;t.object=bi;t.select=ji;t.tail=fi;t.unique=mi;io(t,t);t.add=po;t.attempt=Dl;t.camelCase=_l;t.capitalize=Oa;t.clone=na;t.cloneDeep=ia;t.deburr=za;t.endsWith=Ba;t.escape=Va;t.escapeRegExp=qa;t.every=Mi;t.find=Os;t.findIndex=Ts;t.findKey=fl;t.findLast=zs;t.findLastIndex=Ds;t.findLastKey=pl;t.findWhere=Li;t.first=ri;t.has=Sa;t.identity=to;t.includes=Ii;t.indexOf=ai;t.inRange=Ra;t.isArguments=aa;t.isArray=ol;t.isBoolean=oa;t.isDate=sa;t.isElement=la;t.isEmpty=ua;t.isEqual=ca;t.isError=da;t.isFinite=sl;t.isFunction=ll;t.isMatch=pa;t.isNaN=ha;t.isNative=va;t.isNull=ga;t.isNumber=ya;t.isObject=fa;t.isPlainObject=ul;t.isRegExp=ma;t.isString=wa;t.isTypedArray=xa;t.isUndefined=ba;t.kebabCase=kl;t.last=li;t.lastIndexOf=ui;t.max=Pl;t.min=Nl;t.noConflict=ao;t.noop=oo;t.now=Hs;t.pad=Xa;t.padLeft=Cl;t.padRight=El;t.parseInt=Fa;t.random=Aa;t.reduce=Ws;t.reduceRight=Us;t.repeat=Ya;t.result=Ma;t.runInContext=E;t.size=Vi;t.snakeCase=Sl;t.some=qi;t.sortedIndex=Ns;t.sortedLastIndex=Ms;t.startCase=Tl;t.startsWith=Wa;t.sum=ho;t.template=Ua;t.trim=Ha;t.trimLeft=$a;t.trimRight=Ga;t.trunc=Za;t.unescape=Qa;t.uniqueId=fo;t.words=Ja;t.all=Mi;t.any=qi;t.contains=Ii;t.detect=Os;t.foldl=Ws;t.foldr=Us;t.head=ri;t.include=Ii;t.inject=Ws;io(t,function(){var e={};Er(t,function(r,n){t.prototype[n]||(e[n]=r)});return e}(),!1);t.sample=zi;t.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return zi(t,e)}):zi(this.value())};t.VERSION=T;Qt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t});Qt(["dropWhile","filter","map","takeWhile"],function(e,t){var r=t!=F,n=t==q;w.prototype[e]=function(e,i){var a=this.__filtered__,o=a&&n?new w(this):this.clone(),s=o.__iteratees__||(o.__iteratees__=[]);s.push({done:!1,count:0,index:0,iteratee:Pn(e,i,1),limit:-1,type:t});o.__filtered__=a||r;return o}});Qt(["drop","take"],function(e,t){var r=e+"While";w.prototype[e]=function(r){var n=this.__filtered__,i=n&&!t?this.dropWhile():this.clone();r=null==r?1:es(Vo(r)||0,0);if(n)t?i.__takeCount__=ts(i.__takeCount__,r):li(i.__iteratees__).limit=r;else{var a=i.__views__||(i.__views__=[]);a.push({size:r,type:e+(i.__dir__<0?"Right":"")})}return i};w.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()};w.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[r](e,t).reverse()}});Qt(["first","last"],function(e,t){var r="take"+(t?"Right":"");w.prototype[e]=function(){return this[r](1).value()[0]}});Qt(["initial","rest"],function(e,t){var r="drop"+(t?"":"Right");w.prototype[e]=function(){return this[r](1)}});Qt(["pluck","where"],function(e,t){var r=t?"filter":"map",n=t?jr:Ar;w.prototype[e]=function(e){return this[r](n(e))}});w.prototype.compact=function(){return this.filter(to)};w.prototype.reject=function(e,t){e=Pn(e,t,1);return this.filter(function(t){return!e(t)})};w.prototype.slice=function(e,t){e=null==e?0:+e||0;var r=0>e?this.takeRight(-e):this.drop(e);if("undefined"!=typeof t){t=+t||0;r=0>t?r.dropRight(-t):r.take(t-e)}return r};w.prototype.toArray=function(){return this.drop(0)};Er(w.prototype,function(e,r){var i=t[r];if(i){var a=/^(?:filter|map|reject)|While$/.test(r),o=/^(?:first|last)$/.test(r);t.prototype[r]=function(){var r=arguments,s=(r.length,this.__chain__),l=this.__wrapped__,u=!!this.__actions__.length,c=l instanceof w,d=r[0],f=c||ol(l);f&&a&&"function"==typeof d&&1!=d.length&&(c=f=!1);var p=c&&!u;if(o&&!s)return p?e.call(l):i.call(t,this.value());var h=function(e){var n=[e];Xo.apply(n,r);return i.apply(t,n)};if(f){var v=p?l:new w(this),g=e.apply(v,r);if(!o&&(u||g.__actions__)){var y=g.__actions__||(g.__actions__=[]);y.push({func:Ci,args:[h],thisArg:t})}return new n(g,s)}return this.thru(h)}}});Qt(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var r=(/^(?:replace|split)$/.test(e)?To:Eo)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;return i&&!this.__chain__?r.apply(this.value(),e):this[n](function(t){return r.apply(t,e)})}});Er(w.prototype,function(e,r){var n=t[r];if(n){var i=n.name,a=hs[i]||(hs[i]=[]);a.push({name:r,func:n})}});hs[xn(null,P).name]=[{name:"wrapper",func:null}];w.prototype.clone=J;w.prototype.reverse=rt;w.prototype.value=it;t.prototype.chain=Ei;t.prototype.commit=Si;t.prototype.plant=Ti;t.prototype.reverse=Di;t.prototype.toString=Pi;t.prototype.run=t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=Ni;t.prototype.collect=t.prototype.map;t.prototype.head=t.prototype.first;t.prototype.select=t.prototype.filter;t.prototype.tail=t.prototype.rest;return t}var S,T="3.6.0",D=1,P=2,N=4,M=8,j=16,L=32,I=64,R=128,A=256,O=30,z="...",B=150,V=16,q=0,X=1,F=2,Y="Expected a function",W="__lodash_placeholder__",U="[object Arguments]",H="[object Array]",$="[object Boolean]",G="[object Date]",Z="[object Error]",Q="[object Function]",J="[object Map]",K="[object Number]",et="[object Object]",tt="[object RegExp]",rt="[object Set]",nt="[object String]",it="[object WeakMap]",at="[object ArrayBuffer]",ot="[object Float32Array]",st="[object Float64Array]",lt="[object Int8Array]",ut="[object Int16Array]",ct="[object Int32Array]",dt="[object Uint8Array]",ft="[object Uint8ClampedArray]",pt="[object Uint16Array]",ht="[object Uint32Array]",vt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,yt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mt=/&(?:amp|lt|gt|quot|#39|#96);/g,wt=/[&<>"'`]/g,xt=RegExp(mt.source),bt=RegExp(wt.source),_t=/<%-([\s\S]+?)%>/g,kt=/<%([\s\S]+?)%>/g,Ct=/<%=([\s\S]+?)%>/g,Et=/[\u0300-\u036f\ufe20-\ufe23]/g,St=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Tt=/\w*$/,Dt=/^0[xX]/,Pt=/^\[object .+?Constructor\]$/,Nt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Mt=/($^)/,jt=/[.*+?^${}()|[\]\/\\]/g,Lt=RegExp(jt.source),It=/['\n\r\u2028\u2029\\]/g,Rt=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),At=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",Ot=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],zt=-1,Bt={};Bt[ot]=Bt[st]=Bt[lt]=Bt[ut]=Bt[ct]=Bt[dt]=Bt[ft]=Bt[pt]=Bt[ht]=!0;Bt[U]=Bt[H]=Bt[at]=Bt[$]=Bt[G]=Bt[Z]=Bt[Q]=Bt[J]=Bt[K]=Bt[et]=Bt[tt]=Bt[rt]=Bt[nt]=Bt[it]=!1;var Vt={};Vt[U]=Vt[H]=Vt[at]=Vt[$]=Vt[G]=Vt[ot]=Vt[st]=Vt[lt]=Vt[ut]=Vt[ct]=Vt[K]=Vt[et]=Vt[tt]=Vt[nt]=Vt[dt]=Vt[ft]=Vt[pt]=Vt[ht]=!0;Vt[Z]=Vt[Q]=Vt[J]=Vt[rt]=Vt[it]=!1;var qt={leading:!1,maxWait:0,trailing:!1},Xt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Ft={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Yt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Wt={"function":!0,object:!0},Ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=Wt[typeof n]&&n&&!n.nodeType&&n,$t=Wt[typeof r]&&r&&!r.nodeType&&r,Gt=Ht&&$t&&"object"==typeof t&&t,Zt=Wt[typeof self]&&self&&self.Object&&self,Qt=Wt[typeof window]&&window&&window.Object&&window,Jt=$t&&$t.exports===Ht&&Ht,Kt=Gt||Qt!==(this&&this.window)&&Qt||Zt||this,er=E();if("function"==typeof e&&"object"==typeof e.amd&&e.amd){Kt._=er;e(function(){return er})}else Ht&&$t?Jt?($t.exports=er)._=er:Ht._=er:Kt._=er}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})
},{}],14:[function(t,r,n){(function(){var i;i=function(i){return"object"==typeof n&&"object"==typeof r?i(function(){try{return t("jquery")}catch(e){return window.jQuery}}()):"function"==typeof e&&e.amd?e(["jquery"],i):i(jQuery)};i(function(e){return e.pivotUtilities.d3_renderers={Treemap:function(t,r){var n,i,a,o,s,l,u,c,d,f,p,h,v,g;a={localeStrings:{}};r=e.extend(a,r);l=e("<div style='width: 100%; height: 100%;'>");c={name:"All",children:[]};n=function(e,t,r){var i,a,o,s,l,u;if(0!==t.length){null==e.children&&(e.children=[]);o=t.shift();u=e.children;for(s=0,l=u.length;l>s;s++){i=u[s];if(i.name===o){n(i,t,r);return}}a={name:o};n(a,t,r);return e.children.push(a)}e.value=r};g=t.getRowKeys();for(h=0,v=g.length;v>h;h++){u=g[h];f=t.getAggregator(u,[]).value();null!=f&&n(c,u,f)}i=d3.scale.category10();p=e(window).width()/1.4;o=e(window).height()/1.4;s=10;d=d3.layout.treemap().size([p,o]).sticky(!0).value(function(e){return e.size});d3.select(l[0]).append("div").style("position","relative").style("width",p+2*s+"px").style("height",o+2*s+"px").style("left",s+"px").style("top",s+"px").datum(c).selectAll(".node").data(d.padding([15,0,0,0]).value(function(e){return e.value}).nodes).enter().append("div").attr("class","node").style("background",function(e){return null!=e.children?"lightgrey":i(e.name)}).text(function(e){return e.name}).call(function(){this.style("left",function(e){return e.x+"px"}).style("top",function(e){return e.y+"px"}).style("width",function(e){return Math.max(0,e.dx-1)+"px"}).style("height",function(e){return Math.max(0,e.dy-1)+"px"})});return l}}})}).call(this)},{jquery:void 0}],15:[function(t,r,n){(function(){var i;i=function(i){return"object"==typeof n&&"object"==typeof r?i(function(){try{return t("jquery")}catch(e){return window.jQuery}}()):"function"==typeof e&&e.amd?e(["jquery"],i):i(jQuery)};i(function(e){var t;t=function(t,r){return function(n,i){var a,o,s,l,u,c,d,f,p,h,v,g,y,m,w,x,b,_,k,C,E,S,T,D,P;c={localeStrings:{vs:"vs",by:"by"}};i=e.extend(c,i);b=n.getRowKeys();0===b.length&&b.push([]);s=n.getColKeys();0===s.length&&s.push([]);h=function(){var e,t,r;r=[];for(e=0,t=b.length;t>e;e++){f=b[e];r.push(f.join("-"))}return r}();h.unshift("");g=0;l=[h];for(S=0,D=s.length;D>S;S++){o=s[S];w=[o.join("-")];g+=w[0].length;for(T=0,P=b.length;P>T;T++){x=b[T];a=n.getAggregator(x,o);w.push(null!=a.value()?a.value():null)}l.push(w)}_=C=n.aggregatorName+(n.valAttrs.length?"("+n.valAttrs.join(", ")+")":"");p=n.colAttrs.join("-");""!==p&&(_+=" "+i.localeStrings.vs+" "+p);d=n.rowAttrs.join("-");""!==d&&(_+=" "+i.localeStrings.by+" "+d);y={width:e(window).width()/1.4,height:e(window).height()/1.4,title:_,hAxis:{title:p,slantedText:g>50},vAxis:{title:C}};2===l[0].length&&""===l[0][1]&&(y.legend={position:"none"});for(v in r){k=r[v];y[v]=k}u=google.visualization.arrayToDataTable(l);m=e("<div style='width: 100%; height: 100%;'>");E=new google.visualization.ChartWrapper({dataTable:u,chartType:t,options:y});E.draw(m[0]);m.bind("dblclick",function(){var e;e=new google.visualization.ChartEditor;google.visualization.events.addListener(e,"ok",function(){return e.getChartWrapper().draw(m[0])});return e.openDialog(E)});return m}};return e.pivotUtilities.gchart_renderers={"Line Chart":t("LineChart"),"Bar Chart":t("ColumnChart"),"Stacked Bar Chart":t("ColumnChart",{isStacked:!0}),"Area Chart":t("AreaChart",{isStacked:!0})}})}).call(this)},{jquery:void 0}],16:[function(t,r){(function(t){function n(){try{return l in t&&t[l]}catch(e){return!1}}function i(e){return e.replace(/^d/,"___$&").replace(h,"___")}var a,o={},s=t.document,l="localStorage",u="script";o.disabled=!1;o.version="1.3.17";o.set=function(){};o.get=function(){};o.has=function(e){return void 0!==o.get(e)};o.remove=function(){};o.clear=function(){};o.transact=function(e,t,r){if(null==r){r=t;t=null}null==t&&(t={});var n=o.get(e,t);r(n);o.set(e,n)};o.getAll=function(){};o.forEach=function(){};o.serialize=function(e){return JSON.stringify(e)};o.deserialize=function(e){if("string"!=typeof e)return void 0;try{return JSON.parse(e)}catch(t){return e||void 0}};if(n()){a=t[l];o.set=function(e,t){if(void 0===t)return o.remove(e);a.setItem(e,o.serialize(t));return t};o.get=function(e,t){var r=o.deserialize(a.getItem(e));return void 0===r?t:r};o.remove=function(e){a.removeItem(e)};o.clear=function(){a.clear()};o.getAll=function(){var e={};o.forEach(function(t,r){e[t]=r});return e};o.forEach=function(e){for(var t=0;t<a.length;t++){var r=a.key(t);e(r,o.get(r))}}}else if(s.documentElement.addBehavior){var c,d;try{d=new ActiveXObject("htmlfile");d.open();d.write("<"+u+">document.w=window</"+u+'><iframe src="/favicon.ico"></iframe>');d.close();c=d.w.frames[0].document;a=c.createElement("div")}catch(f){a=s.createElement("div");c=s.body}var p=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(a);c.appendChild(a);a.addBehavior("#default#userData");a.load(l);var r=e.apply(o,t);c.removeChild(a);return r}},h=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");o.set=p(function(e,t,r){t=i(t);if(void 0===r)return o.remove(t);e.setAttribute(t,o.serialize(r));e.save(l);return r});o.get=p(function(e,t,r){t=i(t);var n=o.deserialize(e.getAttribute(t));return void 0===n?r:n});o.remove=p(function(e,t){t=i(t);e.removeAttribute(t);e.save(l)});o.clear=p(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(l);for(var r,n=0;r=t[n];n++)e.removeAttribute(r.name);e.save(l)});o.getAll=function(){var e={};o.forEach(function(t,r){e[t]=r});return e};o.forEach=p(function(e,t){for(var r,n=e.XMLDocument.documentElement.attributes,i=0;r=n[i];++i)t(r.name,o.deserialize(e.getAttribute(r.name)))})}try{var v="__storejs__";o.set(v,v);o.get(v)!=v&&(o.disabled=!0);o.remove(v)}catch(f){o.disabled=!0}o.enabled=!o.disabled;"undefined"!=typeof r&&r.exports&&this.module!==r?r.exports=o:"function"==typeof e&&e.amd?e(o):t.store=o})(Function("return this")())},{}],17:[function(e,t){t.exports={name:"yasgui-utils",version:"1.5.2",description:"Utils for YASGUI libs",main:"src/main.js",repository:{type:"git",url:"git://github.com/YASGUI/Utils.git"},licenses:[{type:"MIT",url:"http://yasgui.github.io/license.txt"}],author:{name:"Laurens Rietveld"},maintainers:[{name:"laurens.rietveld",email:"laurens.rietveld@gmail.com"}],bugs:{url:"https://github.com/YASGUI/Utils/issues"},homepage:"https://github.com/YASGUI/Utils",dependencies:{store:"^1.3.14"},_id:"yasgui-utils@1.5.2",dist:{shasum:"c7d06928898e788ee2958969e4c2dc26f435aa64",tarball:"http://registry.npmjs.org/yasgui-utils/-/yasgui-utils-1.5.2.tgz"},_from:"yasgui-utils@>=1.4.1 <2.0.0",_npmVersion:"1.4.3",_npmUser:{name:"laurens.rietveld",email:"laurens.rietveld@gmail.com"},directories:{},_shasum:"c7d06928898e788ee2958969e4c2dc26f435aa64",_resolved:"https://registry.npmjs.org/yasgui-utils/-/yasgui-utils-1.5.2.tgz"}},{}],18:[function(e,t){window.console=window.console||{log:function(){}};t.exports={storage:e("./storage.js"),svg:e("./svg.js"),version:{"yasgui-utils":e("../package.json").version},nestedExists:function(e){for(var t=Array.prototype.slice.call(arguments,1),r=0;r<t.length;r++){if(!e||!e.hasOwnProperty(t[r]))return!1;e=e[t[r]]}return!0}}},{"../package.json":17,"./storage.js":19,"./svg.js":20}],19:[function(e,t){{var r=e("store"),n={day:function(){return 864e5},month:function(){30*n.day()},year:function(){12*n.month()}};t.exports={set:function(e,t,i){if(r.enabled&&e&&void 0!==t){"string"==typeof i&&(i=n[i]());t.documentElement&&(t=(new XMLSerializer).serializeToString(t.documentElement));r.set(e,{val:t,exp:i,time:(new Date).getTime()})}},remove:function(e){r.enabled&&e&&r.remove(e)},get:function(e){if(!r.enabled)return null;if(e){var t=r.get(e);return t?t.exp&&(new Date).getTime()-t.time>t.exp?null:t.val:null}return null}}}},{store:16}],20:[function(e,t){t.exports={draw:function(e,r){if(e){var n=t.exports.getElement(r);n&&(e.append?e.append(n):e.appendChild(n))}},getElement:function(e){if(e&&0==e.indexOf("<svg")){var t=new DOMParser,r=t.parseFromString(e,"text/xml"),n=r.documentElement,i=document.createElement("div");i.className="svgImg";i.appendChild(n);return i}return!1}}},{}],21:[function(e,t){t.exports={name:"yasgui-yasr",description:"Yet Another SPARQL Resultset GUI",version:"2.4.12",main:"src/main.js",licenses:[{type:"MIT",url:"http://yasr.yasgui.org/license.txt"}],author:"Laurens Rietveld",homepage:"http://yasr.yasgui.org",devDependencies:{browserify:"^6.1.0",gulp:"~3.6.0","gulp-bump":"^0.1.11","gulp-concat":"^2.4.1","gulp-connect":"^2.0.5","gulp-embedlr":"^0.5.2","gulp-filter":"^1.0.2","gulp-git":"^0.5.2","gulp-jsvalidate":"^0.2.0","gulp-livereload":"^1.3.1","gulp-minify-css":"0.3.11","gulp-notify":"^2.0.1","gulp-rename":"^1.2.0","gulp-streamify":"0.0.5","gulp-tag-version":"^1.1.0","gulp-uglify":"^1.0.1","require-dir":"^0.1.0","run-sequence":"^1.0.1","vinyl-buffer":"^1.0.0","vinyl-source-stream":"~0.1.1",watchify:"^0.6.4","gulp-sourcemaps":"^1.2.8",exorcist:"^0.1.6","vinyl-transform":"0.0.1","gulp-sass":"^1.2.2","bootstrap-sass":"^3.3.1","browserify-transform-tools":"^1.2.1","gulp-cssimport":"^1.3.1","gulp-html-replace":"^1.4.1","browserify-shim":"^3.8.1"},bugs:"https://github.com/YASGUI/YASR/issues/",keywords:["JavaScript","SPARQL","Editor","Semantic Web","Linked Data"],maintainers:[{name:"Laurens Rietveld",email:"laurens.rietveld@gmail.com",web:"http://laurensrietveld.nl"}],repository:{type:"git",url:"https://github.com/YASGUI/YASR.git"},dependencies:{jquery:"~ 1.11.0",codemirror:"^4.7.0","yasgui-utils":"^1.4.1",pivottable:"^1.2.2","jquery-ui":"^1.10.5",d3:"^3.4.13",cytoscape:"^2.3.11",lodash:"^3.6.0"},"browserify-shim":{google:"global:google"},browserify:{transform:["browserify-shim"]},optionalShim:{codemirror:{require:"codemirror",global:"CodeMirror"},jquery:{require:"jquery",global:"jQuery"},"../../lib/codemirror":{require:"codemirror",global:"CodeMirror"},"../lib/DataTables/media/js/jquery.dataTables.js":{require:"datatables",global:"jQuery"},datatables:{require:"datatables",global:"jQuery"},d3:{require:"d3",global:"d3"},"jquery-ui/sortable":{require:"jquery-ui/sortable",global:"jQuery"},pivottable:{require:"pivottable",global:"jQuery"}}}},{}],22:[function(e,t){"use strict";t.exports=function(e){var t='"',r=",",n="\n",i=e.head.vars,a=e.results.bindings,o=function(){for(var e=0;e<i.length;e++)u(i[e]);d+=n},s=function(){for(var e=0;e<a.length;e++){l(a[e]);d+=n}},l=function(e){for(var t=0;t<i.length;t++){var r=i[t];u(e.hasOwnProperty(r)?e[r].value:"")}},u=function(e){e.replace(t,t+t);c(e)&&(e=t+e+t);d+=" "+e+" "+r},c=function(e){var n=!1;e.match("[\\w|"+r+"|"+t+"]")&&(n=!0);return n},d="";o();s();return d}},{}],23:[function(e,t){"use strict";var r=function(){try{return e("jquery")}catch(t){return window.jQuery}}(),n=t.exports=function(t){var n=r("<div class='booleanResult'></div>"),i=function(){n.empty().appendTo(t.resultsContainer);var i=t.results.getBoolean(),a=null,o=null;if(i===!0){a="check";o="True"}else if(i===!1){a="cross";o="False"}else{n.width("140");o="Could not find boolean value in response"}a&&e("yasgui-utils").svg.draw(n,e("./imgs.js")[a]);r("<span></span>").text(o).appendTo(n)},a=function(){return t.results.getBoolean&&(t.results.getBoolean()===!0||0==t.results.getBoolean())};return{name:null,draw:i,hideFromSelection:!0,getPriority:1,canHandleResults:a}};n.version={"YASR-boolean":e("../package.json").version,jquery:r.fn.jquery}},{"../package.json":21,"./imgs.js":31,jquery:void 0,"yasgui-utils":18}],24:[function(e,t){"use strict";var r=function(){try{return e("jquery")}catch(t){return window.jQuery}}();t.exports={output:"table",useGoogleCharts:!0,outputPlugins:["table","error","boolean","rawResponse"],drawOutputSelector:!0,drawDownloadIcon:!0,getUsedPrefixes:null,persistency:{prefix:function(e){return"yasr_"+r(e.container).closest("[id]").attr("id")+"_"},outputSelector:function(){return"selector"},results:{id:function(e){return"results_"+r(e.container).closest("[id]").attr("id")},key:"results",maxSize:1e5}}}},{jquery:void 0}],25:[function(e,t){"use strict";var r=function(){try{return e("jquery")}catch(t){return window.jQuery}}(),n=t.exports=function(e){var t=r("<div class='errorResult'></div>"),i=r.extend(!0,{},n.defaults),a=function(){var e=null;if(i.tryQueryLink){var t=i.tryQueryLink();e=r("<button>",{"class":"yasr_btn yasr_tryQuery"}).text("Try query in new browser window").click(function(){window.open(t,"_blank");r(this).blur()})}return e},o=function(){var n=e.results.getException();t.empty().appendTo(e.resultsContainer);var o=r("<div>",{"class":"errorHeader"}).appendTo(t);if(0!==n.status){var s="Error";n.statusText&&n.statusText.length<100&&(s=n.statusText);s+=" (#"+n.status+")";o.append(r("<span>",{"class":"exception"}).text(s)).append(a());var l=null;n.responseText?l=n.responseText:"string"==typeof n&&(l=n);l&&t.append(r("<pre>").text(l))}else{o.append(a());t.append(r("<div>",{"class":"corsMessage"}).append(i.corsMessage))}},s=function(e){return e.results.getException()||!1};return{name:null,draw:o,getPriority:20,hideFromSelection:!0,canHandleResults:s}};n.defaults={corsMessage:"Unable to get response from endpoint",tryQueryLink:null}},{jquery:void 0}],26:[function(e,t){t.exports={GoogleTypeException:function(e,t){this.foundTypes=e;this.varName=t;this.toString=function(){var e="Conflicting data types found for variable "+this.varName+'. Assuming all values of this variable are "string".';e+=" To avoid this issue, cast the values in your SPARQL query to the intended xsd datatype";return e};this.toHtml=function(){var e="Conflicting data types found for variable <i>"+this.varName+'</i>. Assuming all values of this variable are "string".';e+=" As a result, several Google Charts will not render values of this particular variable.";e+=" To avoid this issue, cast the values in your SPARQL query to the intended xsd datatype";return e}}}},{}],27:[function(e,t){"use strict";t.exports={selectSaveAsDropDown:'<div class="saveAsDropDown btn-group"><button class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown" type="button">Download as &nbsp;<span class="icon-caret-right"></span></button><ul class="dropdown-menu" role="menu"><li><a class="format" data-accepts="application/sparql-results+json" href="javascript:;">JSON</a></li><li><a class="format" data-accepts="application/sparql-results+xml" href="javascript:;">XML</a></li><li><a class="format" data-accepts="text/csv" href="javascript:;">CSV</a></li><li><a class="format" data-accepts="text/tab-separated-values" href="javascript:;">TSV</a></li><li><a class="format" data-accepts="application/x-binary-rdf-results-table" href="javascript:;">Binary RDF Results</a></li></ul></div>',graphSaveAsDropDown:'<div class="saveAsDropDown btn-group"><button class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown" type="button">Download as &nbsp;<span class="icon-caret-right"></span></button><ul class="dropdown-menu" role="menu"><li><a class="format" data-accepts="application/rdf+json" href="javascript:;">JSON</a></li><li><a class="format" data-accepts="application/ld+json" href="javascript:;">JSON-LD</a></li><li><a class="format" data-accepts="application/rdf+xml" href="javascript:;">RDF-XML</a></li><li><a class="format" data-accepts="text/rdf+n3" href="javascript:;">N3</a></li><li><a class="format" data-accepts="text/plain" href="javascript:;">N-Triples</a></li><li><a class="format" data-accepts="text/x-nquads" href="javascript:;">N-Quads</a></li><li><a class="format" data-accepts="text/turtle" href="javascript:;">Turtle</a></li><li><a class="format" data-accepts="application/trix" href="javascript:;">TriX</a></li><li><a class="format" data-accepts="application/x-trig" href="javascript:;">TriG</a></li><li><a class="format" data-accepts="application/x-binary-rdf" href="javascript:;">Binary RDF</a></li></ul></div>'}},{}],28:[function(e,t){(function(r){var n=e("events").EventEmitter,i=(function(){try{return e("jquery")}catch(t){return window.jQuery}}(),!1),a=!1,o=function(){n.call(this);var e=this;this.init=function(){if(a||("undefined"!=typeof window?window.google:"undefined"!=typeof r?r.google:null)||i)("undefined"!=typeof window?window.google:"undefined"!=typeof r?r.google:null)?e.emit("initDone"):a&&e.emit("initError");else{i=!0;s("http://google.com/jsapi",function(){i=!1;e.emit("initDone")});var t=100,n=6e3,o=+new Date,l=function(){if(!("undefined"!=typeof window?window.google:"undefined"!=typeof r?r.google:null))if(+new Date-o>n){a=!0;i=!1;e.emit("initError")}else setTimeout(l,t)};l()}};this.googleLoad=function(){var t=function(){("undefined"!=typeof window?window.google:"undefined"!=typeof r?r.google:null).load("visualization","1",{packages:["corechart","charteditor"],callback:function(){e.emit("done")}})};if(i){e.once("initDone",t);e.once("initError",function(){e.emit("error","Could not load google loader")})}else if("undefined"!=typeof window?window.google:"undefined"!=typeof r?r.google:null)t();else if(a)e.emit("error","Could not load google loader");else{e.once("initDone",t);e.once("initError",function(){e.emit("error","Could not load google loader")})}}},s=function(e,t){var r=document.createElement("script");r.type="text/javascript";r.readyState?r.onreadystatechange=function(){if("loaded"==r.readyState||"complete"==r.readyState){r.onreadystatechange=null;t()}}:r.onload=function(){t()};r.src=e;document.body.appendChild(r)};o.prototype=new n;t.exports=new o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{events:4,jquery:void 0}],29:[function(e,t){(function(r){"use strict";function n(e,t,r){function n(e,t,a){var l,u,c,d,f,p,h,v;if(null==e||null==t)return e===t;if(e.__placeholder__||t.__placeholder__)return!0;if(e===t)return 0!==e||1/e==1/t;l=i.call(e);if(i.call(t)!=l)return!1;switch(l){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;u=a.length;for(;u--;)if(a[u]==e)return!0;a.push(e);c=0;d=!0;if("[object Array]"==l){f=e.length;p=t.length;if(s){switch(r){case"===":d=f===p;break;case"<==":d=p>=f;break;case"<<=":d=p>f}c=f;s=!1}else{d=f===p;c=f}if(d)for(;c--&&(d=c in e==c in t&&n(e[c],t[c],a)););}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(h in e)if(o(e,h)){c++;if(!(d=o(t,h)&&n(e[h],t[h],a)))break}if(d){v=0;for(h in t)o(t,h)&&++v;if(s)d="<<="===r?v>c:"<=="===r?v>=c:c===v;else{s=!1;d=c===v}}}a.pop();return d}var i={}.toString,a={}.hasOwnProperty,o=function(e,t){return a.call(e,t)},s=!0;return n(e,t,[])}var i=function(){try{return e("jquery")}catch(t){return window.jQuery}}(),a=e("./utils.js"),o=e("yasgui-utils"),s=t.exports=function(t){var l=i.extend(!0,{},s.defaults),u=t.container.closest("[id]").attr("id");null==t.options.gchart&&(t.options.gchart={});var c=t.getPersistencyId("motionchart"),d=t.getPersistencyId("chartConfig");null==t.options.gchart.motionChartState&&(t.options.gchart.motionChartState=o.storage.get(c));null==t.options.gchart.chartConfig&&(t.options.gchart.chartConfig=o.storage.get(d));var f=null,p=function(e){var i="undefined"!=typeof window?window.google:"undefined"!=typeof r?r.google:null;f=new i.visualization.ChartEditor;i.visualization.events.addListener(f,"ok",function(){var e,r;e=f.getChartWrapper();if(!n(e.getChartType,"MotionChart","===")){t.options.gchart.motionChartState=e.n;o.storage.set(c,t.options.gchart.motionChartState);e.setOption("state",t.options.gchart.motionChartState);i.visualization.events.addListener(e,"ready",function(){var r;r=e.getChart();i.visualization.events.addListener(r,"statechange",function(){t.options.gchart.motionChartState=r.getState();o.storage.set(c,t.options.gchart.motionChartState)})})}r=e.getDataTable();e.setDataTable(null);t.options.gchart.chartConfig=e.toJSON();o.storage.set(d,t.options.gchart.chartConfig);e.setDataTable(r);e.setOption("width",l.width);e.setOption("height",l.height);e.draw();t.updateHeader()});e&&e()};return{name:"Google Chart",hideFromSelection:!1,priority:7,canHandleResults:function(e){var t,r;return null!=(t=e.results)&&(r=t.getVariables())&&r.length>0},getDownloadInfo:function(){if(!t.results)return null;var e=t.resultsContainer.find("svg");if(e.length>0)return{getContent:function(){return e[0].outerHTML?e[0].outerHTML:i("<div>").append(e.clone()).html()},filename:"queryResults.svg",contentType:"image/svg+xml",buttonTitle:"Download SVG Image"};var r=t.resultsContainer.find(".google-visualization-table-table");return r.length>0?{getContent:function(){return r.tableToCsv()},filename:"queryResults.csv",contentType:"text/csv",buttonTitle:"Download as CSV"}:void 0},getEmbedHtml:function(){if(!t.results)return null;var e=t.resultsContainer.find("svg").clone().removeAttr("height").removeAttr("width").css("height","").css("width","");if(0==e.length)return null;var r=e[0].outerHTML;r||(r=i("<div>").append(e.clone()).html());return'<div style="width: 800px; height: 600px;">\n'+r+"\n</div>"},draw:function(){var n=function(){t.resultsContainer.empty();if(t.options.output==s.defaults.persistencyId){var r=u+"_gchartWrapper",n=null;t.resultsContainer.append(i("<button>",{"class":"openGchartBtn yasr_btn"}).text("Chart Config").click(function(){f.openDialog(n)})).append(i("<div>",{id:r,"class":"gchartWrapper"}));var d=new google.visualization.DataTable,p=t.results.getAsJson();p.head.vars.forEach(function(r){var n="string";try{n=a.getGoogleTypeForBindings(p.results.bindings,r)}catch(i){if(!(i instanceof e("./exceptions.js").GoogleTypeException))throw i;t.warn(i.toHtml())}d.addColumn(n,r)});var h=null;t.options.getUsedPrefixes&&(h="function"==typeof t.options.getUsedPrefixes?t.options.getUsedPrefixes(t):t.options.getUsedPrefixes);p.results.bindings.forEach(function(e){var t=[];p.head.vars.forEach(function(r,n){t.push(a.castGoogleType(e[r],h,d.getColumnType(n)))});d.addRow(t)});if(t.options.gchart.chartConfig){n=new google.visualization.ChartWrapper(t.options.gchart.chartConfig);if("MotionChart"===n.getChartType()&&null!=t.options.gchart.motionChartState){n.setOption("state",t.options.gchart.motionChartState);google.visualization.events.addListener(n,"ready",function(){var e;e=n.getChart();google.visualization.events.addListener(e,"statechange",function(){t.options.gchart.motionChartState=e.getState();o.storage.set(c,t.options.gchart.motionChartState)})})}n.setDataTable(d)}else n=new google.visualization.ChartWrapper({chartType:"Table",dataTable:d,containerId:r});n.setOption("width",l.width);n.setOption("height",l.height);n.draw();t.updateHeader()}};("undefined"!=typeof window?window.google:"undefined"!=typeof r?r.google:null)&&("undefined"!=typeof window?window.google:"undefined"!=typeof r?r.google:null).visualization&&f?n():e("./gChartLoader.js").on("done",function(){p();n()}).on("error",function(){console.log("errorrr")}).googleLoad()}}};s.defaults={height:"600px",width:"100%",persistencyId:"gchart"}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./exceptions.js":26,"./gChartLoader.js":28,"./utils.js":45,jquery:void 0,"yasgui-utils":18}],30:[function(e,t){"use strict";var r=function(){try{return e("jquery")}catch(t){return window.jQuery}}(),n=e("./utils.js"),i=e("lodash");e("cytoscape");t.exports=function(t){var a={graphJson:e("./parsers/graphJson.js")},o=function(){return t.options.getUsedPrefixes?i.invert("function"==typeof t.options.getUsedPrefixes?t.options.getUsedPrefixes(t):t.options.getUsedPrefixes):null}(),s=function(e){if(o){var t=n.uriToPrefixWithLocalName(o,e);if(t)return t.prefix+":"+t.localName}return e},l=function(e,t){return{data:{id:t.toString(),name:s(e),uri:e,size:70}}},u=function(e){var t={},r={},a=i.slice(i.uniq(i.flatten(i.map(e,function(e){return"uri"==e.object.type?[e.subject.value,e.object.value]:e.subject.value}))),0,20);r.nodes=i.map(a,function(e,r){t[e]=r.toString();return l(e,r)});var s=i.slice(i.filter(e,function(e){return t[e.subject.value]&&t[e.object.value]}),0,50);r.edges=i.map(s,function(e,r){var i=t[e.subject.value],a=t[e.object.value],s=n.uriToPrefixWithLocalName(o,e.predicate.value);return{data:{id:"e"+r.toString(),name:s.prefix+":"+s.localName,source:i,target:a}}});return r},c=function(){t.resultsContainer.empty();t.resultsContainer.append('<div id="cy"></div>');var e=u(t.results.getAsJson().results.bindings),n=cytoscape({container:document.getElementById("cy"),style:cytoscape.stylesheet().selector("node").css({content:"data(name)","text-valign":"center",color:"white","text-outline-width":2,"text-outline-color":"#888",width:"data(size)",height:"data(size)"}).selector("edge").css({"target-arrow-shape":"triangle",width:"mapData(weight, 0, 10, 3, 9)","line-color":"#ddd","target-arrow-color":"#ddd",content:"data(name)","text-opacity":1,"text-valign":"center",color:"black"}).selector(".from").css({"background-color":"#f2836b"}).selector(".to").css({"background-color":"#46A2D0"}),elements:{nodes:e.nodes,edges:e.edges},layout:{name:"circle",padding:10},boxSelectionEnabled:!0}),i=function(e,i){var o={query:"describe <"+e+">",infer:t.currentQuery.infer};t.currentQuery.sameAs&&(o["default-graph-uri"]="http://www.ontotext.com/disable-sameAs");var s=ctx+"/repositories/"+backendRepositoryID;r.ajax({url:s,type:"POST",data:o,headers:{Accept:"application/rdf+json"}}).done(function(e){var t=u(a.graphJson(e).results.bindings);n.load(t,i)}).fail(function(t){console.log("Cannot browse entity: "+e+"; "+t.responseText)})};n.on("tap","node",function(e){var t=e.cyTarget,r=t.data().uri;i(r,function(){var e=n.nodes("[uri='"+r+"']");n.nodes().addClass("to");e.removeClass("to").addClass("from")})})},d=function(){return"CONSTRUCT"==window.editor.getQueryType()||"DESCRIBE"==window.editor.getQueryType()};return{name:"Graph(beta)",draw:c,getPriority:20,hideFromSelection:!1,canHandleResults:d}}},{"./parsers/graphJson.js":37,"./utils.js":45,cytoscape:12,jquery:void 0,lodash:13}],31:[function(e,t){"use strict";t.exports={cross:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="30px" height="30px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><g>	<path d="M83.288,88.13c-2.114,2.112-5.575,2.112-7.689,0L53.659,66.188c-2.114-2.112-5.573-2.112-7.687,0L24.251,87.907   c-2.113,2.114-5.571,2.114-7.686,0l-4.693-4.691c-2.114-2.114-2.114-5.573,0-7.688l21.719-21.721c2.113-2.114,2.113-5.573,0-7.686   L11.872,24.4c-2.114-2.113-2.114-5.571,0-7.686l4.842-4.842c2.113-2.114,5.571-2.114,7.686,0L46.12,33.591   c2.114,2.114,5.572,2.114,7.688,0l21.721-21.719c2.114-2.114,5.573-2.114,7.687,0l4.695,4.695c2.111,2.113,2.111,5.571-0.003,7.686   L66.188,45.973c-2.112,2.114-2.112,5.573,0,7.686L88.13,75.602c2.112,2.111,2.112,5.572,0,7.687L83.288,88.13z"/></g></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="30px" height="30px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path fill="#000000" d="M14.301,49.982l22.606,17.047L84.361,4.903c2.614-3.733,7.76-4.64,11.493-2.026l0.627,0.462  c3.732,2.614,4.64,7.758,2.025,11.492l-51.783,79.77c-1.955,2.791-3.896,3.762-7.301,3.988c-3.405,0.225-5.464-1.039-7.508-3.084  L2.447,61.814c-3.263-3.262-3.263-8.553,0-11.814l0.041-0.019C5.75,46.718,11.039,46.718,14.301,49.982z"/></svg>',unsorted:'<svg   xmlns:dc="http://purl.org/dc/elements/1.1/"   xmlns:cc="http://creativecommons.org/ns#"   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"   xmlns:svg="http://www.w3.org/2000/svg"   xmlns="http://www.w3.org/2000/svg"   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"   version="1.1"   id="Layer_1"   x="0px"   y="0px"   width="100%"   height="100%"   viewBox="0 0 54.552711 113.78478"   enable-background="new 0 0 100 100"   xml:space="preserve"><g     id="g5"     transform="matrix(-0.70522156,-0.70898699,-0.70898699,0.70522156,97.988199,55.081205)"><path       style="fill:#000000"       inkscape:connector-curvature="0"       id="path7"       d="M 57.911,66.915 45.808,55.063 42.904,52.238 31.661,41.25 31.435,41.083 31.131,40.775 30.794,40.523 30.486,40.3 30.069,40.05 29.815,39.911 29.285,39.659 29.089,39.576 28.474,39.326 28.363,39.297 H 28.336 L 27.665,39.128 27.526,39.1 26.94,38.99 26.714,38.961 26.212,38.934 h -0.31 -0.444 l -0.339,0.027 c -1.45,0.139 -2.876,0.671 -4.11,1.564 l -0.223,0.141 -0.279,0.25 -0.335,0.308 -0.054,0.029 -0.171,0.194 -0.334,0.364 -0.224,0.279 -0.25,0.336 -0.225,0.362 -0.192,0.308 -0.197,0.421 -0.142,0.279 -0.193,0.477 -0.084,0.222 -12.441,38.414 c -0.814,2.458 -0.313,5.029 1.115,6.988 v 0.026 l 0.418,0.532 0.17,0.165 0.251,0.281 0.084,0.079 0.283,0.281 0.25,0.194 0.474,0.367 0.083,0.053 c 2.015,1.371 4.641,1.874 7.131,1.094 L 55.228,80.776 c 4.303,-1.342 6.679,-5.814 5.308,-10.006 -0.387,-1.259 -1.086,-2.35 -1.979,-3.215 l -0.368,-0.337 -0.278,-0.303 z m -6.318,5.896 0.079,0.114 -37.369,11.57 11.854,-36.538 10.565,10.317 2.876,2.825 11.995,11.712 z" /></g><path     style="fill:#000000"     inkscape:connector-curvature="0"     id="path7-9"     d="m 8.8748339,52.571766 16.9382111,-0.222584 4.050851,-0.06665 15.719154,-0.222166 0.27778,-0.04246 0.43276,0.0017 0.41632,-0.06121 0.37532,-0.0611 0.47132,-0.119342 0.27767,-0.08206 0.55244,-0.198047 0.19707,-0.08043 0.61095,-0.259721 0.0988,-0.05825 0.019,-0.01914 0.59303,-0.356548 0.11787,-0.0788 0.49125,-0.337892 0.17994,-0.139779 0.37317,-0.336871 0.21862,-0.219786 0.31311,-0.31479 0.21993,-0.259387 c 0.92402,-1.126057 1.55249,-2.512251 1.78961,-4.016904 l 0.0573,-0.25754 0.0195,-0.374113 0.0179,-0.454719 0.0175,-0.05874 -0.0169,-0.258049 -0.0225,-0.493503 -0.0398,-0.355569 -0.0619,-0.414201 -0.098,-0.414812 -0.083,-0.353334 L 53.23955,41.1484 53.14185,40.850967 52.93977,40.377742 52.84157,40.161628 34.38021,4.2507375 C 33.211567,1.9401875 31.035446,0.48226552 28.639484,0.11316952 l -0.01843,-0.01834 -0.671963,-0.07882 -0.236871,0.0042 L 27.335984,-4.7826577e-7 27.220736,0.00379952 l -0.398804,0.0025 -0.313848,0.04043 -0.594474,0.07724 -0.09611,0.02147 C 23.424549,0.60716252 21.216017,2.1142355 20.013025,4.4296865 L 0.93967491,40.894479 c -2.08310801,3.997178 -0.588125,8.835482 3.35080799,10.819749 1.165535,0.613495 2.43199,0.88731 3.675026,0.864202 l 0.49845,-0.02325 0.410875,0.01658 z M 9.1502369,43.934401 9.0136999,43.910011 27.164145,9.2564625 44.70942,43.42818 l -14.765289,0.214677 -4.031106,0.0468 -16.7627881,0.244744 z" /></svg>',sortDesc:'<svg   xmlns:dc="http://purl.org/dc/elements/1.1/"   xmlns:cc="http://creativecommons.org/ns#"   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"   xmlns:svg="http://www.w3.org/2000/svg"   xmlns="http://www.w3.org/2000/svg"   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"   version="1.1"   id="Layer_1"   x="0px"   y="0px"   width="100%"   height="100%"   viewBox="0 0 54.552711 113.78478"   enable-background="new 0 0 100 100"   xml:space="preserve"><g     id="g5"     transform="matrix(-0.70522156,-0.70898699,-0.70898699,0.70522156,97.988199,55.081205)"><path       style="fill:#000000"       inkscape:connector-curvature="0"       id="path7"       d="M 57.911,66.915 45.808,55.063 42.904,52.238 31.661,41.25 31.435,41.083 31.131,40.775 30.794,40.523 30.486,40.3 30.069,40.05 29.815,39.911 29.285,39.659 29.089,39.576 28.474,39.326 28.363,39.297 H 28.336 L 27.665,39.128 27.526,39.1 26.94,38.99 26.714,38.961 26.212,38.934 h -0.31 -0.444 l -0.339,0.027 c -1.45,0.139 -2.876,0.671 -4.11,1.564 l -0.223,0.141 -0.279,0.25 -0.335,0.308 -0.054,0.029 -0.171,0.194 -0.334,0.364 -0.224,0.279 -0.25,0.336 -0.225,0.362 -0.192,0.308 -0.197,0.421 -0.142,0.279 -0.193,0.477 -0.084,0.222 -12.441,38.414 c -0.814,2.458 -0.313,5.029 1.115,6.988 v 0.026 l 0.418,0.532 0.17,0.165 0.251,0.281 0.084,0.079 0.283,0.281 0.25,0.194 0.474,0.367 0.083,0.053 c 2.015,1.371 4.641,1.874 7.131,1.094 L 55.228,80.776 c 4.303,-1.342 6.679,-5.814 5.308,-10.006 -0.387,-1.259 -1.086,-2.35 -1.979,-3.215 l -0.368,-0.337 -0.278,-0.303 z m -6.318,5.896 0.079,0.114 -37.369,11.57 11.854,-36.538 10.565,10.317 2.876,2.825 11.995,11.712 z" /></g><path     style="fill:#000000"     inkscape:connector-curvature="0"     id="path9"     d="m 27.813273,0.12823506 0.09753,0.02006 c 2.39093,0.458209 4.599455,1.96811104 5.80244,4.28639004 L 52.785897,40.894525 c 2.088044,4.002139 0.590949,8.836902 -3.348692,10.821875 -1.329078,0.688721 -2.766603,0.943695 -4.133174,0.841768 l -0.454018,0.02 L 27.910392,52.354171 23.855313,52.281851 8.14393,52.061827 7.862608,52.021477 7.429856,52.021738 7.014241,51.959818 6.638216,51.900838 6.164776,51.779369 5.889216,51.699439 5.338907,51.500691 5.139719,51.419551 4.545064,51.145023 4.430618,51.105123 4.410168,51.084563 3.817138,50.730843 3.693615,50.647783 3.207314,50.310611 3.028071,50.174369 2.652795,49.833957 2.433471,49.613462 2.140099,49.318523 1.901127,49.041407 C 0.97781,47.916059 0.347935,46.528448 0.11153,45.021676 L 0.05352,44.766255 0.05172,44.371683 0.01894,43.936017 0,43.877277 0.01836,43.62206 0.03666,43.122889 0.0765,42.765905 0.13912,42.352413 0.23568,41.940425 0.32288,41.588517 0.481021,41.151945 0.579391,40.853806 0.77369,40.381268 0.876097,40.162336 19.338869,4.2542801 c 1.172169,-2.308419 3.34759,-3.76846504 5.740829,-4.17716604 l 0.01975,0.01985 0.69605,-0.09573 0.218437,0.0225 0.490791,-0.02132 0.39809,0.0046 0.315972,0.03973 0.594462,0.08149 z" /></svg>',sortAsc:'<svg   xmlns:dc="http://purl.org/dc/elements/1.1/"   xmlns:cc="http://creativecommons.org/ns#"   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"   xmlns:svg="http://www.w3.org/2000/svg"   xmlns="http://www.w3.org/2000/svg"   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"   version="1.1"   id="Layer_1"   x="0px"   y="0px"   width="100%"   height="100%"   viewBox="0 0 54.552711 113.78478"   enable-background="new 0 0 100 100"   xml:space="preserve"><g     id="g5"     transform="matrix(-0.70522156,0.70898699,-0.70898699,-0.70522156,97.988199,58.704807)"><path       style="fill:#000000"       inkscape:connector-curvature="0"       id="path7"       d="M 57.911,66.915 45.808,55.063 42.904,52.238 31.661,41.25 31.435,41.083 31.131,40.775 30.794,40.523 30.486,40.3 30.069,40.05 29.815,39.911 29.285,39.659 29.089,39.576 28.474,39.326 28.363,39.297 H 28.336 L 27.665,39.128 27.526,39.1 26.94,38.99 26.714,38.961 26.212,38.934 h -0.31 -0.444 l -0.339,0.027 c -1.45,0.139 -2.876,0.671 -4.11,1.564 l -0.223,0.141 -0.279,0.25 -0.335,0.308 -0.054,0.029 -0.171,0.194 -0.334,0.364 -0.224,0.279 -0.25,0.336 -0.225,0.362 -0.192,0.308 -0.197,0.421 -0.142,0.279 -0.193,0.477 -0.084,0.222 -12.441,38.414 c -0.814,2.458 -0.313,5.029 1.115,6.988 v 0.026 l 0.418,0.532 0.17,0.165 0.251,0.281 0.084,0.079 0.283,0.281 0.25,0.194 0.474,0.367 0.083,0.053 c 2.015,1.371 4.641,1.874 7.131,1.094 L 55.228,80.776 c 4.303,-1.342 6.679,-5.814 5.308,-10.006 -0.387,-1.259 -1.086,-2.35 -1.979,-3.215 l -0.368,-0.337 -0.278,-0.303 z m -6.318,5.896 0.079,0.114 -37.369,11.57 11.854,-36.538 10.565,10.317 2.876,2.825 11.995,11.712 z" /></g><path     style="fill:#000000"     inkscape:connector-curvature="0"     id="path9"     d="m 27.813273,113.65778 0.09753,-0.0201 c 2.39093,-0.45821 4.599455,-1.96811 5.80244,-4.28639 L 52.785897,72.891487 c 2.088044,-4.002139 0.590949,-8.836902 -3.348692,-10.821875 -1.329078,-0.688721 -2.766603,-0.943695 -4.133174,-0.841768 l -0.454018,-0.02 -16.939621,0.223997 -4.055079,0.07232 -15.711383,0.220024 -0.281322,0.04035 -0.432752,-2.61e-4 -0.415615,0.06192 -0.376025,0.05898 -0.47344,0.121469 -0.27556,0.07993 -0.550309,0.198748 -0.199188,0.08114 -0.594655,0.274528 -0.114446,0.0399 -0.02045,0.02056 -0.59303,0.35372 -0.123523,0.08306 -0.486301,0.337172 -0.179243,0.136242 -0.375276,0.340412 -0.219324,0.220495 -0.293372,0.294939 -0.238972,0.277116 C 0.97781,65.869953 0.347935,67.257564 0.11153,68.764336 L 0.05352,69.019757 0.05172,69.414329 0.01894,69.849995 0,69.908735 l 0.01836,0.255217 0.0183,0.499171 0.03984,0.356984 0.06262,0.413492 0.09656,0.411988 0.0872,0.351908 0.158141,0.436572 0.09837,0.298139 0.194299,0.472538 0.102407,0.218932 18.462772,35.908054 c 1.172169,2.30842 3.34759,3.76847 5.740829,4.17717 l 0.01975,-0.0199 0.69605,0.0957 0.218437,-0.0225 0.490791,0.0213 0.39809,-0.005 0.315972,-0.0397 0.594462,-0.0815 z" /></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" baseProfile="tiny" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 100 100" xml:space="preserve"><g id="Captions"></g><g id="Your_Icon">	<path fill-rule="evenodd" fill="#000000" d="M88,84v-2c0-2.961-0.859-4-4-4H16c-2.961,0-4,0.98-4,4v2c0,3.102,1.039,4,4,4h68   C87.02,88,88,87.039,88,84z M58,12H42c-5,0-6,0.941-6,6v22H16l34,34l34-34H64V18C64,12.941,62.939,12,58,12z"/></g></svg>',move:'<svg   xmlns:dc="http://purl.org/dc/elements/1.1/"   xmlns:cc="http://creativecommons.org/ns#"   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"   xmlns:svg="http://www.w3.org/2000/svg"   xmlns="http://www.w3.org/2000/svg"   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"   version="1.1"   id="Layer_1"   x="0px"   y="0px"   width="100%"   height="100%"   viewBox="5 -10 74.074074 100"   enable-background="new 0 0 100 100"   xml:space="preserve"   inkscape:version="0.48.4 r9939"   sodipodi:docname="noun_11656_cc.svg"><metadata     ><rdf:RDF><cc:Work         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /></cc:Work></rdf:RDF></metadata><defs      /><sodipodi:namedview     pagecolor="#ffffff"     bordercolor="#666666"     borderopacity="1"     objecttolerance="10"     gridtolerance="10"     guidetolerance="10"     inkscape:pageopacity="0"     inkscape:pageshadow="2"     inkscape:window-width="753"     inkscape:window-height="480"          showgrid="false"     fit-margin-top="0"     fit-margin-left="0"     fit-margin-right="0"     fit-margin-bottom="0"     inkscape:zoom="2.36"     inkscape:cx="44.101509"     inkscape:cy="31.481481"     inkscape:window-x="287"     inkscape:window-y="249"     inkscape:window-maximized="0"     inkscape:current-layer="Layer_1" /><polygon     points="33,83 50,100 67,83 54,83 54,17 67,17 50,0 33,17 46,17 46,83 "          transform="translate(-7.962963,-10)" /><polygon     points="83,67 100,50 83,33 83,46 17,46 17,33 0,50 17,67 17,54 83,54 "          transform="translate(-7.962963,-10)" /></svg>',fullscreen:'<svg   xmlns:dc="http://purl.org/dc/elements/1.1/"   xmlns:cc="http://creativecommons.org/ns#"   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"   xmlns:svg="http://www.w3.org/2000/svg"   xmlns="http://www.w3.org/2000/svg"   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"   version="1.1"      x="0px"   y="0px"   width="100%"   height="100%"   viewBox="5 -10 74.074074 100"   enable-background="new 0 0 100 100"   xml:space="preserve"   inkscape:version="0.48.4 r9939"   sodipodi:docname="noun_2186_cc.svg"><metadata     ><rdf:RDF><cc:Work         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /></cc:Work></rdf:RDF></metadata><defs      /><sodipodi:namedview     pagecolor="#ffffff"     bordercolor="#666666"     borderopacity="1"     objecttolerance="10"     gridtolerance="10"     guidetolerance="10"     inkscape:pageopacity="0"     inkscape:pageshadow="2"     inkscape:window-width="640"     inkscape:window-height="480"          showgrid="false"     fit-margin-top="0"     fit-margin-left="0"     fit-margin-right="0"     fit-margin-bottom="0"     inkscape:zoom="2.36"     inkscape:cx="44.101509"     inkscape:cy="31.481481"     inkscape:window-x="65"     inkscape:window-y="24"     inkscape:window-maximized="0"     inkscape:current-layer="Layer_1" /><path     d="m -7.962963,-10 v 38.889 l 16.667,-16.667 16.667,16.667 5.555,-5.555 -16.667,-16.667 16.667,-16.667 h -38.889 z"          inkscape:connector-curvature="0"     style="fill:#010101" /><path     d="m 92.037037,-10 v 38.889 l -16.667,-16.667 -16.666,16.667 -5.556,-5.555 16.666,-16.667 -16.666,-16.667 h 38.889 z"          inkscape:connector-curvature="0"     style="fill:#010101" /><path     d="M -7.962963,90 V 51.111 l 16.667,16.666 16.667,-16.666 5.555,5.556 -16.667,16.666 16.667,16.667 h -38.889 z"          inkscape:connector-curvature="0"     style="fill:#010101" /><path     d="M 92.037037,90 V 51.111 l -16.667,16.666 -16.666,-16.666 -5.556,5.556 16.666,16.666 -16.666,16.667 h 38.889 z"          inkscape:connector-curvature="0"     style="fill:#010101" /></svg>',smallscreen:'<svg   xmlns:dc="http://purl.org/dc/elements/1.1/"   xmlns:cc="http://creativecommons.org/ns#"   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"   xmlns:svg="http://www.w3.org/2000/svg"   xmlns="http://www.w3.org/2000/svg"   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"   version="1.1"      x="0px"   y="0px"   width="100%"   height="100%"   viewBox="5 -10 74.074074 100"   enable-background="new 0 0 100 100"   xml:space="preserve"   inkscape:version="0.48.4 r9939"   sodipodi:docname="noun_2186_cc.svg"><metadata     ><rdf:RDF><cc:Work         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /></cc:Work></rdf:RDF></metadata><defs      /><sodipodi:namedview     pagecolor="#ffffff"     bordercolor="#666666"     borderopacity="1"     objecttolerance="10"     gridtolerance="10"     guidetolerance="10"     inkscape:pageopacity="0"     inkscape:pageshadow="2"     inkscape:window-width="1855"     inkscape:window-height="1056"          showgrid="false"     fit-margin-top="0"     fit-margin-left="0"     fit-margin-right="0"     fit-margin-bottom="0"     inkscape:zoom="2.36"     inkscape:cx="44.101509"     inkscape:cy="31.481481"     inkscape:window-x="65"     inkscape:window-y="24"     inkscape:window-maximized="1"     inkscape:current-layer="Layer_1" /><path     d="m 30.926037,28.889 0,-38.889 -16.667,16.667 -16.667,-16.667 -5.555,5.555 16.667,16.667 -16.667,16.667 38.889,0 z"          inkscape:connector-curvature="0"     style="fill:#010101" /><path     d="m 53.148037,28.889 0,-38.889 16.667,16.667 16.666,-16.667 5.556,5.555 -16.666,16.667 16.666,16.667 -38.889,0 z"          inkscape:connector-curvature="0"     style="fill:#010101" /><path     d="m 30.926037,51.111 0,38.889 -16.667,-16.666 -16.667,16.666 -5.555,-5.556 16.667,-16.666 -16.667,-16.667 38.889,0 z"          inkscape:connector-curvature="0"     style="fill:#010101" /><path     d="m 53.148037,51.111 0,38.889 16.667,-16.666 16.666,16.666 5.556,-5.556 -16.666,-16.666 16.666,-16.667 -38.889,0 z"          inkscape:connector-curvature="0"     style="fill:#010101" /></svg>'}
},{}],32:[function(e){e("./tableToCsv.js")},{"./tableToCsv.js":33}],33:[function(e){"use strict";var t=function(){try{return e("jquery")}catch(t){return window.jQuery}}();t.fn.tableToCsv=function(e){var r="";e=t.extend({quote:'"',delimiter:",",lineBreak:"\n"},e);var n=function(t){var r=!1;t.match("[\\w|"+e.delimiter+"|"+e.quote+"]")&&(r=!0);return r},i=function(t){t.replace(e.quote,e.quote+e.quote);n(t)&&(t=e.quote+t+e.quote);r+=" "+t+" "+e.delimiter},a=function(t){t.forEach(function(e){i(e)});r+=e.lineBreak},o=t(this),s={},l=0;o.find("tr:first *").each(function(){t(this).attr("colspan")?l+=+t(this).attr("colspan"):l++});o.find("tr").each(function(e,r){for(var n=t(r),i=[],o=0,u=0;l>u+o;u++)if(s[u]){i.push(s[u].text);s[u].rowSpan--;s[u].rowSpan||delete s[u]}else{var c=n.find(":nth-child("+(u+1)+")");console.log(c);var d=c.attr("colspan"),f=c.attr("rowspan");if(d&&!isNaN(d)){for(var p=0;d>p;p++)i.push(c.text());o+=d-1}else if(f&&!isNaN(f)){s[u+o]={rowSpan:f-1,text:c.text()};i.push(c.text());o++}else i.push(c.text())}a(i)});return r}},{jquery:void 0}],34:[function(e,t){"use strict";var r=function(){try{return e("jquery")}catch(t){return window.jQuery}}(),n=e("yasgui-utils");console=console||{log:function(){}};e("./jquery/extendJquery.js");var i=t.exports=function(t,a,o){var s={};s.options=r.extend(!0,{},i.defaults,a);s.container=r("<div class='yasr'></div>").appendTo(t);s.header=r("<div class='yasr_header'></div>").appendTo(s.container);s.resultsInfo=r("<div class='alert alert-info results-info'><span class='count-info'>Showing <span class='res-count'></span><span class='all-info'> of <span class='all-count'></span></span>. </span><span class='time-took'></span></div>").appendTo(s.container);s.insertResultsInfo=r("<div class='alert alert-info results-info'></div>").appendTo(s.container);s.resultsContainer=r("<div class='yasr_results'></div>").appendTo(s.container);s.storage=n.storage;var l=null;s.getPersistencyId=function(e){null===l&&(l=s.options.persistency&&s.options.persistency.prefix?"string"==typeof s.options.persistency.prefix?s.options.persistency.prefix:s.options.persistency.prefix(s):!1);return l&&e?l+("string"==typeof e?e:e(s)):null};s.options.useGoogleCharts&&e("./gChartLoader.js").once("initError",function(){s.options.useGoogleCharts=!1}).init();s.plugins={};for(var u in i.plugins)(s.options.useGoogleCharts||"gchart"!=u)&&(s.plugins[u]=new i.plugins[u](s));s.updateHeader=function(){var e=s.header.find(".yasr_downloadIcon").removeAttr("title"),t=s.header.find(".saveAsDropDown"),r=s.header.find(".yasr_embedBtn"),n=s.plugins[s.options.output];if(n){if("Table"==n.name){e.hide();t.removeAttr("style")}else{t.hide();e.show()}var i=n.getDownloadInfo?n.getDownloadInfo():null;if(i){i.buttonTitle&&e.attr("title",i.buttonTitle);e.prop("disabled",!1);e.find("path").each(function(){this.style.fill="black"})}else{e.prop("disabled",!0).prop("title","Download not supported for this result representation");e.find("path").each(function(){this.style.fill="gray"})}var a=null;n.getEmbedHtml&&(a=n.getEmbedHtml());a&&a.length>0?r.show():r.hide()}};s.draw=function(e){s.updateHeader();s.updateResultsInfo();if(!s.results)return!1;e||(e=s.options.output);var t=null,n=-1,i=[];for(var a in s.plugins)if(s.plugins[a].canHandleResults(s)){var o=s.plugins[a].getPriority;"function"==typeof o&&(o=o(s));if(null!=o&&void 0!=o&&o>n){n=o;t=a}}else i.push(a);c(i);if(e in s.plugins&&s.plugins[e].canHandleResults(s)){r(s.resultsContainer).empty();s.plugins[e].draw();return!0}if(t){r(s.resultsContainer).empty();s.plugins[t].draw();s.header.find(".yasr_btnGroup .select_"+t).click();return!0}return!1};var c=function(e){s.header.find(".yasr_btnGroup li").removeClass("disabled");e.forEach(function(e){s.header.find(".yasr_btnGroup .select_"+e).parent().addClass("disabled")})};s.somethingDrawn=function(){return!s.resultsContainer.is(":empty")};s.resetResults=function(){s.resultsInfo.hide();s.resultsInfo.find(".time-took").text("");s.insertResultsInfo.hide();s.resultsCount=void 0;s.allCount=void 0;s.resultsContainer.empty();s.header.hide();var e=window.editor.getQueryType();if("SELECT"==e||"CONSTRUCT"==e||"DESCRIBE"==e){var t=r('<div class="spinWrapper"></div>');s.resultsContainer.append(t);{(new Spinner).spin(t.get(0))}}};s.updateDownloadDropdown=function(){var t;s.header.find(".saveAsDropDown").remove();var n=window.editor.getQueryType();"SELECT"==n&&(t=r(e("./extensions.js").selectSaveAsDropDown));("CONSTRUCT"==n||"DESCRIBE"==n)&&(t=r(e("./extensions.js").graphSaveAsDropDown));if(t){t.find(".format").click(function(){s.getQueryResultsAsFormat(r(this).data("accepts"))});s.header.append(t)}};s.updateResultsInfo=function(e){if("ASK"!=window.editor.getQueryType()){s.resultsInfo.find(".count-info").show();if(void 0!=s.resultsCount||void 0!=s.allCount){if(void 0==s.resultsCount)s.resultsInfo.find(".res-count").text("loading..");else{s.resultsInfo.find(".res-count").text(s.resultsCount);e&&s.resultsInfo.find(".time-took").text("Query took "+e+" seconds.")}void 0==s.allCount?s.resultsInfo.find(".all-count").text("loading.."):-1==s.allCount?s.resultsInfo.find(".all-info").hide():s.resultsInfo.find(".all-count").text(s.allCount);s.resultsInfo.show()}}else if(void 0!=e){s.resultsInfo.find(".count-info").hide();s.resultsInfo.find(".time-took").text("Query took "+e+" seconds.");s.resultsInfo.show()}};s.setResultsCount=function(e){if(e.responseJSON){s.allCount=-1;e.responseJSON["http://www.ontotext.com/"]&&(s.allCount=e.responseJSON["http://www.ontotext.com/"]["http://www.ontotext.com/"][0].value);if(e.responseJSON.results&&e.responseJSON.results.bindings){var t=e.responseJSON.results.bindings[0],r=e.responseJSON.head.vars,n=Object.keys(t).filter(function(e){return r.indexOf(e)>-1});n.length>0&&(s.allCount=t[n[0]].value)}s.updateResultsInfo()}};s.setUpdatesCount=function(e,t){s.insertResultsInfo.text(void 0==e?"Update operation took "+t+" seconds.":0>e?"Update operation removed "+Math.abs(e)+" statements and took "+t+" seconds.":e>0?"Update operation added "+e+" statements and took "+t+" seconds.":"Update operation changed 0 statements and took "+t+" seconds.");s.insertResultsInfo.show()};s.setResponse=function(t,r,i,a){try{s.results=e("./parsers/wrapper.js")(t,r,i)}catch(o){s.results={getException:function(){return o}}}s.results.getAsJson().results&&(s.resultsCount=s.results.getAsJson().results.bindings.length);if(s.results.getAsJson()){s.header.show();s.updateDownloadDropdown()}403==t.status?s.results.getException=function(){return{status:403,statusText:"Forbidden",responseText:"You don't have permission to execute this query. Ask your admin for support."}}:s.updateResultsInfo(a);s.draw();if(s.options.persistency){var l=s.getPersistencyId(s.options.persistency.results.key);l&&(s.results.getOriginalResponseAsString&&s.results.getOriginalResponseAsString().length<s.options.persistency.results.maxSize?n.storage.set(l,s.results.getAsStoreObject(),"month"):n.storage.remove(l))}};var d=null,f=null,p=null;s.warn=function(e){if(!d){d=r("<div>",{"class":"toggableWarning"}).prependTo(s.container).hide();f=r("<span>",{"class":"toggleWarning"}).html("&times;").click(function(){d.hide(400)}).appendTo(d);p=r("<span>",{"class":"toggableMsg"}).appendTo(d)}p.empty();e instanceof r?p.append(e):p.html(e);d.show(400)};var h=null,v=function(){if(null===h){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;h=e&&Blob}return h},g=function(t){var i=function(){var e=r('<ul class="yasr_btnGroup nav nav-tabs"></ul>');r.each(t.plugins,function(i,a){if(!a.hideFromSelection){{var o=a.name||i,s=r("<li></li>");r("<a></a>").text(o).addClass("select_"+i).click(function(){if(!r(this).parent().hasClass("disabled")){e.find("li.active").removeClass("active");s.addClass("active");t.options.output=i;var a=t.getPersistencyId(t.options.persistency.outputSelector);a&&n.storage.set(a,t.options.output,"month");d&&d.hide(400);t.draw();t.updateHeader()}}).appendTo(s)}s.appendTo(e);t.options.output==i&&s.addClass("active")}});e.children().length>1&&t.header.append(e)},a=function(){var n=function(e,t){var r=null,n=window.URL||window.webkitURL||window.mozURL||window.msURL;if(n&&Blob){var i=new Blob([e],{type:t});r=n.createObjectURL(i)}return r},i=r("<button class='btn btn-success btn-sm yasr_downloadIcon'>Save</button>").click(function(){var i=t.plugins[t.options.output];if(i&&i.getDownloadInfo){var a=i.getDownloadInfo(),o=n(a.getContent(),a.contentType?a.contentType:"text/plain"),s=r("<a></a>",{href:o,download:a.filename});e("./utils.js").fireClick(s)}});t.header.append(i)};t.options.drawOutputSelector&&i();t.options.drawDownloadIcon&&v()&&a();t.resultsInfo.hide();t.insertResultsInfo.hide()},y=s.getPersistencyId(s.options.persistency.outputSelector);if(y){var m=n.storage.get(y);m&&(s.options.output=m)}g(s);if(!o&&s.options.persistency&&s.options.persistency.results){var w,x=s.getPersistencyId(s.options.persistency.results.key);x&&(w=n.storage.get(x));if(!w&&s.options.persistency.results.id){var b="string"==typeof s.options.persistency.results.id?s.options.persistency.results.id:s.options.persistency.results.id(s);if(b){w=n.storage.get(b);w&&n.storage.remove(b)}}w&&(r.isArray(w)?s.setResponse.apply(this,w):s.setResponse(w))}o&&s.setResponse(o);s.updateHeader();return s};i.plugins={};i.registerOutput=function(e,t){i.plugins[e]=t};i.defaults=e("./defaults.js");i.version={YASR:e("../package.json").version,jquery:r.fn.jquery,"yasgui-utils":e("yasgui-utils").version};i.utils=e("./utils.js");i.$=r;try{i.registerOutput("boolean",e("./boolean.js"))}catch(a){}try{i.registerOutput("table",e("./table.js"))}catch(a){}try{i.registerOutput("rawResponse",e("./rawResponse.js"))}catch(a){}try{i.registerOutput("error",e("./error.js"))}catch(a){}try{i.registerOutput("pivot",e("./pivot.js"))}catch(a){}try{i.registerOutput("gchart",e("./gchart.js"))}catch(a){}try{i.registerOutput("graph",e("./graph.js"))}catch(a){}},{"../package.json":21,"./boolean.js":23,"./defaults.js":24,"./error.js":25,"./extensions.js":27,"./gChartLoader.js":28,"./gchart.js":29,"./graph.js":30,"./imgs.js":31,"./jquery/extendJquery.js":32,"./parsers/wrapper.js":40,"./pivot.js":42,"./rawResponse.js":43,"./table.js":44,"./utils.js":45,jquery:void 0,"yasgui-utils":18}],35:[function(e,t){"use strict";(function(){try{return e("jquery")}catch(t){return window.jQuery}})(),t.exports=function(t){return e("./dlv.js")(t,",")}},{"./dlv.js":36,jquery:void 0}],36:[function(e,t){"use strict";var r=function(){try{return e("jquery")}catch(t){return window.jQuery}}();e("../../lib/jquery.csv-0.71.js");t.exports=function(e,t){var n={},i=r.csv.toArrays(e,{separator:t}),a=function(e){return 0==e.indexOf("http")?"uri":null},o=function(){if(2==i.length&&1==i[0].length&&1==i[1].length&&"boolean"==i[0][0]&&("1"==i[1][0]||"0"==i[1][0])){n["boolean"]="1"==i[1][0]?!0:!1;return!0}return!1},s=function(){if(i.length>0&&i[0].length>0){n.head={vars:i[0]};return!0}return!1},l=function(){if(i.length>1){n.results={bindings:[]};for(var e=1;e<i.length;e++){for(var t={},r=0;r<i[e].length;r++){var o=n.head.vars[r];if(o){var s=i[e][r],l=a(s);t[o]={value:s};l&&(t[o].type=l)}}n.results.bindings.push(t)}n.head={vars:i[0]};return!0}return!1},u=o();if(!u){var c=s();c&&l()}return n}},{"../../lib/jquery.csv-0.71.js":3,jquery:void 0}],37:[function(e,t){"use strict";{var r=(function(){try{return e("jquery")}catch(t){return window.jQuery}}(),e("lodash")),n=function(e){if("object"==typeof e){"bnode"==e.type&&(e.value=e.value.slice(2));return e}return 0==e.indexOf("_:")?{type:"bnode",value:e.slice(2)}:{type:"uri",value:e}};t.exports=function(e){if(e){var t=r.map(e,function(e,t){return r.map(e,function(e,i){return r.map(e,function(e){return[n(t),n(i),n(e)]})})}),i=r.reduce(t,function(e,t){return e.concat(t)},[]);i=r.reduce(i,function(e,t){return e.concat(t)},[]);var a=i.map(function(e){return{subject:e[0],predicate:e[1],object:e[2]}});return{head:{vars:["subject","predicate","object"]},results:{bindings:a}}}return!1}}},{jquery:void 0,lodash:13}],38:[function(e,t){"use strict";(function(){try{return e("jquery")}catch(t){return window.jQuery}})(),t.exports=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return!1}return"object"==typeof e&&e.constructor==={}.constructor?e:!1}},{jquery:void 0}],39:[function(e,t){"use strict";(function(){try{return e("jquery")}catch(t){return window.jQuery}})(),t.exports=function(t){return e("./dlv.js")(t,"	")}},{"./dlv.js":36,jquery:void 0}],40:[function(e,t){"use strict";{var r=(function(){try{return e("jquery")}catch(t){return window.jQuery}}(),e("lodash"));t.exports=function(t,n,i){var a={xml:e("./xml.js"),json:e("./json.js"),tsv:e("./tsv.js"),csv:e("./csv.js"),graphJson:e("./graphJson.js")},o=null,s=null,l=null,u=null,c=null,d=null,f=function(){if("object"==typeof t){if(t.exception)d=t.exception;else if(void 0!=t.status&&(t.status>=300||0===t.status)){d={status:t.status};"string"==typeof i&&(d.errorString=i);t.responseText&&(d.responseText=t.responseText);t.statusText&&(d.statusText=t.statusText)}if(t.contentType)o=t.contentType.toLowerCase();else if(t.getResponseHeader&&t.getResponseHeader("content-type")){var e=t.getResponseHeader("content-type").trim().toLowerCase();e.length>0&&(o=e)}t.response?s=t.response:n||i||(s=t)}d||s||(s=t.responseText?t.responseText:t)},p=function(){return l},h=function(){if(u)return u;if(u===!1||d)return!1;var e=function(){if(o)if(o.indexOf("json")>-1){try{u=a.json(s,window.editor.getQueryType());l=u;var e=window.editor.getQueryType();("DESCRIBE"==e||"CONSTRUCT"==e)&&(u=a.graphJson(l))}catch(t){d=t}c="json"}else if(o.indexOf("xml")>-1){try{u=a.xml(s)}catch(t){d=t}c="xml"}else if(o.indexOf("csv")>-1){try{u=a.csv(s)}catch(t){d=t}c="csv"}else if(o.indexOf("tab-separated")>-1){try{u=a.tsv(s)}catch(t){d=t}c="tsv"}},t=function(){u=a.json(s);if(u)c="json";else try{u=a.xml(s);u&&(c="xml")}catch(e){}};e();u||t();u||(u=!1);return u},v=function(){var e=h();return e&&"head"in e?e.head.vars:null},g=function(){var e=h();return e&&"results"in e?e.results.bindings:null},y=function(){var e=h();return e&&"boolean"in e?e["boolean"]:null},m=function(){return s},w=function(e){if("json"==c){var t=x(e);return JSON.stringify(t,void 0,2)}return b().slice(0,e)},x=function(e){if(l.results&&l.results.bindings&&l.results.bindings.length>e){var t=jQuery.extend(!0,{},l);t.results.bindings=l.results.bindings.slice(0,e)}else{var n=r.keys(l).slice(0,e);t=r.pick(l,function(e,t){return n.indexOf(t)>=0})}return t},b=function(){var e="";"string"==typeof s?e=s:"json"==c?e=JSON.stringify(s,void 0,2):"xml"==c&&(e=(new XMLSerializer).serializeToString(s));return e},_=function(){return d},k=function(){null==c&&h();return c},C=function(){var e={};if(t.status){e.status=t.status;e.responseText=t.responseText;e.statusText=t.statusText;e.contentType=o}else e=t;var r=n,a=void 0;"string"==typeof i&&(a=i);return[e,r,a]};f();u=h();return{getAsStoreObject:C,getRawJson:p,getAsJson:h,getOriginalResponse:m,getShortOriginalResponse:w,getShortOriginalResponseAsJSON:x,getOriginalResponseAsString:b,getOriginalContentType:function(){return o},getVariables:v,getBindings:g,getBoolean:y,getType:k,getException:_}}}},{"./csv.js":35,"./graphJson.js":37,"./json.js":38,"./tsv.js":39,"./xml.js":41,jquery:void 0,lodash:13}],41:[function(e,t){"use strict";{var r=function(){try{return e("jquery")}catch(t){return window.jQuery}}();t.exports=function(e){var t=function(e){o.head={};for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if("variable"==r.nodeName){o.head.vars||(o.head.vars=[]);var n=r.getAttribute("name");n&&o.head.vars.push(n)}}},n=function(e){o.results={};o.results.bindings=[];for(var t=0;t<e.childNodes.length;t++){for(var r=e.childNodes[t],n=null,i=0;i<r.childNodes.length;i++){var a=r.childNodes[i];if("binding"==a.nodeName){var s=a.getAttribute("name");if(s){n=n||{};n[s]={};for(var l=0;l<a.childNodes.length;l++){var u=a.childNodes[l],c=u.nodeName;if("#text"!=c){n[s].type=c;n[s].value=u.innerHTML;var d=u.getAttribute("datatype");d&&(n[s].datatype=d)}}}}}n&&o.results.bindings.push(n)}},i=function(e){o["boolean"]="true"==e.innerHTML?!0:!1},a=null;"string"==typeof e?a=r.parseXML(e):r.isXMLDoc(e)&&(a=e);var e=null;if(!(a.childNodes.length>0))return null;e=a.childNodes[0];for(var o={},s=0;s<e.childNodes.length;s++){var l=e.childNodes[s];"head"==l.nodeName&&t(l);"results"==l.nodeName&&n(l);"boolean"==l.nodeName&&i(l)}return o}}},{jquery:void 0}],42:[function(e,t){"use strict";var r=function(){try{return e("jquery")}catch(t){return window.jQuery}}(),n=e("./utils.js"),i=e("yasgui-utils"),a=e("./imgs.js");(function(){try{return e("jquery-ui/sortable")}catch(t){return window.jQuery}})();(function(){try{return e("pivottable")}catch(t){return window.jQuery}})();if(!r.fn.pivotUI)throw new Error("Pivot lib not loaded");var o=t.exports=function(t){var s=r.extend(!0,{},o.defaults);if(s.useD3Chart){try{var l=function(){try{return e("d3")}catch(t){return window.d3}}();l&&e("../node_modules/pivottable/dist/d3_renderers.js")}catch(u){}r.pivotUtilities.d3_renderers&&r.extend(!0,r.pivotUtilities.renderers,r.pivotUtilities.d3_renderers)}var c,d=null,f=function(){var e=t.results.getVariables();if(!s.mergeLabelsWithUris)return e;var r=[];d="string"==typeof s.mergeLabelsWithUris?s.mergeLabelsWithUris:"Label";e.forEach(function(t){-1!==t.indexOf(d,t.length-d.length)&&e.indexOf(t.substring(0,t.length-d.length))>=0||r.push(t)});return r},p=function(e){var r=f(),i=null;t.options.getUsedPrefixes&&(i="function"==typeof t.options.getUsedPrefixes?t.options.getUsedPrefixes(t):t.options.getUsedPrefixes);t.results.getBindings().forEach(function(t){var a={};r.forEach(function(e){if(e in t){var r=t[e].value;d&&t[e+d]?r=t[e+d].value:"uri"==t[e].type&&(r=n.uriToPrefixed(i,r));a[e]=r}else a[e]=null});e(a)})},h=t.getPersistencyId(s.persistencyId),v=function(){var e=i.storage.get(h);if(e){var n=t.results.getVariables(),a=!0;e.cols.forEach(function(e){n.indexOf(e)<0&&(a=!1)});a&&e.rows.forEach(function(e){n.indexOf(e)<0&&(a=!1)});if(!a){e.cols=[];e.rows=[]}r.pivotUtilities.renderers[e.rendererName]||delete e.rendererName}else e={};return e},g=function(){var n=function(){var e=function(e){if(h){var r={cols:e.cols,rows:e.rows,rendererName:e.rendererName,aggregatorName:e.aggregatorName,vals:e.vals};i.storage.set(h,r,"month")}e.rendererName.toLowerCase().indexOf(" chart")>=0?n.show():n.hide();t.updateHeader()},n=r("<button>",{"class":"openPivotGchart yasr_btn"}).text("Chart Config").click(function(){c.find('div[dir="ltr"]').dblclick()}).appendTo(t.resultsContainer);c=r("<div>",{"class":"pivotTable"}).appendTo(r(t.resultsContainer));var s=r.extend(!0,{},v(),o.defaults.pivotTable);s.onRefresh=function(){var t=s.onRefresh;return function(r){e(r);t&&t(r)}}();window.pivot=c.pivotUI(p,s);var l=r(i.svg.getElement(a.move));c.find(".pvtTriangle").replaceWith(l);r(".pvtCols").prepend(r("<div>",{"class":"containerHeader"}).text("Columns"));r(".pvtRows").prepend(r("<div>",{"class":"containerHeader"}).text("Rows"));r(".pvtUnused").prepend(r("<div>",{"class":"containerHeader"}).text("Available Variables"));r(".pvtVals").prepend(r("<div>",{"class":"containerHeader"}).text("Cells"));setTimeout(t.updateHeader,400)};t.options.useGoogleCharts&&s.useGoogleCharts&&!r.pivotUtilities.gchart_renderers?e("./gChartLoader.js").on("done",function(){try{e("../node_modules/pivottable/dist/gchart_renderers.js");r.extend(!0,r.pivotUtilities.renderers,r.pivotUtilities.gchart_renderers)}catch(t){s.useGoogleCharts=!1}n()}).on("error",function(){console.log("could not load gchart");s.useGoogleCharts=!1;n()}).googleLoad():n()},y=function(){return t.results&&t.results.getVariables&&t.results.getVariables()&&t.results.getVariables().length>0},m=function(){if(!t.results)return null;var e=t.resultsContainer.find(".pvtRendererArea svg");if(e.length>0)return{getContent:function(){return e[0].outerHTML?e[0].outerHTML:r("<div>").append(e.clone()).html()},filename:"queryResults.svg",contentType:"image/svg+xml",buttonTitle:"Download SVG Image"};var n=t.resultsContainer.find(".pvtRendererArea table");return n.length>0?{getContent:function(){return n.tableToCsv()},filename:"queryResults.csv",contentType:"text/csv",buttonTitle:"Download as CSV"}:void 0},w=function(){if(!t.results)return null;var e=t.resultsContainer.find(".pvtRendererArea svg").clone().removeAttr("height").removeAttr("width").css("height","").css("width","");if(0==e.length)return null;var n=e[0].outerHTML;n||(n=r("<div>").append(e.clone()).html());return'<div style="width: 800px; height: 600px;">\n'+n+"\n</div>"};return{getDownloadInfo:m,getEmbedHtml:w,options:s,draw:g,name:"Pivot Table",canHandleResults:y,getPriority:4}};o.defaults={mergeLabelsWithUris:!1,useGoogleCharts:!0,useD3Chart:!0,persistencyId:"pivot",pivotTable:{}};o.version={"YASR-rawResponse":e("../package.json").version,jquery:r.fn.jquery}},{"../node_modules/pivottable/dist/d3_renderers.js":14,"../node_modules/pivottable/dist/gchart_renderers.js":15,"../package.json":21,"./gChartLoader.js":28,"./imgs.js":31,"./utils.js":45,d3:void 0,jquery:void 0,"jquery-ui/sortable":void 0,pivottable:void 0,"yasgui-utils":18}],43:[function(e,t){"use strict";var r=function(){try{return e("jquery")}catch(t){return window.jQuery}}(),n=function(){try{return e("codemirror")}catch(t){return window.CodeMirror}}();e("codemirror/addon/fold/foldcode.js");e("codemirror/addon/fold/foldgutter.js");e("codemirror/addon/fold/xml-fold.js");e("codemirror/addon/fold/brace-fold.js");e("codemirror/addon/edit/matchbrackets.js");e("codemirror/mode/xml/xml.js");e("codemirror/mode/javascript/javascript.js");var i=t.exports=function(e){var t=r.extend(!0,{},i.defaults),a=null,o=function(){var r=t.CodeMirror;r.value=e.results.getShortOriginalResponse(t.limit);e.resultsCount>t.limit&&e.resultsInfo.find(".res-count").text(t.limit);var i=e.results.getType();if(i){"json"==i&&(i={name:"javascript",json:!0});r.mode=i}a=n(e.resultsContainer.get()[0],r);a.on("fold",function(){a.refresh()});a.on("unfold",function(){a.refresh()})},s=function(){if(!e.results)return!1;if(!e.results.getOriginalResponseAsString)return!1;var t=e.results.getOriginalResponseAsString();return t&&0!=t.length||!e.results.getException()?!0:!1},l=function(){if(!e.results)return null;var t=e.results.getOriginalContentType(),r=e.results.getType();return{getContent:function(){return e.results.getOriginalResponse()},filename:"queryResults"+(r?"."+r:""),contentType:t?t:"text/plain",buttonTitle:"Download raw response"}};return{draw:o,name:"Raw Response",canHandleResults:s,getPriority:2,getDownloadInfo:l}};i.defaults={CodeMirror:{readOnly:!0,lineNumbers:!0,lineWrapping:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]},limit:100};i.version={"YASR-rawResponse":e("../package.json").version,jquery:r.fn.jquery,CodeMirror:n.version}},{"../package.json":21,codemirror:void 0,"codemirror/addon/edit/matchbrackets.js":5,"codemirror/addon/fold/brace-fold.js":6,"codemirror/addon/fold/foldcode.js":7,"codemirror/addon/fold/foldgutter.js":8,"codemirror/addon/fold/xml-fold.js":9,"codemirror/mode/javascript/javascript.js":10,"codemirror/mode/xml/xml.js":11,jquery:void 0}],44:[function(e,t){"use strict";var r=function(){try{return e("jquery")}catch(t){return window.jQuery}}(),n=e("yasgui-utils"),i=e("./utils.js"),a=(e("./imgs.js"),e("lodash"));(function(){try{return e("datatables")}catch(t){return window.jQuery}})();e("../lib/colResizable-1.4.js");var o=t.exports=function(t){var i=null,s={name:"Table",getPriority:10},l=s.options=r.extend(!0,{},o.defaults),c=l.persistency?t.getPersistencyId(l.persistency.tableLength):null,d=function(){var e=[],r=t.results.getBindings(),n=t.results.getVariables(),i=null;t.options.getUsedPrefixes&&(i="function"==typeof t.options.getUsedPrefixes?t.options.getUsedPrefixes(t):t.options.getUsedPrefixes);i=a.invert(i);for(var o=0;o<r.length;o++){var u=[];u.push("");for(var c=r[o],d=0;d<n.length;d++){var f=n[d];u.push(f in c?l.getCellContent?l.getCellContent(t,s,c,f,{rowId:o,colId:d,usedPrefixes:i}):"":"")}e.push(u)}return e},f=(t.getPersistencyId("eventId")||"yasr_"+r(t.container).closest("[id]").attr("id"),function(){var e=new ZeroClipboard(r("td div .icon-link"));e.on("ready",function(){e.on("aftercopy",t.afterCopy)})}),p=function(){i.on("order.dt",function(){h()});c&&i.on("length.dt",function(e,t,r){n.storage.set(c,r,"month")});r.extend(!0,l.callbacks,l.handlers);i.delegate("td","click",function(e){if(l.callbacks&&l.callbacks.onCellClick){var t=l.callbacks.onCellClick(this,e);if(t===!1)return!1}}).delegate("td","mouseenter",function(e){l.callbacks&&l.callbacks.onCellMouseEnter&&l.callbacks.onCellMouseEnter(this,e);var t=r(this);l.fetchTitlesFromPreflabel&&void 0===t.attr("title")&&0==t.text().trim().indexOf("http")&&u(t)}).delegate("td","mouseleave",function(e){l.callbacks&&l.callbacks.onCellMouseLeave&&l.callbacks.onCellMouseLeave(this,e)});f()};s.draw=function(){i=r('<table cellpadding="0" cellspacing="0" border="0" class="resultsTable table table-striped table-bordered fixedCellWidth"></table>');r(t.resultsContainer).html(i);var e=l.datatable;e.data=d();e.columns=l.getColumns(t,s);var a=n.storage.get(c);a&&(e.pageLength=a);i.DataTable(r.extend(!0,{},e));h();p();i.colResizable();i.find("thead").outerHeight();r(t.resultsContainer).find(".JCLRgrip").height(i.find("thead").outerHeight());var o=t.header.outerHeight();if(o>0){t.resultsContainer.find(".dataTables_wrapper").css("position","relative").css("top","-"+o+"px").css("margin-bottom","-"+o+"px");r(t.resultsContainer).find(".JCLRgrip").css("marginTop",o+"px")}var u=t.resultsContainer.find(".dataTables_filter label");u.contents().get(0).remove();u.find("input[type=search]").attr("placeholder","Filter query results").addClass("form-control")};var h=function(){var e={sorting:"unsorted",sorting_asc:"sortAsc",sorting_desc:"sortDesc"};i.find(".sortIcons").remove();for(var t in e){var n=r("<div class='sortIcons'></div>");"sorting"==t?n.append("<a class='icon-sort'></a>"):"sorting_asc"==t?n.append("<a class='icon-sort-by-alphabet'></a>"):"sorting_desc"==t&&n.append("<a class='icon-sort-by-alphabet-alt'></a>");i.find("th."+t).append(n)}};s.canHandleResults=function(){return t.results&&t.results.getVariables&&t.results.getVariables()&&t.results.getVariables().length>0};s.getDownloadInfo=function(){return t.results?{getContent:function(){return e("./bindingsToCsv.js")(t.results.getAsJson())},filename:"queryResults.csv",contentType:"text/csv",buttonTitle:"Download as CSV"}:null};return s},s=function(e,t,r,n,a){var o=r[n],s=null,u="";if("uri"==o.type){var c,d=o.value,f=d;if(a.usedPrefixes){var p=i.uriToPrefixWithLocalName(a.usedPrefixes,f);if(p){f=p.prefix+":"+p.localName;""!=p.prefix&&(c=ctx+"/resource/"+encodeURIComponent(p.prefix)+"/"+encodeURIComponent(p.localName))}}void 0==c&&(c=ctx+"/resource?uri="+encodeURIComponent(d));s="<a title='"+d+"' class='uri' href='"+c+"' target='_blank'>"+f+"</a> <a class='icon-link share-result' data-clipboard-text='"+d+"' title='Copy to Clipboard' href='#'></a>";u=" class = 'uri-cell'"}else s="<span class='nonUri'>"+l(e,t,o)+"</span>";return"<div"+u+">"+s+"</div>"},l=function(e,t,r){var n=YASR.utils.escapeHtmlEntities(r.value);if("bnode"==r.type)return"_:"+n;if(r["xml:lang"])n='"'+n+'"<sup>@'+r["xml:lang"]+"</sup>";else if(r.datatype){var i="http://www.w3.org/2001/XMLSchema#",a=r.datatype;a=0===a.indexOf(i)?"xsd:"+a.substring(i.length):"&lt;"+a+"&gt;";n='"'+n+'"<sup>^^'+a+"</sup>"}return n},u=function(e){var t=function(){e.attr("title","")};r.get("http://preflabel.org/api/v1/label/"+encodeURIComponent(e.text())+"?silent=true").success(function(r){"object"==typeof r&&r.label?e.attr("title",r.label):"string"==typeof r&&r.length>0?e.attr("title",r):t()}).fail(t)};o.defaults={getCellContent:s,persistency:{tableLength:"tableLength"},getColumns:function(e,t){var r=function(r){if(!t.options.mergeLabelsWithUris)return!0;var n="string"==typeof t.options.mergeLabelsWithUris?t.options.mergeLabelsWithUris:"Label";return-1!==r.indexOf(n,r.length-n.length)&&e.results.getVariables().indexOf(r.substring(0,r.length-n.length))>=0?!1:!0},n=[];n.push({title:""});e.results.getVariables().forEach(function(e){n.push({title:"<span>"+e+"</span>",visible:r(e)})});return n},fetchTitlesFromPreflabel:!0,mergeLabelsWithUris:!1,callbacks:{onCellMouseEnter:null,onCellMouseLeave:null,onCellClick:null},datatable:{paginate:!1,info:!1,autoWidth:!1,order:[],pageLength:50,lengthMenu:[[10,50,100,1e3,-1],[10,50,100,1e3,"All"]],lengthChange:!0,drawCallback:function(e){for(var t=0;t<e.aiDisplay.length;t++)r("td:eq(0)",e.aoData[e.aiDisplay[t]].nTr).html(t+1);var n=!1;r(e.nTableWrapper).find(".paginate_button").each(function(){-1==r(this).attr("class").indexOf("current")&&-1==r(this).attr("class").indexOf("disabled")&&(n=!0)});n?r(e.nTableWrapper).find(".dataTables_paginate").show():r(e.nTableWrapper).find(".dataTables_paginate").hide()},columnDefs:[{width:"32px",orderable:!1,targets:0}]}};o.version={"YASR-table":e("../package.json").version,jquery:r.fn.jquery,"jquery-datatables":r.fn.DataTable.version}},{"../lib/colResizable-1.4.js":2,"../package.json":21,"./bindingsToCsv.js":22,"./imgs.js":31,"./utils.js":45,datatables:void 0,jquery:void 0,lodash:13,"yasgui-utils":18}],45:[function(e,t){"use strict";var r=function(){try{return e("jquery")}catch(t){return window.jQuery}}(),n=(e("lodash"),e("./exceptions.js").GoogleTypeException);t.exports={escapeHtmlEntities:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},uriToPrefixed:function(e,t){if(e)for(var r in e)if(0==t.indexOf(e[r])){t=r+":"+t.substring(e[r].length);break}return t},uriToPrefixWithLocalName:function(e,t){var r=Object.keys(e).filter(function(e){return 0==t.indexOf(e)});if(r.length>0){var n=r[0],i=e[n],a=t.substring(n.length);return{prefix:i,localName:a}}return null},getGoogleTypeForBinding:function(e){if(null==e)return null;if(null==e.type||"typed-literal"!==e.type&&"literal"!==e.type)return"string";switch(e.datatype){case"http://www.w3.org/2001/XMLSchema#float":case"http://www.w3.org/2001/XMLSchema#decimal":case"http://www.w3.org/2001/XMLSchema#int":case"http://www.w3.org/2001/XMLSchema#integer":case"http://www.w3.org/2001/XMLSchema#long":case"http://www.w3.org/2001/XMLSchema#gYearMonth":case"http://www.w3.org/2001/XMLSchema#gYear":case"http://www.w3.org/2001/XMLSchema#gMonthDay":case"http://www.w3.org/2001/XMLSchema#gDay":case"http://www.w3.org/2001/XMLSchema#gMonth":return"number";case"http://www.w3.org/2001/XMLSchema#date":return"date";case"http://www.w3.org/2001/XMLSchema#dateTime":return"datetime";case"http://www.w3.org/2001/XMLSchema#time":return"timeofday";default:return"string"}},getGoogleTypeForBindings:function(e,r){var i={},a=0;e.forEach(function(e){var n=t.exports.getGoogleTypeForBinding(e[r]);if(null!=n){if(!(n in i)){i[n]=0;a++}i[n]++}});if(0==a)return"string";if(1!=a)throw new n(i,r);for(var o in i)return o},castGoogleType:function(e,r,n){if(null==e)return null;if("string"==n||null==e.type||"typed-literal"!==e.type&&"literal"!==e.type)return(e.type="uri")?t.exports.uriToPrefixed(r,e.value):e.value;switch(e.datatype){case"http://www.w3.org/2001/XMLSchema#float":case"http://www.w3.org/2001/XMLSchema#decimal":case"http://www.w3.org/2001/XMLSchema#int":case"http://www.w3.org/2001/XMLSchema#integer":case"http://www.w3.org/2001/XMLSchema#long":case"http://www.w3.org/2001/XMLSchema#gYearMonth":case"http://www.w3.org/2001/XMLSchema#gYear":case"http://www.w3.org/2001/XMLSchema#gMonthDay":case"http://www.w3.org/2001/XMLSchema#gDay":case"http://www.w3.org/2001/XMLSchema#gMonth":return Number(e.value);case"http://www.w3.org/2001/XMLSchema#date":var a=i(e.value);if(a)return a;case"http://www.w3.org/2001/XMLSchema#dateTime":case"http://www.w3.org/2001/XMLSchema#time":return new Date(e.value);default:return e.value}},fireClick:function(e){e&&e.each(function(e,t){var n=r(t);if(document.dispatchEvent){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,1,1,1,1,1,!1,!1,!1,!1,0,n[0]);n[0].dispatchEvent(i)}else document.fireEvent&&n[0].click()
})}};var i=function(e){var t=new Date(e.replace(/(\d)([\+-]\d{2}:\d{2})/,"$1Z$2"));return isNaN(t)?null:t}},{"./exceptions.js":26,jquery:void 0,lodash:13}]},{},[1])(1)});
//# sourceMappingURL=yasr.min.js.map